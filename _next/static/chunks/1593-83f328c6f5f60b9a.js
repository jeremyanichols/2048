"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1593],{6072:(e,a,t)=>{t.d(a,{L:()=>o});var l=t(55729),n=t(49633),d=t(32052),s=t(89138),r=t(22900),i=t(4754);let o=e=>{let{provider:a,activeAccount:t,activeChainId:o}=(0,i.v)(),{contract:c}=(0,d.XX)(),{accountTxs:u}=(0,s.F)(),m=(0,l.useMemo)(()=>e.filter(e=>e.nft).map(e=>e.nft.address),[e,t]),{data:h,refetch:p}=(0,n.useQuery)(["validatorBalances",null==m?void 0:m.length,t,o,null==c?void 0:c.balanceCheckerAddress],()=>{if(m.length&&a&&(null==c?void 0:c.balanceCheckerAddress))return(0,r.$B)(m,a,c.balanceCheckerAddress)},{enabled:!!(null==m?void 0:m.length)&&!!a&&!!(null==c?void 0:c.balanceCheckerAddress),refetchOnMount:!0,refetchInterval:18e5});return(0,l.useEffect)(()=>{p()},[null==u?void 0:u.length]),h}},7131:(e,a,t)=>{t.d(a,{m:()=>b});var l=t(6029),n=t(56191),d=t(7477),s=t(55729),r=t(14187),i=t(65485),o=t(42674),c=t(56042),u=t(53665),m=t(32052),h=t(1203),p=t(53286),v=t(7273),x=t(36750);let f=()=>{let{t:e}=(0,r.Bd)(),[a,t]=(0,s.useState)(!1),{options:f,downloadCsv:w}=function(){let{validators:e,isAllRecordsFetched:a}=(0,c.d)(),{url:t}=(0,m.XX)(),{data:l,isLoading:d}=(0,p.K)(null==t?void 0:t.api);return{options:(0,s.useMemo)(()=>[{id:"30",label:"Last 30 days",timeWindow:30},{id:"all",label:"All time",timeWindow:(0,o.A)(new Date,e.reduce((e,a)=>{let t=a.activatedAt?new Date(a.activatedAt):void 0;return t&&e.getTime()>t.getTime()?t:e},new Date))}],[e]),downloadCsv:(0,s.useCallback)(async s=>{if((null==t?void 0:t.api)&&a&&!d&&l){let{startDate:a,endDate:d}=(0,h.rd)(1,l,s),r=await u.y.getDailyRewards(t.api,e.map(e=>e.index),a,d),o=[];r.results.map(e=>{let{balance:a,withdrawals:t,rewards:l,date:d,unixtime:s}=(0,v._)(e);o.push({[x.d.date]:(0,h.Bp)(new Date(d)).substring(0,10),"Date timestamp":s,[x.d.rewards]:null!=l?l:n.AA.Sb,[x.d.withdrawals]:t,[x.d.balance]:a})});let c=n.Wp.order(o,{propertyName:"Date",direction:"desc"}),m=(0,i.parse)(c,{quote:"",includeEmptyRows:!0});m.endsWith("\n")||(m=m.concat("\n"));let p=encodeURI("data:text/csv;charset=utf-8,".concat(m));window.open(p)}},[t,a,d,l])}}(),{down:T}=(0,d.P)(),E=null==T?void 0:T.flounder;return(0,l.jsxs)(n.ms.bL,{modal:!1,open:a,onOpenChange:()=>t(e=>!e),children:[(0,l.jsx)(n.ms.l9,{asChild:!0,children:(0,l.jsx)(n.$n,{application:!0,color:"secondary",variant:"text",size:E?"sm":"md",endIcon:{iconKey:E?"download":a?"chevronUp":"chevronDown",size:14},className:"normal-case hover:no-underline text-itemSecondaryDefault !p-2 -m-2 !text-callout flounder:!text-callout font-semibold",children:E?"":e("dashboard.KEYS.DOWNLOAD_CSV")})}),(0,l.jsx)(n.ms.UC,{className:"w-40",align:"end",sideOffset:6,children:f.map(e=>(0,l.jsx)(n.ms.q7,{className:"mb-px",children:(0,l.jsx)(n.$n,{size:"sm",variant:"menuItem",className:"justify-start disabled:backgroundSecondaryOnDefault",onClick:()=>w(e.timeWindow),children:e.label})},e.id))})]})},w=e=>{let{tableName:a,tablesRows:t}=e,{t:s}=(0,r.Bd)(),{down:i}=(0,d.P)(),o=null==i?void 0:i.flounder,c=t.length&&T({data:t});return c?(0,l.jsx)(n.az,{flex:!0,className:"relative",children:(0,l.jsx)(n.$n,{application:!0,color:"secondary",variant:"text",href:c,download:"stakefish_".concat(a,".csv"),startIcon:{iconKey:"download",size:14},size:o?"sm":"md",className:"normal-case hover:no-underline text-itemSecondaryDefault !p-2 -m-2 !text-callout flounder:!text-callout font-semibold [&_span]:!m-0",children:o?"":s("dashboard.KEYS.DOWNLOAD_CSV")})}):null},T=e=>{let{data:a}=e;try{let e=(0,i.parse)(a,{quote:"",includeEmptyRows:!0});e.endsWith("\n")||(e=e.concat("\n"));let t=new Blob([e],{type:"text/csv;charset=utf-8;"});return URL.createObjectURL(t)}catch(e){return}},E=e=>{let{isSm:a,isMd:t,recordsCount:d,isAllRecordsFetched:i,totalPerPage:o}=e,{t:c}=(0,r.Bd)(),u=a?"sm":!a&&t?"md":"lg",m=(0,s.useMemo)(()=>({sm:"",md:"".concat(c("dashboard.KEYS.TOTAL"),":"),lg:"".concat(c(o?"dashboard.KEYS.ITEMS_PER_PAGE":"dashboard.KEYS.TOTAL_RECORDS"),":")}),[u]);return(0,l.jsxs)(l.Fragment,{children:[m[u]," ",i?d:(0,l.jsx)(n.EA,{width:32,className:"translate-y-px"})]})},S=e=>{let{filterData:a,getCheckedValues:t,onFilterValuesChange:s}=e,{t:i}=(0,r.Bd)(),{down:o}=(0,d.P)(),c=null==o?void 0:o.flounder;return(0,l.jsxs)(n.ms.bL,{modal:!1,children:[(0,l.jsx)(n.ms.l9,{asChild:!0,children:(0,l.jsx)(n.$n,{application:!0,color:"secondary",variant:"text",startIcon:{iconKey:"filter",size:14},size:c?"sm":"md",className:"normal-case hover:no-underline text-itemSecondaryDefault !p-2 -m-2 !text-callout flounder:!text-callout font-semibold [&_span]:!m-0",children:c?"":i("common.KEYS.FILTER")})}),(0,l.jsx)(n.ms.UC,{sideOffset:2,alignOffset:-4,align:"end",className:"py-1",children:a.map((e,a)=>(0,l.jsxs)(n.az,{children:[(0,l.jsx)(n.az,{className:"px-4 pt-2 pb-1",children:(0,l.jsx)(n.ms.JU,{children:e.label})}),(0,l.jsx)(n.az,{className:"px-0 py-1",children:null==e?void 0:e.content.map((a,d)=>(0,l.jsx)(n.ms.q7,{onSelect:e=>e.preventDefault(),className:"px-4 py-1 !outline-none",children:(0,l.jsx)(n.Sc,{id:"type-".concat(a.value),label:a.title,checked:!a.disabled&&t(e.group,a.value),disabled:a.disabled,onCheckedChange:()=>s(e.group,a.value)})},d))})]},a))})]})},b=e=>{let{tableName:a,tablesRows:t,isLoadingTableRows:s,isAllRecordsFetched:r,filter:i,disableSticky:o,showTotal:c=!0,totalItems:u,className:m}=e,{down:h}=(0,d.P)(),p="dailyRewards"===a;return s?null:(0,l.jsx)("div",{className:(0,n.cx)("absolute -top-0.5 right-2 z-[11] flounder:top-0 tuna:-top-0.5 flounder:right-4",!o&&"tuna:pt-3 tuna:-mt-14 tuna:pr-2 tuna:sticky tuna:right-2 tuna:top-12 tuna:bg-backgroundPrimaryDefault tuna:float-right",m),children:(0,l.jsxs)(n.az,{flex:!0,alignItems:"stretch",className:"py-3 flounder:py-2 tuna:py-[9px] *:px-3 *:flounder:px-3.5 divide-x divide-itemSecondaryMute *:h-4",children:[c&&(0,l.jsx)("span",{className:"relative flex items-center leading-none text-callout text-itemSecondaryDefault",children:(0,l.jsx)(E,{isSm:null==h?void 0:h.flounder,isMd:null==h?void 0:h.salmon,recordsCount:u||t.length,isAllRecordsFetched:r,totalPerPage:p})}),p?(0,l.jsx)(n.az,{flex:!0,className:"relative",children:(0,l.jsx)(f,{})}):(0,l.jsx)(w,{tableName:a,tablesRows:t}),i&&(0,l.jsx)(n.az,{flex:!0,className:"relative !pr-0",children:(0,l.jsx)(S,{...i})})]})})}},7273:(e,a,t)=>{t.d(a,{G:()=>i,_:()=>r});var l=t(71963),n=t(63226),d=t(1203),s=t(36750);let r=e=>{let a=e.cumulativeConsensusIncome&&n.Wp.formatWeiToEther(e.cumulativeConsensusIncome),t=n.Wp.formatWeiToEther(e.closingBalance),l=e.consensusIncome&&n.Wp.formatWeiToEther(e.consensusIncome),s=n.Wp.formatWeiToEther(e.withdrawals),r=(0,d.Hx)(e.unixtime,"numeric");return{balance:n.Wp.padBeaconChainData(t),cumulativeBalance:a&&n.Wp.padBeaconChainData(a),rewards:l&&n.Wp.padBeaconChainData(l),withdrawals:n.Wp.padBeaconChainData(s),unixtime:e.unixtime,date:r,epoch:e.epoch}},i=()=>[{sortKey:s.d.date,width:14.75,align:"start",headerCell:s.d.date,bodyCell:e=>(0,l.formatInTimeZone)(e[s.d.date],"UTC","yyyy-MM-dd")},{width:25,align:"end",headerCell:s.d.rewards,bodyCell:e=>e[s.d.rewards]},{width:25,align:"end",headerCell:s.d.withdrawals,bodyCell:e=>e[s.d.withdrawals]},{width:24.5,expand:!0,align:"end",headerCell:s.d.balance,bodyCell:e=>e[s.d.balance]}]},17395:(e,a,t)=>{t.d(a,{Q:()=>m});var l=t(14187),n=t(63904),d=t(35394),s=t(32052),r=t(44327),i=t(14902),o=t(8685),c=t(4754);let u={refetchInterval:13e3,options:void 0},m=function(){var e;let{refetchInterval:a,options:t,indices:m}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,{url:h}=(0,s.XX)(),{activeAccount:p}=(0,c.v)(),{t:v}=(0,l.Bd)(),x=(0,d.m)(e=>e.setValidatorsCount),{data:f,isLoading:w,error:T}=(0,r.P)({queryKey:["validatorsByIndex",p,null==h?void 0:h.api,m],refetchInterval:a||u.refetchInterval,queryFn:e=>{let{pageParam:a={limit:r.z,offset:0}}=e;return o.y.findValidators({address:p,indices:null==m?void 0:m.filter(Boolean),serviceURL:h.api,limit:a.limit,offset:a.offset})},...t||u.options,enabled:(null==t?void 0:t.enabled)!==!1&&!!p&&!!(null==h?void 0:h.api)&&!!(null==m?void 0:m.length),onError(){x(0)}}),E=(null==f?void 0:f.pages.reduce((e,a)=>[...e,...a.results],[]))||[],S=(null==E?void 0:E.filter(e=>!(p&&(0,i.A_)(p,e.owner,e.withdrawalCredentials||void 0))).map(e=>e.index))||[],b=E&&!w&&null!=(e=null==m?void 0:m.filter(e=>0>E.findIndex(a=>a.index===e)))?e:[];return{validators:E,isLoading:w,error:T&&(0,n.u1)(T,v),isOwnedByActiveAddress:(null==S?void 0:S.length)===0,validatorsNotOwnedByWallet:S,validatorsNotOwnedByStakefish:b}}},27733:(e,a,t)=>{t.d(a,{a:()=>p});var l=t(6029),n=t(56191),d=t(55729),s=t(17648),r=t.n(s),i=t(14187),o=t(63226),c=t(4754);let u=e=>{let{isBLS:a,index:t,children:s}=e,{t:u}=(0,i.Bd)(),{activeChainId:m}=(0,c.v)(),[h,p]=(0,d.useState)(!1),[v,x]=(0,d.useState)(null),f="&network=".concat(r()(o.Bt[m||o.cG]));return a&&t&&0!==t?(0,l.jsx)("div",{onMouseEnter:()=>p(!0),onMouseLeave:()=>{x(setTimeout(()=>{p(!1)},250))},children:(0,l.jsx)(n.m_,{delayDuration:250,content:u("dashboard.KEYS.BLS_CONVERT_PROMPT",{link:"/ethereum/change-credentials?validator=".concat(t).concat(f)}),className:"flounder:max-w-[415px] font-mono -mb-2 [&_a]:underline",contentProps:{align:"start",onMouseEnter:()=>v&&clearTimeout(v)},dangerousContent:!0,open:h,children:s})}):(0,l.jsx)(l.Fragment,{children:s})};var m=t(99481),h=t(14902);let p=e=>{let{address:a,rawAddress:t,type:d,index:s,maxInlineSize:r="44.7ch"}=e;return(0,l.jsxs)(n.az,{flex:!0,justifyContent:"start",className:"gap-2 -ml-1 text-inherit",children:[(0,l.jsx)(u,{isBLS:"BLS"===d,index:s,children:(0,l.jsx)(m.w,{type:d})}),("EPOD"===d||"SAFE"===d)&&t&&(0,h.E$)(t)&&(0,l.jsx)(m.w,{type:"COMP"}),(0,l.jsx)(n.Mz,{address:a,wrapperClassName:"overflow-hidden text-callout",style:{maxInlineSize:r}})]})}},36750:(e,a,t)=>{t.d(a,{d:()=>o,n:()=>i});var l=t(55729),n=t(56191),d=t(79283),s=t(7273),r=t(4754);let i=e=>{let{page:a}=e,[t,i]=(0,l.useState)({columnName:"Date",direction:"desc"}),{activeAccount:c,activeChainId:u}=(0,r.v)(),{dailyRewards:m,isLoading:h,error:p,totalItems:v}=(0,d.t)({page:a}),[x,f]=(0,l.useState)(),w=(0,l.useMemo)(()=>{let e=[];return m.map(a=>{let{balance:t,withdrawals:l,rewards:d,date:r}=(0,s._)(a);e.push({[o.date]:r,[o.rewards]:d?"".concat(d," ETH"):n.AA.Sb,[o.withdrawals]:"".concat(l," ETH"),[o.balance]:"".concat(t," ETH")})}),e},[h,t,c,m]),T=(0,l.useMemo)(()=>n.Wp.order(w,{propertyName:t.columnName,direction:t.direction}).map((e,a)=>({...e,rowIndex:a})),[h,t,c,a]);return{tableData:{rows:w,sortedRows:T,columns:(0,l.useMemo)(()=>(0,s.G)(),[u,c]),activePubKeyState:[x,f],totalItems:v},controlledSort:{sortValues:t,setSortValues:i},tableStates:{isLoading:h},error:p}},o={balance:"Closing balance",rewards:"Protocol rewards",withdrawals:"Partial withdrawals",date:"Date"}},49460:(e,a,t)=>{t.d(a,{T:()=>o});var l=t(6029),n=t(55729),d=t(14187),s=t(56191),r=t(22900),i=t(4754);let o=e=>{let{text:a,activationDate:t,estimateActivationTime:o,epochs:u,tooltip:m,className:h}=e,{t:p}=(0,d.Bd)(),{activeChainId:v}=(0,i.v)(),x=(0,n.useMemo)(()=>(0,r.S7)(o),[o]),f=(0,n.useMemo)(()=>"Exiting"!==a||(0,r.Er)(null==u?void 0:u.exit)?"Pending"!==a||x?a:"PendingEstimate":"ExitingEstimate",[null==u?void 0:u.exit,x]),w=m||c[f],T=(0,n.useMemo)(()=>({Confirming:void 0,Deposited:void 0,Pending:{time:x},PendingEstimate:void 0,Active:{date:t},Exiting:{exitEpoch:null==u?void 0:u.exit},ExitingEstimate:void 0,Exited:{exitEpoch:null==u?void 0:u.exit},Withdrawn:{exitEpoch:null==u?void 0:u.exit,withdrawableEpoch:null==u?void 0:u.withdrawable},Slashed:void 0,"N/A":void 0}),[v,null==u?void 0:u.exit,null==u?void 0:u.withdrawable,x,t]);return(0,l.jsxs)(s.az,{flex:!0,className:(0,s.cx)("gap-1","Slashed"===a?"text-itemErrorDefault":"text-inherit",h),children:["In progress"===a&&(0,l.jsx)(s.kW,{iconSize:14,className:"mb-0 mr-1",state:"success"}),"Failed"===a&&(0,l.jsx)(s.kW,{iconSize:14,state:"error",className:"mb-0 mr-1"}),a,w&&(0,l.jsx)(s.m_,{content:p(w,T[f]),triggerProps:{className:"flex relative top-px"},className:"flounder:max-w-[320px] font-mobileCallout",dangerousContent:!0,children:(0,l.jsx)(s.$n,{variant:"text",icon:{iconKey:"infoCircle",size:14},size:"sm",as:"span",className:"Slashed"===a||"Error"===a?"text-itemErrorDefault":"text-itemSecondaryDefault"})})]})},c={Confirming:"dashboard.KEYS.VALIDATOR_CONFIRMING_STATUS_TOOLTIP",Deposited:"dashboard.KEYS.VALIDATOR_DEPOSITED_STATUS_TOOLTIP",Pending:"dashboard.KEYS.VALIDATOR_PENDING_STATUS_TOOLTIP",PendingEstimate:"dashboard.KEYS.VALIDATOR_PENDING_STATUS_TOOLTIP_ESTIMATE",Active:"dashboard.KEYS.VALIDATOR_ACTIVE_STATUS_TOOLTIP",Exiting:"dashboard.KEYS.VALIDATOR_EXITING_STATUS_TOOLTIP",ExitingEstimate:"dashboard.KEYS.VALIDATOR_EXITING_STATUS_TOOLTIP_ESTIMATE",Exited:"dashboard.KEYS.VALIDATOR_EXITED_STATUS_TOOLTIP",Withdrawn:"dashboard.KEYS.VALIDATOR_WITHDRAWN_STATUS_TOOLTIP",Error:"dashboard.KEYS.VALIDATOR_ERROR_STATUS_TOOLTIP",Slashed:void 0,"N/A":void 0}},53286:(e,a,t)=>{t.d(a,{K:()=>d});var l=t(49633),n=t(53665);function d(e){let{data:a,isLoading:t}=(0,l.useQuery)(["lastProcessedDate",e],()=>n.y.getLastProcessedDate(e),{enabled:!!e});return{isLoading:t,data:a}}},53665:(e,a,t)=>{t.d(a,{y:()=>r});var l=t(26906),n=t(90495);let d="/v1/eth/rewards",s={lastProcessedDay:e=>"".concat(e).concat(d,"/v2/syncing"),dailyRewards:e=>"".concat(e).concat(d,"/v2/rewards"),validatorsRewardsStats:e=>"".concat(e).concat(d,"/v2/rewards/stats")},r={getValidatorRewardsStats:async(e,a,t,n)=>await l.Q.post(s.validatorsRewardsStats(e),{validatorIndices:null==a?void 0:a.filter(Boolean),startDate:t,endDate:n}).then(e=>e.data),getDailyRewards:async(e,a,t,n)=>{let d=(await l.Q.post(s.dailyRewards(e),{validatorIndices:a.filter(Boolean),startDate:t,endDate:n})).data,r=d.results.reverse().map(e=>({...e,epoch:"",balance:"",unixtime:Math.floor(new Date(e.summaryDate).getTime()/1e3)}));return{totalItems:d.totalItems,results:r}},getLastProcessedDate:async e=>{if(!e)return null;let a=(await l.Q.get(s.lastProcessedDay(e),n.f)).data.lastSyncedDay.split("-").map(e=>Number(e));return new Date(Date.UTC(a[0],a[1]-1,a[2]))}}},79283:(e,a,t)=>{t.d(a,{t:()=>p});var l=t(42674),n=t(14187),d=t(49633),s=t(63904),r=t(32052),i=t(4754),o=t(56042),c=t(53665),u=t(1203),m=t(53286),h=t(91752);let p=e=>{let{page:a=1,timeWindow:t=h.e5}=e,{url:p}=(0,r.XX)(),{activeAccount:v,activeChainId:x}=(0,i.v)(),{t:f}=(0,n.Bd)(),{validators:w,isAllRecordsFetched:T}=(0,o.d)(),{data:E,isLoading:S}=(0,m.K)(null==p?void 0:p.api),b=w.map(e=>e.index).filter(Boolean),g=!!b.length,y=(0,l.A)(new Date,w.reduce((e,a)=>{let t=a.activatedAt?new Date(a.activatedAt):void 0;return t&&e.getTime()>t.getTime()?t:e},new Date)),{data:D,isLoading:A,isRefetching:I,error:O}=(0,d.useQuery)(["dailyRewards",v,b,x,a,E,t],()=>{if(!E||!(null==p?void 0:p.api))return null;let{startDate:e,endDate:l}=(0,u.rd)(a,E,"all"===t?y:t);return c.y.getDailyRewards(p.api,b,e,l)},{refetchOnMount:!0,enabled:g&&!!(null==p?void 0:p.api)&&!!E&&(1!==x||T)});return{dailyRewards:(null==D?void 0:D.results)||[],totalItems:(null==D?void 0:D.totalItems)||null,isLoading:g&&(A||S),isRefetching:I,error:O&&(0,s.u1)(O,f)}}}}]);