"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1409],{2348:(e,t,a)=>{a.d(t,{l:()=>n});let n=[{icon:"twitter",url:"https://twitter.com/stakefish",title:"Twitter"},{icon:"telegram",url:"https://t.me/stakefish",title:"Telegram"},{icon:"youTube",url:"https://www.youtube.com/c/stakefish",title:"YouTube"},{icon:"medium",url:"https://medium.com/stakefish",title:"Medium"},{icon:"instagram",url:"https://instagram.com/stakedotfish",title:"Instagram"},{icon:"linkedIn",url:"https://www.linkedin.com/company/stakefish",title:"LinkedIn"},{icon:"reddit",url:"https://www.reddit.com/r/stakefish",title:"Reddit"}]},3249:(e,t,a)=>{a.d(t,{D:()=>i});var n=a(6029),l=a(56191),s=a(4754),r=a(47165);let i=e=>{let{connectionStage:t}=(0,s.v)(),a=(0,r.o)();if(null===a)return null;let{title:i,toggleStakeDialog:o}=a;return(0,n.jsx)(l.$n,{application:!0,size:"sm",color:"brand",disabled:"readonly"===t,onClick:()=>o(!0),...e,children:i})}},7588:(e,t,a)=>{a.d(t,{C:()=>m,L:()=>p});var n=a(55729),l=a(73763),s=a.n(l),r=a(81278),i=a(14187),o=a(63226),d=a(38714),c=a(87903),u=a(4754);let m=()=>{let{isLoading:e}=(0,c.a)();return{rendererState:e?"loadingView":"defaultView"}},p=()=>{let{t:e}=(0,i.Bd)(),{addNewToast:t}=(0,d.Y)(),{activeAccount:a,errorMessage:l,activeChainId:r}=(0,u.v)();x(),(0,n.useEffect)(()=>{if(a){var e;s().identify(a,{name:a,chainName:null!=(e=o.Bt[r||o.cG])?e:""})}},[a]),(0,n.useEffect)(()=>{l&&(null==l?void 0:l.key)!=="WALLET_WRONG_CHAIN"&&t({type:"error",title:(null==l?void 0:l.title)||e("application.KEYS.ERROR_WALLET_CONNECTION"),description:null==l?void 0:l.subtitle})},[l,t])},x=()=>{let e=(0,r.useRouter)(),t=()=>{window.location.pathname!==e.pathname&&e.replace(window.location.pathname)};(0,n.useEffect)(()=>(window.addEventListener("popstate",t),()=>{window.removeEventListener("popstate",t)}),[])}},16023:(e,t,a)=>{a.d(t,{c:()=>h,V:()=>g});var n=a(63904),l=a(49633),s=a(79956),r=a(32052),i=a(4754),o=a(63226);let d=e=>{let{provider:t}=(0,i.v)();return(0,l.useQuery)(["isContract",e],async()=>{if(e&&t)return o.Wp.isContractAddress(t,e)},{enabled:!!e&&!!t})};var c=a(14902),u=a(14187);let m=(e,t)=>[e,...Object.values(t).filter(Boolean)],p=async e=>{var t;let{activeAccount:a,withdrawalAddress:n,serviceURL:l,isContract:r}=e;if(!a||!l)return;let i=await s.j.verifyWithdrawalCredentials(a,n,l);return{addressType:(null==i?void 0:i.type)&&x(i.type,r),owner:null==i||null==(t=i.metadata)?void 0:t.podOwner,showWarning:null==i?void 0:i.warning,address:n}},x=(e,t)=>{let a=f(e);return t&&"external"===a?"contract":a},f=e=>{switch(e){case"depositor_withdrawal_mismatch":return"external";case"eigen_pod_owner_depositor_match":case"eigen_pod_owner_depositor_mismatch":return"eigenpod";default:return"standard"}},h=e=>{let{address:t,pubkey:a,enabled:s=!0}=e,{url:o}=(0,r.XX)(),{activeAccount:x}=(0,i.v)(),{data:f,isLoading:h}=d((0,c.wf)(t)),{t:g}=(0,u.Bd)(),{data:v,isLoading:b,refetch:N,error:E}=(0,l.useQuery)(m("verifyWithdrawalAddress",{activeAccount:x,pubkey:a,address:t,isContract:f,apiUrl:null==o?void 0:o.api}),async()=>{if(x&&(null==o?void 0:o.api)&&t)return await p({activeAccount:x,isContract:f,serviceURL:o.api,withdrawalAddress:t})},{enabled:!!(null==o?void 0:o.api)&&!!x&&!!t&&s&&void 0!==f});return{verifiedAddress:v,isLoading:h||b,refetch:N,error:E?"Withdrawal credentials error: ".concat((0,n.u1)(E,g).subtitle):null}},g=()=>{let{t:e}=(0,u.Bd)(),{activeAccount:t}=(0,i.v)(),{provider:a}=(0,i.v)(),{mutateAsync:s,isLoading:r,error:d}=(0,l.useMutation)({mutationFn:async e=>{let{address:n,serviceURL:l}=e;if(!l||!n)return null;let s=await o.Wp.isContractAddress(a,(0,c.wf)(n));return await p({activeAccount:t,withdrawalAddress:n,serviceURL:l,isContract:s})}});return{verifyAddress:s,isLoading:r,error:d&&(0,n.u1)(d,e)}}},17121:(e,t,a)=>{a.d(t,{M:()=>i,n:()=>o});var n=a(55729),l=a(17648),s=a.n(l),r=a(81278);let i=e=>{let{queryKey:t,queryKeyVariants:a,activeTab:l,setActiveTab:s}=e,i=(0,r.useRouter)(),d=i.query[t];return(0,n.useEffect)(()=>{if(i.isReady&&1){if(o(d,a))return void i.replace({pathname:i.pathname,query:{...i.query,[t]:l}},void 0,{shallow:!0});d&&s(d)}},[]),{activeTab:l,setActiveTab:s,onTabChange:(0,n.useCallback)(e=>{i.replace({pathname:i.pathname,query:{...i.query,[t]:e}},void 0,{shallow:!0})},[i.query])}},o=(e,t)=>!(!e||0===e.length)&&!(null==t?void 0:t.some(t=>s()(t)===s()(e)))},17659:(e,t,a)=>{a.d(t,{Q:()=>o});var n=a(6029),l=a(82203),s=a.n(l),r=a(14187),i=a(56191);let o=e=>{let{title:t,subtitle:a,cta:l}=e,{t:o}=(0,r.Bd)();return(0,n.jsx)(i.Vz,{title:null!=t?t:o("common.KEYS.ERROR_GENERAL_TITLE"),subtitle:a,cta:l,hint:(0,n.jsxs)("div",{className:"font-semibold text-callout",children:[(0,n.jsx)("span",{className:"text-itemSecondaryDefault",children:o("common.CONTACT_PROMPT.QUESTIONS")})," ",(0,n.jsx)(s(),{href:"/contact",className:"inline-block underline underline-offset-1 hover:no-underline",children:o("common.CONTACT_PROMPT.ACTION")})]})})}},19012:(e,t,a)=>{a.d(t,{i:()=>n});let n=["validators","claimHistory","dailyRewards","restaking"]},22174:(e,t,a)=>{a.d(t,{x:()=>r});var n=a(6029),l=a(56191),s=a(39635);let r=e=>{let{className:t,children:a}=e;return(0,n.jsxs)(l.a_,{className:t,children:[(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(s.m,{size:"tuna"})}),a]})}},22864:(e,t,a)=>{a.d(t,{Bx:()=>r,bI:()=>o,g$:()=>s});var n=a(82203),l=a.n(n);let s=e=>{let t=i(e);return"https://".concat(t,"etherscan.io")},r=e=>{let t=i(e);return"https://".concat(t,"beaconcha.in")},i=e=>void 0===e||"Mainnet"===e?"":"".concat(e.toLowerCase(),"."),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!t&&(null==e?void 0:e.includes("http"))?{as:"a",target:"_blank",rel:"noopener noreferrer"}:{as:l()}}},25239:(e,t,a)=>{a.d(t,{O:()=>r});var n=a(63226),l=a(49633),s=a(4754);function r(){let{eigenpodManager:e,eigenpodDelegationManager:t}=n.Wp.useSfContracts(),{provider:a}=(0,s.v)(),{mutateAsync:r}=(0,l.useMutation)({mutationFn:async()=>e?await e.createPod():null}),{mutateAsync:i}=(0,l.useMutation)({mutationFn:async t=>{let{address:a}=t;return e?await e.getPod(a):null}}),{mutateAsync:o}=(0,l.useMutation)({mutationFn:async t=>{let{address:a}=t;return e?await e.hasPod(a):null}}),{mutateAsync:d}=(0,l.useMutation)({mutationFn:async e=>{let{address:a}=e;return t?await t.delegatedTo(a):null}}),{mutateAsync:c}=(0,l.useMutation)({mutationFn:async e=>{let{operator:n,approverSignatureAndExpiry:l,approverSalt:s}=e;return t&&a?await t.delegateTo(n,l,s):null}}),{mutateAsync:u}=(0,l.useMutation)({mutationFn:async e=>{let{address:n}=e;return t&&a?await t.undelegate(n):null}}),{mutateAsync:m}=(0,l.useMutation)({mutationFn:async e=>t&&a?await t.queueWithdrawals([e]):null}),{mutateAsync:p}=(0,l.useMutation)({mutationFn:async e=>{let{withdrawals:n,tokens:l,middlewareTimesIndexes:s,receiveAsTokens:r}=e;return t&&a?await t.completeQueuedWithdrawals(n,l,s,r):null}});return{createPod:r,getPod:i,hasPod:o,delegatedTo:d,delegateTo:c,undelegate:u,queueWithdrawal:m,completeQueuedWithdrawals:p,parseDelegationManagerLog:null==t?void 0:t.interface.parseLog}}},27160:(e,t,a)=>{a.d(t,{u:()=>i});var n=a(6029),l=a(14187),s=a(56191),r=a(4754);let i=e=>{let{className:t,onClick:a,...i}=e,{t:o}=(0,l.Bd)(),{openModal:d,connectionStage:c}=(0,r.v)(),u="unsupportedConnected"===c;return(0,n.jsx)(s.$n,{application:!0,size:"md",className:(0,s.cx)("tracking-normal flounder:px-8",t),variant:u?"primary":"outline",color:u?"brand":"primary",...i,onClick:async e=>{await (null==d?void 0:d()),null==a||a(e)},children:o(u?"common.WEB3.SWITCH_NETWORK_PROMPT":"common.WEB3.CONNECT_WALLET_PROMPT")})}},28297:(e,t,a)=>{a.d(t,{B:()=>i});var n=a(55729),l=a(81278);let s=["0x8589427373d6d84e98730d7795d8f6f8731fda16","0x722122df12d4e14e13ac3b6895a86e84145b6967","0xdd4c48c0b24039969fc16d1cdf626eab821d3384","0xd90e2f925da726b50c4ed8d0fb90ad053324f31b","0xd96f2b1c14db8458374d9aca76e26c3d18364307","0x4736dcf1b7a3d580672cce6e7c65cd5cc9cfba9d","0xd4b88df4d29f5cedd6857912842cff3b20c8cfa3","0x910cbd523d972eb0a6f4cae4618ad62622b39dbf","0xa160cdab225685da1d56aa342ad8841c3b53f291","0xfd8610d20aa15b7b2e3be39b396a1bc3516c7144","0xf60dd140cff0706bae9cd734ac3ae76ad9ebc32a","0x22aaa7720ddd5388a3c0a3333430953c68f1849b","0xba214c1c1928a32bffe790263e38b4af9bfcd659","0xb1c8094b234dce6e03f10a5b673c1d8c69739a00","0x527653ea119f3e6a1f5bd18fbf4714081d7b31ce","0x58e8dcc13be9780fc42e8723d8ead4cf46943df2","0xd691f27f38b395864ea86cfc7253969b409c362d","0xaeaac358560e11f52454d997aaff2c5731b6f8a6","0x1356c899d8c9467c7f71c195612f8a395abf2f0a","0xa60c772958a3ed56c1f15dd055ba37ac8e523a0d","0x169ad27a470d064dede56a2d3ff727986b15d52b","0x0836222f2b2b24a3f36f98668ed8f0b38d1a872f","0xf67721a2d8f736e75a49fdd7fad2e31d8676542a","0x9ad122c22b14202b4490edaf288fdb3c7cb3ff5e","0x905b63fff465b9ffbf41dea908ceb12478ec7601","0x07687e702b410fa43f4cb4af7fa097918ffd2730","0x94a1b5cdb22c43faab4abeb5c74999895464ddaf","0xb541fc07bc7619fd4062a54d96268525cbc6ffef","0x12d66f87a04a9e220743712ce6d9bb1b5616b8fc","0x47ce0c6ed5b0ce3d3a51fdb1c52dc66a7c3c2936","0x23773e65ed146a459791799d01336db287f25334","0xd21be7248e0197ee08e0c20d4a96debdac3d20af","0x610b717796ad172b316836ac95a2ffad065ceab4","0x178169b423a011fff22b9e3f3abea13414ddd0f1","0xbb93e510bbcd0b7beb5a853875f9ec60275cf498","0x2717c5e28cf931547b621a5dddb772ab6a35b701","0x03893a7c7463ae47d46bc7f091665f1893656003","0xca0840578f57fe71599d29375e16783424023357","0x58e8dcc13be9780fc42e8723d8ead4cf46943df2","0x8589427373d6d84e98730d7795d8f6f8731fda16","0x722122df12d4e14e13ac3b6895a86e84145b6967","0xdd4c48c0b24039969fc16d1cdf626eab821d3384","0xd90e2f925da726b50c4ed8d0fb90ad053324f31b","0xd96f2b1c14db8458374d9aca76e26c3d18364307","0x4736dcf1b7a3d580672cce6e7c65cd5cc9cfba9d"];var r=a(4754);let i=()=>{let{activeAccount:e}=(0,r.v)(),t=(0,l.useRouter)();(0,n.useEffect)(()=>{if(e&&s.some(t=>t.toLowerCase()===e.toLowerCase()))return void t.push("/451")},[e])}},30755:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(76500),l=a(55729),s=a(14187),r=a(49633),i=a(63904),o=a(89138),d=a(4754);let c=e=>{let{t}=(0,s.Bd)(),{activeAccount:a,activeChainId:c,connectionStage:u,provider:m}=(0,d.v)(),{accountTxs:p,pendingTxs:x}=(0,o.F)(),{data:f,isLoading:h,error:g,refetch:v}=(0,r.useQuery)(["addressBalance",e,c,u,a],async()=>a&&m&&await m.getBalance(e||a)||null,{refetchOnMount:!0,refetchInterval:1e4}),b=f&&n.formatEther(f);return(0,l.useEffect)(()=>{v()},[null==x?void 0:x.length,null==p?void 0:p.length]),{balanceInWei:h||g?null:f,balanceInEther:h||g?null:b,isLoading:h,error:g&&(0,i.u1)(g,t)}}},32052:(e,t,a)=>{a.d(t,{XX:()=>c,qB:()=>u});var n=a(6029),l=a(55729),s=a(63226),r=a(22864),i=a(4754);let o={1:{url:{safeTx:"https://safe-client.safe.global/v1/chains/1",api:"https://api.stake.fish",eigenLayerExplorer:"https://api.eigenexplorer.com",eigenLayerApp:"https://app.eigenlayer.xyz",rpc:"https://damp-small-season.quiknode.pro/db7c390c46dae93cfd2095fb8f0edffa99de5004"},contract:{feePool:"0xfFEE087852cb4898e6c3532E776e68BC68b1143B",nftManager:"0xFFff2d93C83D4c613ed68CA887f057651135e089",nftValidatorFactory:"0x8862d8DaB077D529Ca3F976B6518bE3862207372",batchDeposit:"0x0194512e77d798e4871973d9cb9d7ddfc0ffd801",batchDepositV2:"0xaD1D64a4e6a93B79581A8a0AA5816b6E4552b8Bd",beaconDeposit:"0x00000000219ab540356cBB839Cbe05303d7705Fa",balanceCheckerAddress:"0xb1f8e55c7f64d203c1400b9d8555d050f94adf39",eigenpodManager:"0x91E677b07F7AF907ec9a428aafA9fc14a0d3A338",eigenpodDelegationManager:"0x39053D51B77DC0d36036Fc1fCc8Cb819df8Ef37A",eigenLayerRewardsCoordinator:"0x7750d328b314EfFa365A0402CcfD489B80B0adda",eigenLayerAvsOperator:"0xa026265a0f01a6e1a19b04655519429df0a57c4e"}},560048:{url:{safeTx:"https://gateway.safe.protofire.io/v1/chains/560048",api:"https://api.hoodi.stake.fish",eigenLayerExplorer:"https://api-holesky.eigenexplorer.com",eigenLayerApp:"https://holesky.eigenlayer.xyz",rpc:"https://empty-necessary-leaf.ethereum-hoodi.quiknode.pro/ea85f10f7ac19d56545a5c2800bd0a93fe212aaf"},contract:{feePool:"0xB7283db8e33769011154243e77FD536D23ed2deB",nftManager:"0x958f1D3E202CA7E6E6AC7EFE1AB99F80237E9a32",nftValidatorFactory:"0x59625d55020A9560B3A804D39D696cE8937abBa5",batchDeposit:"0xAa41b40908dEa0430461Aa946993F15C891268e2",batchDepositV2:"0x3b56fbba5a13c40cb9036b507544516aee09b5ec",beaconDeposit:"0x00000000219ab540356cBB839Cbe05303d7705Fa",balanceCheckerAddress:"0xf819b386B2C66664350364fBAB5E8A0488DE408d",eigenpodManager:"0x30770d7E3e71112d7A6b7259542D1f680a70e315",eigenpodDelegationManager:"0xA44151489861Fe9e3055d95adC98FbD462B948e7",eigenLayerRewardsCoordinator:"0xAcc1fb458a1317E886dB376Fc8141540537E68fE",eigenLayerAvsOperator:"0x4Ba17B86AA6D6988592165C422CBb927A3be2398"}}},d=(0,l.createContext)({}),c=()=>(0,l.useContext)(d),u=e=>{let{children:t}=e,{activeChainId:a}=(0,i.v)(),[c,u]=(0,l.useState)({url:void 0,contract:void 0});(0,l.useEffect)(()=>{a&&u(o[a])},[a]);let m=(0,l.useMemo)(()=>({contract:c.contract,url:c.url?{api:c.url.api,rpc:c.url.rpc,eigenLayerExplorer:c.url.eigenLayerExplorer,eigenLayerApp:c.url.eigenLayerApp,etherScan:a?(0,r.g$)(s.Bt[a]):void 0,beaconChain:a?(0,r.Bx)(s.Bt[a]):void 0,safeTx:c.url.safeTx}:void 0}),[c,a]);return(0,n.jsx)(d,{value:m,children:t})}},32535:(e,t,a)=>{a.d(t,{t:()=>i});var n=a(49633),l=a(32052),s=a(4754),r=a(79956);let i=()=>{let{connectionStage:e}=(0,s.v)(),{url:t}=(0,l.XX)(),a="connected"===e,{data:i,isLoading:o,error:d}=(0,n.useQuery)(["stakingCapacity",null==t?void 0:t.api],()=>{if(a&&(null==t?void 0:t.api))return r.j.getRemainingKeys(t.api)},{refetchOnMount:"always",refetchInterval:6e4,enabled:!!(null==t?void 0:t.api)});return{stakingCapacity:i,isLoading:o,error:d}}},35394:(e,t,a)=>{a.d(t,{o:()=>E,m:()=>y});var n=a(72864),l=a(44564),s=a(46334),r=a(11058),i=a(99027),o=a(22900),d=a(91752);let c=(e,t)=>({filterValues:{stakeType:i.l,validatorStatus:o.Ml.filter(e=>"Withdrawn"!==e),credentialsType:d.PW},getCheckedValues:(e,a)=>{var n;return null==(n=t().filterValues[e])?void 0:n.includes(a)},onFilterValuesChange:(t,a)=>{e(e=>{var n;(null==(n=e.filterValues[t])?void 0:n.includes(a))?e.filterValues[t]=e.filterValues[t].filter(e=>e!==a):e.filterValues[t]=[...e.filterValues[t],a]})}});var u=a(14902);let m={nft:[],nonNft:[],withdrawnUncollected:[]},p=e=>({selectedValidators:m,showSelectionUtils:!1,allSelectedValidators:[],clearSelection:()=>e(e=>{e.showSelectionUtils=!1,e.selectedValidators=m,e.allSelectedValidators=[]}),updateSelectedValidators:t=>e(e=>{e.selectedValidators={nft:[],nonNft:t,withdrawnUncollected:[]},e.allSelectedValidators=t,e.showSelectionUtils=t.length>0}),onSelectionChange:(t,a,n)=>e(e=>{let l=(t,a)=>{var n;return(null==(n=e.selectedValidators[t])?void 0:n.includes(a))?e.selectedValidators[t].filter(e=>e!==a):[...e.selectedValidators[t],a]};e.selectedValidators={nft:a&&!n?l("nft",t):e.selectedValidators.nft,nonNft:a||n?e.selectedValidators.nonNft:l("nonNft",t),withdrawnUncollected:n&&a?l("withdrawnUncollected",t):e.selectedValidators.withdrawnUncollected},e.allSelectedValidators=[...e.selectedValidators.nft,...e.selectedValidators.nonNft,...e.selectedValidators.withdrawnUncollected],e.showSelectionUtils=e.allSelectedValidators.length>0}),getGroupSelection:(t,a)=>e(e=>{e.showSelectionUtils=!!a,t||(e.selectedValidators=m),e.selectedValidators=x(t,a),e.allSelectedValidators=[...e.selectedValidators.nft,...e.selectedValidators.nonNft,...e.selectedValidators.withdrawnUncollected]})}),x=(e,t)=>{let a=e=>o.Ml.filter(e=>"Active"!==e).includes(e),n=(e,t)=>"Withdrawn"===e&&t;if(!e)return m;switch(t){case"nft":return{nft:e.filter(e=>e.nft&&!a(e.Status)).map(e=>e.index),nonNft:[],withdrawnUncollected:e.filter(e=>n(e.Status,e.isNFTWithdrawnUncollected)).map(e=>e.index)};case"classic":return{nft:[],nonNft:e.filter(e=>!e.nft&&!a(e.Status)&&(0,u.f1)(e.withdrawalCredentials)).map(e=>e.index),withdrawnUncollected:[]};default:return m}},f=[],h=e=>({selectedTokens:f,clearTokensSelection:()=>e(e=>{e.selectedTokens=f}),selectAllTokens:t=>e(e=>{e.selectedTokens=t}),onTokenSelectionChange:t=>e(e=>{let a=e.selectedTokens.includes(t)?e.selectedTokens.filter(e=>e!==t):[...e.selectedTokens,t];return{...e,selectedTokens:a}})}),g=e=>({validatorsCount:null,setValidatorsCount:t=>e(e=>{e.validatorsCount=t})});var v=a(19012);let b=e=>({tabs:{dashboardTabs:v.i[0],stakingDepositTabs:"gui",dailyRewardsTabs:"dailyRewards"},toggleTabs:(t,a)=>e(e=>({...e,tabs:{...e.tabs,[t]:a}}))}),N=e=>({pendingOperations:{type:null,pending:!1,completable:!1},setPendingOperations:t=>e(e=>{e.pendingOperations=t})}),E=(0,r.h)()((0,l.D)(function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return{...c(...t),...p(...t),...h(...t),...b(...t)}}),n.x),y=(0,r.h)()((0,s.Zr)((0,l.D)(function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return{...g(...t),...N(...t)}}),{name:"stakefish-store"}),n.x)},38441:(e,t,a)=>{a.d(t,{i:()=>r});var n=a(55729),l=a(59278),s=a(63226);let r=()=>{let{theme:e,resolvedTheme:t,setTheme:a}=(0,l.D)(),[r,i]=(0,n.useState)(),[o,d]=(0,n.useState)(),{setThemeMode:c}=(0,s.YG)(),u=(0,n.useCallback)(()=>{let e="light"===t?"dark":"light";a(e),null==c||c(e),document.documentElement.classList.add("disable-hover");let n=setTimeout(()=>document.documentElement.classList.remove("disable-hover"),300);return()=>clearTimeout(n)},[t,a]);return(0,n.useEffect)(()=>{i("light"===t),d("dark"===t),t&&(null==c||c(t))},[t]),{theme:e,isLightTheme:r,isDarkTheme:o,toggleTheme:u,setTheme:a}}},38714:(e,t,a)=>{a.d(t,{Y:()=>o,k:()=>d});var n=a(6029),l=a(56191),s=a(55729),r=a(22864);let i=(0,s.createContext)({}),o=()=>(0,s.useContext)(i),d=e=>{let[t,a]=(0,s.useState)([]),o=(0,s.useCallback)(e=>{let t={...e,id:new Date().toISOString(),open:!0};a(e=>[...e,t])},[]),d=e=>{a(t=>t.map(t=>e.id!==t.id?t:{...t,open:!1})),setTimeout(()=>{a(e=>e.filter(e=>e.open))},2e3)},u=e=>e.transaction?{altText:e.transaction.linkLabel,component:(0,n.jsx)(l.$n,{application:!0,href:e.transaction.link,size:"sm",color:"inverse",className:"!p-0 !text-neutral90 !bg-transparent normal-case",endIcon:{iconKey:"share",className:"p-0 !mr-0",size:14},...(0,r.bI)(e.transaction.link),children:e.transaction.linkLabel})}:e.action;return(0,n.jsxs)(i.Provider,{value:{addNewToast:o},children:[e.children,(0,n.jsx)(l.y8.t,{children:t.map(e=>{let t=u(e);return(0,n.jsx)(l.y8.q,{title:e.title,description:e.description,duration:e.duration,action:t,iconProps:e.iconProps||c[e.type],open:e.open,className:"w-full",onOpenChange:t=>{!1===t&&d(e)}},e.id)})})]})},c={success:{iconKey:"roundCheck",size:12,className:"text-brandDefault"},error:{iconKey:"alertFilled",size:12,className:"text-itemErrorDefault"}}},39273:(e,t,a)=>{a.d(t,{AE:()=>r,nE:()=>d,uv:()=>i,z7:()=>s});var n=a(43943),l=a(49974);let s=(e,t)=>{if(!(e<l.rl)&&!(e>t))return e},r=(e,t)=>{if(n.F){n.N.track("Staked",{validatorsNumber:e,stakeSource:t});try{_paq.push(["trackEvent","Conversion","Staked",o[t],e])}catch(e){console.error(e)}}},i=(e,t)=>{if(n.F){n.N.track("TopUp",{pubkey:e,amount:t});try{_paq.push(["trackEvent","Conversion","TopUp",e,t])}catch(e){console.error(e)}}},o={widgetRow:"footer",dialog:"modal",page:"first-time"},d=["Backspace","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Delete","Meta","Control","Shift","Tab","Alt","Escape"]},39635:(e,t,a)=>{a.d(t,{m:()=>i});var n=a(6029),l=a(56191),s=a(8588),r=a.n(s);let i=e=>{let{size:t}=e;return(0,n.jsx)(l.mP,{size:t,className:"-my-0.5",customIcon:(0,n.jsx)(r(),{src:"/spinner.gif",alt:"Loading",width:32,unoptimized:!0,height:32,className:"object-contain object-center size-full"})})}},43463:(e,t,a)=>{a.d(t,{d:()=>s});var n=a(6029),l=a(56191);let s=e=>{let{type:t,title:a,subtitle:s,dangerousSubtitle:r,errorMessage:i,onSubmit:o,buttonTitle:d}=e,c={pending:(0,n.jsx)(l.mP,{className:"clear-inline-indents"}),submitted:(0,n.jsx)(l.In,{iconKey:"checkCircleFilled",size:16,className:"text-brandDefault"}),error:(0,n.jsx)(l.In,{iconKey:"warning",size:16,className:"text-itemErrorDefault"})},u="error"===t,m=s&&!i,p=r&&"string"==typeof s,x=(0,l.cx)("font-semibold text-callout",p&&"[&_span]:text-itemSecondaryActive",u?"text-itemErrorDefault":"text-itemSecondaryDefault");return(0,n.jsxs)(l.az,{flex:!0,justifyContent:"center",textAlign:"center",flow:"column",className:"min-h-[74px]",children:[(0,n.jsx)(l.az,{flex:!0,alignItems:"center",justifyContent:"center",className:"mx-auto mb-2 size-5",children:c[t]}),(0,n.jsxs)(l.az,{className:"space-y-2",children:[(0,n.jsx)("h5",{className:"text-h5 text-balance mx-auto max-w-[340px]",children:a}),i&&(0,n.jsx)("p",{className:(0,l.cx)("text-callout font-semibold max-w-[340px]",u?"text-itemErrorDefault":"text-itemSecondaryDefault"),children:i}),m&&p&&(0,n.jsx)("div",{className:(0,l.cx)("text-withLink",x),dangerouslySetInnerHTML:{__html:s}}),m&&!p&&(0,n.jsx)("p",{className:x,children:s})]}),o&&(0,n.jsx)(l.$n,{application:!0,onClick:o,type:"submit",color:"secondary",size:"lg",className:"w-full mt-6",children:d})]})}},44327:(e,t,a)=>{a.d(t,{P:()=>r,z:()=>s});var n=a(49633),l=a(55729);let s=7e3;function r(e){let t=(0,n.useInfiniteQuery)({...e,getNextPageParam:(e,t)=>{let a=t.reduce((e,t)=>e+t.results.length,0);if((null==e?void 0:e.totalItems)>a)return{limit:s,offset:a}}});return(0,l.useEffect)(()=>{t.isLoading||t.isFetchingNextPage||!t.hasNextPage||t.fetchNextPage({cancelRefetch:!1})},[t.isLoading,t.hasNextPage,t.isFetchingNextPage]),t}},45537:(e,t,a)=>{a.d(t,{G:()=>i});var n=a(6029),l=a(55729),s=a(56191),r=a(38441);let i=e=>{let{variant:t="short",buttonProps:a}=e,[i,d]=(0,l.useState)(!1),{theme:c,toggleTheme:u,setTheme:m}=(0,r.i)();return((0,l.useEffect)(()=>d(!0),[]),i)?"short"===t?(0,n.jsx)(s.$n,{size:"sm",color:"transparent",icon:{iconKey:"light"===c?"moon":"sun",size:16},onClick:u,...a}):(0,n.jsx)("div",{className:"flex pl-6 items-center absolute inset-0 w-[224px] mx-auto h-full",children:o.map((e,t)=>(0,n.jsx)(s.$n,{size:"sm",color:"light"===e.value?"primary":"secondary",startIcon:{iconKey:"light"===e.value?"sun":"moon",size:16},onClick:()=>m(e.value),className:"justify-center w-full !tracking-normal normal-case",children:e.title},t))}):null},o=[{value:"light",title:"Light"},{value:"dark",title:"Dark"}]},47165:(e,t,a)=>{a.d(t,{o:()=>i});var n=a(14187),l=a(35394),s=a(51743),r=a(96741);let i=()=>{let{t:e}=(0,n.Bd)(),{isMaintenanceMode:t}=(0,r._)(),a=(0,l.m)(e=>e.validatorsCount),{onOpenChange:i}=(0,s.E)();return t?null:{title:e(0!==a&&null!==a?"common.KEYS.STAKE_MORE":"common.KEYS.STAKE_NOW"),toggleStakeDialog:i}}},47468:(e,t,a)=>{a.d(t,{M:()=>n,d:()=>l});let n=e=>{let t=localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch(e){return}},l=(e,t)=>localStorage.setItem(e,JSON.stringify(t))},49974:(e,t,a)=>{a.d(t,{$q:()=>T,BT:()=>E,Fn:()=>m,Nf:()=>N,RL:()=>s,TX:()=>x,Tw:()=>u,Yj:()=>g,bS:()=>v,gO:()=>p,hj:()=>r,i3:()=>f,iX:()=>h,lM:()=>b,m3:()=>i,n2:()=>o,pt:()=>y,rl:()=>d,yQ:()=>c});var n=a(21505),l=a(63226);let s=32,r=1,i=32,o=1,d=0,c=100,u=1920,m=n.gH.from(l.Wp.formatEtherToWei(u.toString())),p=s*c,x=u*c,f=e=>!!String(e).match(/^\d+$/),h=e=>e&&0!==e?Math.floor(e):0,g=e=>e&&0!==e?Math.min(Math.ceil(e/u),c):0,v=e=>e%o==0,b=e=>!e||v(e)?e:h(e),N=function(e){var t;let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return void 0===e||e<=o&&!a?0:null!=(t=b(e+(a?o:-o)))?t:0},E=e=>{if(void 0===e||""===e)return!1;let[t,a]=String(e).split(".");if(String(e).includes(".")&&(!t||!a)||a&&a.length>18)return!1;try{let t=Number(e);return!Number.isNaN(t)&&t>=0}catch(e){return console.error(e),!1}},y=(e,t)=>{if(void 0===e||void 0===t||Number.isNaN(Number(e))||Number.isNaN(t)||0>=Number(e)||t<=0)return[];try{let a=n.gH.from(l.Wp.formatEtherToWei(e)),s=Math.max(1,t),r=a.div(n.gH.from(s));return Array.from({length:s},()=>r)}catch(e){return console.error("Error creating stake amounts array:",e),[]}},T=e=>e.reduce((e,t)=>e.add(n.gH.from(l.Wp.formatEtherToWei(t))),n.gH.from(0)).toString()},51743:(e,t,a)=>{a.d(t,{E:()=>i});var n=a(59961),l=a(32242),s=a(81278),r=a(55729);function i(){let{pathname:e,query:t,replace:a}=(0,s.useRouter)(),i="babylon"===(0,n.m)(),o=(0,l.s)("stakeWidgetDialog"),d=(0,l.s)("babylonStakeDialog"),{open:c,onOpenChange:u}=i?d:o;return(0,r.useEffect)(()=>{"true"!==t.stake||t.validator||t.address||u(!0)},[t]),{open:c,onOpenChange:n=>{let l=new URLSearchParams(t);u(n),n?l.get("stake")||l.append("stake","true"):(l.get("stake")&&l.delete("stake"),l.get("type")&&l.delete("type")),a({pathname:e,query:l.toString()},void 0,{shallow:!0})}}}},53487:(e,t,a)=>{a.d(t,{f:()=>r,x:()=>i});var n=a(6029),l=a(55729),s=a(56191);let r=e=>{let{items:t,isError:a}=e;return(0,n.jsx)("div",{className:"mr-1",children:(0,n.jsx)("ul",{className:"mb-6 pl-5 space-y-2.5 list-outside list-disc",children:t.map((e,t)=>(0,n.jsx)("li",{children:(0,n.jsxs)(s.az,{flex:!0,className:"gap-2",children:[(0,n.jsx)(o,{children:e.text}),(0,n.jsx)(s.m_,{triggerProps:{className:"z-10 leading-normal mt-0.5 flex items-center"},className:"[&_ul]:list-inside [&_ul]:mt-1 font-mono",content:a&&0===t?e.warningHint:e.hint,dangerousContent:!0,children:a&&0===t?(0,n.jsx)(s.$n,{icon:{iconKey:"warning",size:14},color:"secondary",className:"!p-0",as:"span"}):(0,n.jsx)(s.$n,{icon:{iconKey:"infoCircleFilled",size:14},color:"secondary",className:"!p-0",as:"span"})})]})},t))})})},i=e=>{let{items:t,checkbox:a,handleCheckChange:r}=e,i=(0,l.useRef)(null),[d,c]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{r(d)},[d]),(0,n.jsxs)("div",{className:"mr-1",ref:i,children:[(0,n.jsx)("ul",{className:"mb-6 pl-5 space-y-2.5 list-outside list-disc",children:t.map((e,t)=>(0,n.jsx)("li",{children:(0,n.jsx)(o,{children:e})},t))}),a&&(0,n.jsx)(s.Sc,{id:"stake-tos",wrapperClassName:"items-start",onCheckedChange:()=>{var e;c(!!(null==(e=i.current)?void 0:e.querySelectorAll('button[role="checkbox"][data-state="checked"]').length))},"data-testid":"ts-confirmation-checkbox",children:(0,n.jsx)("label",{htmlFor:"stake-tos",dangerouslySetInnerHTML:{__html:a},className:"mt-[-3px] !font-sans text-callout text-withLink [&_a]:underline-offset-1 [&_a]:font-medium cursor-pointer"})})]})},o=e=>{let{children:t}=e;return(0,n.jsx)("span",{className:"font-sans text-callout",children:t})}},53713:(e,t,a)=>{a.d(t,{w:()=>d});var n=a(6029),l=a(14187),s=a(56191),r=a(7477),i=a(2348);let o=new Date().getFullYear(),d=e=>{let{fixed:t,menu:a,simple:d,...c}=e,{t:u}=(0,l.Bd)(),{up:m}=(0,r.P)(),p=null==m?void 0:m.flounder,x=null==m?void 0:m.salmon,f=[{url:"/terms-of-service",title:u("common.KEYS.TERMS_OF_SERVICE")},{url:"/privacy-policy",title:u("common.KEYS.PRIVACY_POLICY")},{url:"/contact",title:u("common.KEYS.CONTACT_US")}];return(0,n.jsx)(s.wi,{simple:d,title:u("common.KEYS.FOOTER_TITLE"),links:f,menu:a,socials:i.l,currentYear:o,fixed:!!p&&t,isMd:!!x,...c})}},56042:(e,t,a)=>{a.d(t,{d:()=>u});var n=a(14187),l=a(63904),s=a(35394),r=a(32052),i=a(44327),o=a(8685),d=a(4754);let c={refetchInterval:13e3,options:void 0},u=function(){let{refetchInterval:e,options:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,{url:a}=(0,r.XX)(),{activeAccount:u}=(0,d.v)(),{t:m}=(0,n.Bd)(),p=(0,s.m)(e=>e.setValidatorsCount),{data:x,isLoading:f,error:h,refetch:g}=(0,i.P)({queryKey:["validators",u,null==a?void 0:a.api],refetchInterval:e||c.refetchInterval,queryFn:e=>{let{pageParam:t={limit:i.z,offset:0}}=e;return o.y.findValidators({address:u,serviceURL:a.api,limit:t.limit,offset:t.offset})},...t||c.options,enabled:(null==t?void 0:t.enabled)!==!1&&!!u&&!!(null==a?void 0:a.api),onError(){p(0)}}),v=(null==x?void 0:x.pages.reduce((e,t)=>[...e,...t.results],[]))||[],b=v.filter(e=>"withdrawal_done"!==e.status).length,N=v.length===(null==x?void 0:x.pages[0].totalItems);return{validators:v,isLoading:f,error:h&&(0,l.u1)(h,m),totalItems:N?b:void 0,isAllRecordsFetched:N,refetch:g}}},56659:(e,t,a)=>{a.d(t,{z:()=>s});var n=a(32),l=a.n(n);let s=async(e,t)=>{let a=await l().get("".concat(t,"/transactions/").concat(e)).catch(()=>null);return a?{isExecuted:"AWAITING_CONFIRMATIONS"!==a.data.txStatus,txHash:a.data.txHash?a.data.txHash:null}:null}},57319:(e,t,a)=>{a.d(t,{v:()=>n});let n=async(e,t,a,n)=>{try{let l=a.getSigner(t);if(!l)throw Error("Failed to get signer");let s=[];for(let t of e){let e=await l.sendTransaction(t);s.push(e)}return n&&n(),s.map(e=>e.hash)}catch(e){throw console.error("sendTransaction error",e),e}}},57972:(e,t,a)=>{a.d(t,{F:()=>o});var n=a(6029),l=a(56191),s=a(27160),r=a(4754),i=a(73548);let o=e=>{let{onPlusClick:t,onMinusClick:a,inputSupportBoxProps:o,children:d,showAction:c=!0,action:u}=e,{connectionStage:m}=(0,r.v)(),p={color:"transparent",size:"sm",type:"button",className:"active:scale-90"};return(0,n.jsxs)("div",{className:"flex flex-col items-start gap-1 flounder:flex-row flounder:gap-4",children:[(0,n.jsxs)("div",{className:"relative w-full grow flounder:w-auto",children:[d,(0,n.jsxs)("div",{className:"absolute top-[14px] right-4 *:transition-transform *:will-change-transform bg-backgroundPrimaryDefault *:!p-1",children:[(0,n.jsx)(l.$n,{icon:{iconKey:"minus"},onClick:a,...p,"data-testid":"minus-button"}),(0,n.jsx)(l.$n,{icon:{iconKey:"plus"},onClick:t,...p,"data-testid":"plus-button"})]})]}),o&&(0,n.jsx)(i.D,{...o}),c&&(0,n.jsx)("div",{className:"h-[54px] w-full flounder:w-auto mt-1 flounder:mt-0 flounder:min-w-[232px]",children:"connected"!==m?(0,n.jsx)(s.u,{size:"lg",type:"button",variant:"primary",disabled:"loading"===m,className:"size-full !text-desktopCallout"}):u})]})}},58387:(e,t,a)=>{a.d(t,{q:()=>r});var n=a(6029),l=a(56191),s=a(87903);let r=()=>{let{apiStatus:e}=(0,s.a)();if(!e||!e.isAnnouncementBannerEnabled||!e.announcement)return null;let t=!!e.announcementCtaLink&&!!e.announcementCtaText;return(0,n.jsx)(l.ib,{wrapperClassName:"translate-y-0 opacity-100",className:"bg-backgroundInverseDefault flounder:min-h-12 salmon:h-12",children:(0,n.jsxs)(l.az,{flex:!0,alignItems:"center",justifyContent:"center",className:"text-center flounder:text-start flex-col gap-1 pt-1 pb-2.5 flounder:flex-row flounder:gap-2 flounder:py-0",children:[(0,n.jsx)("p",{className:"font-sans text-mobileBody4 text-balance",children:e.announcement}),t&&(0,n.jsx)(l.$n,{as:"a",size:"sm",color:"inverse",variant:"text",href:e.announcementCtaLink,endIcon:{iconKey:"arrowRight",size:14},className:"gap-1 underline underline-offset-1",children:e.announcementCtaText})]})})}},61409:(e,t,a)=>{a.d(t,{h:()=>eG,c:()=>eX});var n=a(6029),l=a(14187),s=a(55966),r=a(15086),i=a(64875),o=a(63226),d=a(56191),c=a(53713),u=a(96869),m=a(97880),p=a(89187),x=a(91856),f=a(55729),h=a(32242),g=a(51743),v=a(43463),b=a(53487),N=a(49974),E=a(89138),y=a(30755),T=a(49633),S=a(32052),C=a(4754);let j=()=>{let{contract:e}=(0,S.XX)(),{activeChainId:t,activeAccount:a}=(0,C.v)(),{nftManager:n}=o.Wp.useSfContracts(),{data:l=0,isLoading:s,isError:r}=(0,T.useQuery)(["alreadyStakedNftAmount",a,t],async()=>t&&n&&(null==e?void 0:e.nftManager)?(await n.balanceOf(null==e?void 0:e.nftManager)).toNumber():0,{enabled:!!t&&!!a&&!!n&&!!(null==e?void 0:e.nftManager),refetchOnMount:!0});return{balanceOfNftForAddress:l,isLoading:s,isError:r}},w=()=>{let{contract:e}=(0,S.XX)(),{activeChainId:t}=(0,C.v)(),{nftManager:a}=o.Wp.useSfContracts(),{data:n=1/0,isLoading:l,isError:s}=(0,T.useQuery)(["totalTokenSupply",t],async()=>t&&a&&(null==e?void 0:e.nftManager)?(await a.totalSupply()).toNumber():1/0,{enabled:!!t&&!!a&&!!(null==e?void 0:e.nftManager),refetchOnMount:!0});return{totalTokenSupply:n,isLoading:l,isError:s}};var A=a(32535);let k=()=>{let{t:e}=(0,l.Bd)(),{connectionStage:t}=(0,C.v)(),{balanceInEther:a}=(0,y.A)(),{hasPendingCreatePod:n,hasPendingMints:s,hasPendingClassicStakes:r}=(0,E.F)(),{type:i,modalView:o,input:d,withdrawalCredentials:c}=(0,p.Z)(),{onOpenChange:u}=(0,h.s)("stakeStepDialog"),{stakingCapacity:m}=(0,A.t)(),x=void 0!==d.value&&0!==d.value&&!d.error,g=x&&d.value>Number(a)/N.m3,v=x&&m&&m<d.value||!m,b=!c.disableStakeButton&&x&&!g&&!s&&!r&&!v&&!n,T=e("stake.MODAL_SUBMIT_BUTTON",{amount:Number(d.value)*N.m3}),S=(0,f.useMemo)(()=>g?e("stake.INSUFFICIENT_BALANCE"):r?e("stake.STAKING_STATE"):x?T:e("stake.STANDARD_SUBMIT_BUTTON"),[i,g,s,r,b,o]),j=()=>{u((null==c?void 0:c.showWarning)?"confirmWithdrawalCredentials":"initial")};return{isReadyToSubmit:b,buttonText:S,buttonHandler:j,onFormSubmit:()=>{b&&"connected"===t&&j()}}},I=e=>{let{validatorsNumber:t,type:a}=e,{t:n}=(0,l.Bd)(),{totalTokenSupply:s=1/0,isLoading:r,isError:i}=w(),{balanceOfNftForAddress:o=0,isLoading:d,isError:c}=j(),u=i||c;return{feeSchedule:(0,f.useMemo)(()=>n("stake.FEE_SCHEDULE_CLASSIC",{returnObjects:!0,tipFee:_})||[],[a,u,s,o,t]),isError:u,isLoading:r||d}},_=75,D=e=>{let{onSubmit:t,validatorsNumber:a,type:s}=e,{t:r}=(0,l.Bd)(),[i,o]=(0,f.useState)(!1),{feeSchedule:c,isError:u}=I({validatorsNumber:a,type:s}),m=r("stake.TERMS_OF_SERVICE",{returnObjects:!0});return(0,n.jsxs)("div",{"data-testid":"stake-confirmation-dialog",children:[(0,n.jsxs)(d.az,{className:"mb-6",children:[(0,n.jsx)("h4",{className:"mb-2 font-sans font-bold text-desktopBody4",children:r("stake.FEE_SCHEDULE_TITLE")}),(0,n.jsx)(b.f,{isError:u,items:c}),(0,n.jsx)("h4",{className:"mb-3 font-sans font-bold text-desktopBody4",children:r("stake.TERMS_OF_SERVICE_TITLE")}),(0,n.jsx)(b.x,{items:m,checkbox:r("stake.TERMS_OF_SERVICE_CHECKBOX"),handleCheckChange:o})]}),(0,n.jsx)(d.$n,{application:!0,disabled:!i,onClick:t,type:"submit",color:"brand",size:"lg",className:"w-full !text-desktopCallout","data-testid":"confirm-stake-button",children:r("stake.CONFIRM")})]})};var O=a(99481);let R=e=>{let{showCopyButton:t=!0,address:a,type:l,badge:s,className:r,addressBoxProps:i}=e;return(0,n.jsxs)(d.az,{flex:!0,className:(0,d.cx)("gap-2",r),children:[l&&(0,n.jsx)(O.w,{type:l}),(0,n.jsx)(d.Mz,{address:a,showCopyButton:t,wrapperClassName:"overflow-hidden ml-0 w-auto",...i}),s&&(0,n.jsx)(d.Ex,{children:s})]})};var L=a(14902);let B=e=>{let{onSubmit:t}=e,{t:a}=(0,l.Bd)(),[s,r]=(0,f.useState)(!1),{withdrawalCredentials:i}=(0,p.Z)(),{addressType:o,address:c,showWarning:u,owner:m}=i,x="eigenpod"===o&&u&&m;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h4",{className:"mb-3 font-sans font-semibold text-body4",children:a("stake.CONFIRM_WITHDRAWAL_CREDENTIALS_TITLE")}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(d.az,{children:[(0,n.jsxs)("div",{className:"p-4 mb-3 ring-1 ring-inset ring-itemSecondaryMute",children:[(0,n.jsx)(R,{type:"eigenpod"===o?"EPOD":"ETH1",address:(0,L.wf)(c),badge:o,showCopyButton:!1,addressBoxProps:{className:"font-semibold"}}),x&&(0,n.jsx)(R,{type:"nested",className:"mt-2",address:m,badge:"Owner",showCopyButton:!1,addressBoxProps:{className:"font-semibold"}}),(0,n.jsx)("div",{className:"pl-3 mt-4 [&_ul]:space-y-1 font-sans [&_ul]:list-outside [&_ul]:list-disc text-desktopCallout",dangerouslySetInnerHTML:{__html:a(x?"stake.CONFIRM_WITHDRAWAL_CREDENTIALS_LIST":"stake.CONFIRM_WITHDRAWAL_CREDENTIALS_LIST_EXTERNAL")}})]}),(0,n.jsx)("p",{className:"font-sans text-desktopCallout text-itemSecondaryDefault",children:a("stake.CONFIRM_WITHDRAWAL_CREDENTIALS_HINT")})]}),(0,n.jsx)(d.Sc,{id:"stake-withdrawalCredentials",className:"items-start",checked:s,onCheckedChange:e=>{r(!!e)},label:a(x?"stake.CONFIRM_WITHDRAWAL_CREDENTIALS_CHECKBOX_OWNER":"stake.CONFIRM_WITHDRAWAL_CREDENTIALS_CHECKBOX"),labelProps:{className:"font-sans font-normal text-callout"}}),(0,n.jsx)(d.$n,{application:!0,disabled:!s,onClick:t,type:"submit",color:"brand",size:"lg",className:"w-full !text-desktopCallout",children:a("stake.CONFIRM")})]})]})},P=()=>{var e;let{t}=(0,l.Bd)(),{type:a,form:s,values:r,tx:i,withdrawalCredentials:o}=(0,p.Z)(),{activeTab:c}=a,{onOpenChange:u}=(0,h.s)("walletCapsuleDialog"),{onOpenChange:m}=(0,g.E)(),{open:x,onOpenChange:b}=(0,h.s)("stakeStepDialog"),{walletInfo:N}=(0,C.v)(),E=(null==r?void 0:r.stakeMode)==="topUp",y=null==N||null==(e=N.name)?void 0:e.includes("Safe"),T="initial"===x||"confirmWithdrawalCredentials"===x,S=(null==r?void 0:r.stakeAmount)||0,j=null==s?void 0:s.getValidatorsNumber(),w=null==s?void 0:s.handleSubmit,A=()=>{w&&w(()=>i.onSubmit&&i.onSubmit({stakeType:c}))()},k=(0,f.useMemo)(()=>{var e,a;return{confirmWithdrawalCredentials:(0,n.jsx)(B,{onSubmit:()=>b("initial")}),initial:(0,n.jsx)(D,{onSubmit:()=>A(),validatorsNumber:Number(j),type:c}),txSigning:(0,n.jsx)(v.d,{type:"pending",title:t("application.KEYS.MESSAGE_SIGNING_PENDING_TITLE")}),txPreparing:(0,n.jsx)(v.d,{type:"pending",title:E?t("stake.TX_PREPARING_TRANSACTION_TITLE"):t("stake.TX_PREPARING_TITLE"),subtitle:t("stake.TX_PREPARING_SUBTITLE")}),txPending:(0,n.jsx)(v.d,{type:"pending",title:y?t("common.WEB3.TX_PENDING_SUBTITLE"):t("stake.TX_PENDING_TITLE"),subtitle:""}),txError:(0,n.jsx)(v.d,{type:"error",title:(null==(e=i.error)?void 0:e.title)||t("stake.TX_FAILED_TITLE"),errorMessage:null==(a=i.error)?void 0:a.subtitle,onSubmit:w&&w(()=>i.onSubmit&&i.onSubmit({stakeType:c})),buttonTitle:t("stake.TRY_AGAIN")}),txSubmitted:(0,n.jsx)(v.d,{type:"submitted",title:t("common.WEB3.TX_SUBMITTED_TITLE"),subtitle:t("common.WEB3.TX_PENDING_SUBTITLE"),buttonTitle:t("common.WEB3.VIEW_PROGRESS"),onSubmit:()=>{u(!0),m(!1),b("closed")}}),safeTxSubmitted:(0,n.jsx)(v.d,{type:"submitted",title:t("common.WEB3.TX_SUBMITTED_TITLE"),subtitle:t("common.WEB3.SAFE_TX_PENDING_SUBTITLE"),buttonTitle:t("common.WEB3.DISMISS"),onSubmit:()=>{b("closed")}}),closed:(0,n.jsx)(n.Fragment,{}),eigenpodPending:(0,n.jsx)(v.d,{type:"pending",title:t("common.WEB3.DEPLOYING_EIGENPOD"),subtitle:t("common.WEB3.EIGENPOD_WAIT")}),eigenpodTxPending:(0,n.jsx)(v.d,{type:"pending",title:t("stake.TX_PENDING_TITLE")})}},[o,j,S,w,b,u,i.onSubmit,i.error]),I=(0,f.useMemo)(()=>"txPending"===x||"txPreparing"===x||"txSigning"===x||"eigenpodTxPending"===x||"eigenpodPending"===x,[x]),_=(0,f.useMemo)(()=>({initial:{title:void 0,innerClassName:"flounder:w-[560px]"},tx:{title:void 0,innerClassName:"flounder:w-[440px]",hideCloseButton:I}}),[x]),O=(0,f.useMemo)(()=>!!x&&(!!I||"closed"!==x),[I,x]),R=(0,f.useCallback)(()=>{!I&&(b(!x),x||b((null==o?void 0:o.showWarning)?"confirmWithdrawalCredentials":"initial"))},[x,I]);return(0,n.jsx)(d.lG.bL,{open:O,onOpenChange:R,children:(0,n.jsx)(d.lG.UC,{..._[T?"initial":"tx"],children:k[W(x)]})})},W=e=>e&&"boolean"!=typeof e?e:"closed";var M=a(81278),V=a(87903),z=a(62807),U=a(97850),F=a(10204),H=a(1909),K=a(16023);let Y=e=>{var t;let{isCustomWithdrawalCredentialsEnabled:a}=e,{t:s}=(0,l.Bd)(),{url:r}=(0,S.XX)(),i=(0,d._N)("Escape"),[o,c]=(0,f.useState)(!1),[u,m]=(0,f.useState)(void 0),{withdrawalCredentials:x,setWithdrawalCredentials:h}=(0,p.Z)(),{address:g,addressType:v,owner:b,showWarning:N}=x,{verifyAddress:E,isLoading:y,error:T}=(0,K.V)(),C=(0,L.wf)(g),{handleSubmit:j,reset:w,formState:A,control:k}=(0,H.mN)({defaultValues:{changeCredentials:""}}),I="eigenpod"===v&&N&&b,_=async e=>{let t=e.changeCredentials.trim(),a=!t.length,n=(0,L.GY)((0,L.wf)(g))===(0,L.GY)((0,L.wf)(t));if(!a&&!n&&(null==r?void 0:r.api)){let e=await E({serviceURL:r.api,address:(0,L.gO)(t,"0x02")});T||(h({...e}),D())}else D()},D=()=>{c(!1),m(void 0),w()};return(0,f.useEffect)(()=>{i&&D()},[i]),(0,f.useEffect)(()=>{h(e=>({...e,disableStakeButton:"contract"===v||o}))},[v,o]),(0,n.jsx)(n.Fragment,{children:o&&a?(0,n.jsx)("form",{onSubmit:j(_),children:(0,n.jsxs)(d.az,{flex:!0,alignItems:"start",className:"flex-col gap-2 trout:flex-row",children:[(0,n.jsxs)(d.az,{flex:!0,alignItems:"start",className:"w-full gap-2",children:[(0,n.jsx)(d.az,{className:"my-1.5",children:(0,n.jsx)(O.w,{type:"eigenpod"===v?"EPOD":"ETH1"})}),(0,n.jsx)(U.Z,{name:"changeCredentials",control:k,rules:{validate:e=>{if(e&&!F.isAddress(e))return s("common.WEB3.ERROR_INVALID_ADDRESS")},minLength:{value:42,message:s("common.WEB3.ERROR_INVALID_ADDRESS")}},inputProps:{disabled:y,invalid:!!(u||A.errors.changeCredentials),hint:u||(null==(t=A.errors.changeCredentials)?void 0:t.message),type:"text",placeholder:C,autoFocus:!0,className:"h-8 ring-itemSecondaryMute !p-2 mb-0 flex-1"}})]}),(0,n.jsxs)(d.az,{flex:!0,className:"justify-end w-full gap-1 trout:w-auto trout:justify-start",children:[(0,n.jsx)(d.$n,{application:!0,variant:"outline",size:"sm",color:"secondary",type:"submit",disabled:y,className:G,startIcon:y?void 0:{iconKey:"save",size:14,className:"!ml-0 relative top-px"},children:(0,n.jsxs)(d.az,{flex:!0,className:"gap-1.5",children:[y&&(0,n.jsx)(d.mP,{size:"goldfish"}),s("common.KEYS.SAVE")]})}),(0,n.jsx)(d.$n,{application:!0,variant:"outline",size:"sm",color:"secondary",type:"button",className:(0,d.cx)(G,"ring-itemSecondaryMute text-backgroundErrorOnDefault dark:itemSecondaryMute hover:ring-backgroundErrorOnDefault dark:hover:ring-backgroundErrorOnDefault"),disabled:y,onClick:()=>D(),children:s("common.KEYS.CANCEL")})]})]})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d.az,{flex:!0,className:"flex-col gap-2 py-1.5 trout:flex-row trout:justify-between trout:py-0",children:[C&&(0,n.jsx)(R,{address:C,type:"eigenpod"===v?"EPOD":"ETH1",badge:"standard"!==v?v:void 0,className:"trout:max-w-[calc(100%-90px)] w-full"}),a&&(0,n.jsx)(d.$n,{application:!0,startIcon:{iconKey:"edit",size:14,className:"!ml-0"},variant:"outline",size:"sm",color:"secondary",className:(0,d.cx)(G,"self-end trout:self-auto mt-1.5 trout:my-0 -mb-1.5"),onClick:()=>c(!0),children:s("common.KEYS.EDIT")})]}),I&&(0,n.jsx)(R,{type:"nested",className:"mt-1",address:b,badge:"Owner"})]})})},G="gap-1.5 normal-case !bg-backgroundPrimaryDefault ring-itemSecondaryMute",X=e=>{let{message:t,variant:a="warning"}=e;return(0,n.jsx)(d.az,{flex:!0,className:"w-full my-6 break-words",children:(0,n.jsx)(d.yh,{variant:a,className:"w-full",customizedContent:(0,n.jsx)("div",{className:"font-sans",dangerouslySetInnerHTML:{__html:t}})})})};var $=a(8588),q=a.n($),Q=a(22864);let Z=()=>{let{t:e}=(0,l.Bd)();return(0,n.jsxs)(d.az,{flex:!0,justifyContent:"center",textAlign:"center",wrap:"wrap",className:"bg-[#F4F3F8] py-5 px-3 mt-4 text-[#1A0C6D] gap-1",children:[(0,n.jsx)(q(),{src:"/eigenlayer.png",alt:"EigenLayer",width:52,height:22,style:{alignSelf:"center",marginRight:"4px"}}),(0,n.jsx)("p",{className:"font-sans font-medium text-callout",children:e("common.WEB3.EIGENLAYER_RESTAKING")}),(0,n.jsx)(d.$n,{size:"sm",variant:"text",className:"gap-1 underline underline-offset-1",endIcon:{iconKey:"arrowRight",size:14},...(0,Q.bI)(J),href:J,children:e("common.KEYS.LEARN_MORE")})]})},J="https://blog.stake.fish/the-full-step-by-step-guide-to-restaking-on-eigenlayer-with-stakefish",ee=()=>{let{t:e}=(0,l.Bd)(),{activeAccount:t}=(0,C.v)(),{isStakingDisabled:a,withdrawalCredentials:s}=(0,p.Z)(),{address:r,addressType:i,showWarning:o,owner:c}=s,{apiStatus:u}=(0,V.a)(),m=[{title:{text:e("application.KEYS.WITHDRAWAL_ADDRESS")},value:{text:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Y,{isCustomWithdrawalCredentialsEnabled:!(null==u?void 0:u.isCustomWithdrawalCredentialsDisabled)}),!(null==u?void 0:u.isNewStakingDialogEnabled)&&(0,n.jsx)(Z,{})]}):d.AA.Sb},showValues:!0,className:"overflow-hidden [&_>div>div]:w-full"}];return(0,n.jsxs)(d.az,{className:"space-y-6",children:[t&&(0,n.jsx)(z.A,{dataWidgets:m,className:"w-full pb-0 mt-0"}),!a&&!!t&&(0,n.jsx)(X,{variant:"eigenpod"!==i||o?"warning":"neutral",message:e(et(i,o),{address:"eigenpod"===i?c:(0,L.wf)(r)})})]})},et=(e,t)=>"contract"===e?"stake.WITHDRAWAL_CREDENTIALS_NOTICE_CONTRACT":"eigenpod"!==e||t?"eigenpod"===e&&t?"stake.WITHDRAWAL_CREDENTIALS_NOTICE_EIGENPOD_MISMATCH":"external"===e&&t?"stake.WITHDRAWAL_CREDENTIALS_NOTICE_DEPOSITOR_MISMATCH":"stake.WITHDRAWAL_CREDENTIALS_NOTICE":"stake.WITHDRAWAL_CREDENTIALS_NOTICE_SUCCESS";var ea=a(25239);let en=()=>{let{t:e}=(0,l.Bd)(),{connectionStage:t}=(0,C.v)(),{currentPod:a}=function(){let{getPod:e,hasPod:t}=(0,ea.O)(),{activeAccount:a}=(0,C.v)(),{data:n,isLoading:l,error:s}=(0,T.useQuery)(["eigenpodInfo",a],async()=>a&&await t({address:a})&&await e({address:a})||null,{refetchOnMount:!0,enabled:!!a});return{currentPod:n,isLoading:l,error:s}}();return(0,n.jsxs)(d.az,{flex:!0,justifyContent:"space-between",wrap:"wrap",className:"w-full mt-4 flounder:mt-3 min-h-6",children:[(0,n.jsx)("p",{className:"text-callout text-itemSecondaryDefault",children:e("stake.WITHDRAWAL_ADDRESS")}),"connected"===t?void 0!==a?a?(0,n.jsx)(R,{address:a,type:"EPOD",badge:"eigenpod"}):(0,n.jsx)("p",{className:"text-callout",children:e("stake.AUTOMATIC_EIGENPOD")}):(0,n.jsx)(d.az,{flex:!0,children:(0,n.jsx)(d.mP,{size:"flounder"})}):null]})};var el=a(7477),es=a(57972);let er=()=>{let{t:e}=(0,l.Bd)(),{values:t,events:a}=(0,p.Z)();return(0,n.jsx)(d.Zp,{className:"flounder:px-4 px-4 flounder:py-3.5 py-3.5",children:(0,n.jsxs)(d.az,{flex:!0,justifyContent:"space-between",children:[(0,n.jsx)(d.JU,{htmlFor:"autoCompound",tooltip:e("stake.AUTO_COMPOUND_REWARDS_TOOLTIP"),children:e("stake.AUTO_COMPOUND_REWARDS")}),(0,n.jsx)(d.dO,{id:"autoCompound",checked:null==t?void 0:t.autoCompound,onCheckedChange:null==a?void 0:a.setAutoCompound,leftLabel:"Off",rightLabel:"On"})]})})};var ei=a(73548),eo=a(21505);let ed=e=>{let{disabled:t}=e,{t:a}=(0,l.Bd)(),{values:s,form:r,events:i}=(0,p.Z)(),[c,u]=(0,f.useState)(1),{minAvailableValidatorsNumber:m,autoCompound:x}=s||{},{onChangeValidatorsNumberHandler:h}=i||{},{getStakeAmount:g,getValidatorsNumber:v,trigger:b}=r||{},E=(null==g?void 0:g())||0,y=Math.min(Math.trunc(E/N.m3),N.yQ),T=(null==v?void 0:v())||0,S=T>0,C=Math.min(c,N.yQ),j=eo.gH.from(o.Wp.formatEtherToWei(E.toString())).div(eo.gH.from(C||1)),w=S?o.Wp.padBeaconChainData(o.Wp.formatWeiToEther(j.toString())):"0",A=e=>{null==h||h(e),u(e),b&&b()};return(0,f.useEffect)(()=>{u(T)},[T]),(0,f.useEffect)(()=>{x||u(y)},[x,y]),(0,n.jsxs)(d.az,{"data-testid":"validatorsRange",className:(0,d.cx)("space-y-2",t&&"opacity-40 pointer-events-none text-itemSecondaryDefault"),children:[(0,n.jsxs)(d.az,{flex:!0,justifyContent:"space-between",children:[(0,n.jsx)(d.JU,{htmlFor:"validatorsNumber",tooltip:a("stake.NUMBER_OF_VALIDATORS_TOOLTIP",{value:N.Tw}),children:a("stake.NUMBER_OF_VALIDATORS")}),S&&(0,n.jsxs)(d.az,{flex:!0,className:"gap-2",children:[(0,n.jsx)(d.JU,{children:C}),(0,n.jsx)(d.Ex,{className:"rounded-none text-itemSecondaryDefault ring-0 px-1.5 py-0.5","data-testid":"eth-per-validator",children:a("stake.ETH_PER_VALIDATOR",{value:w})})]})]}),(0,n.jsxs)(d.Zp,{className:"flounder:px-4 px-4 flounder:py-3.5 py-3.5 !gap-0",children:[(0,n.jsx)(d.Ap,{id:"validatorsNumber",min:m,max:y,thumbClassName:"size-6",thumbIconSize:14,value:[c],onValueChange:e=>A(e[0]),disabled:t}),(0,n.jsxs)(d.az,{flex:!0,justifyContent:"space-between",className:"text-itemSecondaryDefault",children:[(0,n.jsx)(d.$n,{variant:"text",size:"sm",disabled:t,onClick:()=>m&&(null==A?void 0:A(m)),className:(0,d.cx)("p-0 !no-underline font-normal text-[12px]",!S&&"opacity-0"),"data-testid":"min-level-button",children:m}),(0,n.jsx)(d.$n,{variant:"text",size:"sm",disabled:t,onClick:()=>y&&(null==A?void 0:A(y)),className:(0,d.cx)("p-0 !no-underline font-normal text-[12px]",!S&&"opacity-0"),"data-testid":"max-level-button",children:y})]})]})]})},ec=()=>{var e;let{t}=(0,l.Bd)(),{connectionStage:a}=(0,C.v)(),{balanceInEther:n}=(0,y.A)(),{stakingCapacity:s}=(0,A.t)(),{onOpenChange:r}=(0,h.s)("stakeStepDialog"),{hasPendingCreatePod:i,hasPendingMints:d,hasPendingClassicStakes:c}=(0,E.F)(),{input:u,withdrawalCredentials:m,form:x,events:g,values:v}=(0,p.Z)(),{maxPossibleStakeAmount:b}=v||{},{onKeyDown:T,onChangeStakeAmountHandler:S}=g||{},j=void 0!==u.value&&0!==u.value&&!u.error&&u.value>=N.RL,w=j&&u.value>Number(n),k=(null==x||null==(e=x.getValidatorsNumber)?void 0:e.call(x))||1,I=(j&&k>0?(u.value||0)/k:0)>N.Tw,_=j&&s&&s<k||!s,D=!m.disableStakeButton&&!w&&!I&&j&&!d&&!c&&!_&&!i,O=()=>{D&&"connected"===a&&r((null==m?void 0:m.showWarning)?"confirmWithdrawalCredentials":"initial")};return{isReadyToSubmit:D,buttonText:(0,f.useMemo)(()=>w?t("stake.INSUFFICIENT_BALANCE"):c?t("stake.STAKING_STATE"):j?t("stake.STAKE_SUBMIT_BUTTON",{value:null==x?void 0:x.getValidatorsNumber()}):t("stake.STANDARD_SUBMIT_BUTTON"),[w,c,j,x,t]),onFormSubmit:O,handleAmountChange:e=>{var t;let a=(null==x||null==(t=x.getStakeAmount)?void 0:t.call(x))||0;try{let t,n=o.Wp.formatEtherToWei(a.toString()),l=o.Wp.formatEtherToWei(N.m3.toString()),s=o.Wp.formatEtherToWei(b.toString());t=e?(t=eo.gH.from(n).add(eo.gH.from(l))).gt(eo.gH.from(s))?eo.gH.from(s):t:(t=eo.gH.from(n).sub(eo.gH.from(l))).lt(eo.gH.from(0))?eo.gH.from(0):t;let r=String(o.Wp.formatWeiToEther(t.toString())),i=t.isZero()?r:o.Wp.padStakeAmountData(r);null==S||S(i)}catch(e){console.error("Error calculating amount:",e)}},onInputEnterKeyDown:e=>{null==T||T(e,O)}}},eu=()=>{let{t:e}=(0,l.Bd)(),{apiStatus:t}=(0,V.a)(),{isStakingDisabled:a,modalView:s,withdrawalCredentials:r,type:i}=(0,p.Z)(),{isReadyToSubmit:o,buttonText:c,onFormSubmit:u}=ec(),m=r.disableStakeButton&&"contract"!==r.addressType,x="eigenlayer"===i.activeTab,f=!o||a||x&&!(null==t?void 0:t.isEigenLayerEnabled),h=(0,n.jsx)(d.$n,{application:!0,disabled:f,type:"button",color:"inverseAccent",size:"sm",onClick:u,className:"size-full !px-4","data-testid":"stake-submit-button",children:c});return a&&s||m?(0,n.jsx)(d.m_,{content:m?e("stake.STAKE_BITTON_DISABLED_HINT"):null==t?void 0:t.message,triggerProps:{className:"flex h-full"},className:"flounder:max-w-[340px]",dangerousContent:!0,children:h}):h},em=()=>{var e,t;let{t:a}=(0,l.Bd)(),{down:s}=(0,el.P)(),{activeAccount:r}=(0,C.v)(),{balanceInEther:i}=(0,y.A)(),{form:o,values:c,events:u,input:m}=(0,p.Z)(),{handleAmountChange:x,onInputEnterKeyDown:f}=ec(),{inputElement:h,minPossibleStakeAmount:g,maxPossibleStakeAmount:v,autoCompound:b}=c||{},{onBlur:E,onFocus:T,onChangeStakeAmountHandler:S}=u||{},j=(null==o||null==(e=o.getStakeAmount)?void 0:e.call(o))||0,w=null==s?void 0:s.flounder,A=j<2*N.RL||!b;return(0,n.jsx)(d.az,{children:(0,n.jsx)("form",{onSubmit:e=>e.preventDefault(),noValidate:!0,children:(0,n.jsxs)(d.az,{className:"space-y-6",children:[(0,n.jsxs)(d.az,{children:[(0,n.jsx)(es.F,{onPlusClick:()=>x(!0),onMinusClick:()=>x(!1),inputSupportBoxProps:w?{balanceText:a("stake.AVAILABLE_BALANCE_SHORT")}:void 0,action:(0,n.jsx)(eu,{}),children:(0,n.jsx)(U.Z,{name:"stakeAmount",rules:{validate:e=>{var t;if(!(0,N.BT)(e))return a("commonForms.ERRORS.INVALID_VALUE");let n=(null==o||null==(t=o.getValidatorsNumber)?void 0:t.call(o))||1;if(Number(e)/n>N.Tw)return a("stake.AMOUNT_PER_VALIDATOR_EXCEEDED",{value:N.Tw})},min:{value:g,message:a("commonForms.ERRORS.TOO_SMALL",{value:g})},max:{value:v,message:a("commonForms.ERRORS.TOO_BIG",{value:v})}},control:null==o?void 0:o.control,inputProps:{disabled:null==o||null==(t=o.formState)?void 0:t.isSubmitting,invalid:!!m.error,hint:m.error,type:"number",placeholder:"0",min:0,max:i||0,step:N.m3,ref:h,autoFocus:!0,onBlur:E,onFocus:T,onKeyDown:f,onChange:e=>null==S?void 0:S(e.target.value),className:"h-[54px]",hintClassName:"!mt-2 !mb-1.5 flounder:!mt-2.5 flounder:!-mb-0.5",defaultValue:0}})}),!w&&r&&(0,n.jsx)(ei.D,{balanceText:a("stake.AVAILABLE_BALANCE")})]}),(0,n.jsxs)(d.az,{className:"space-y-6",children:[(0,n.jsx)(er,{}),(0,n.jsx)(ed,{disabled:A})]})]})})})},ep=e=>{let{disabled:t,maxTopUpAmount:a}=e,{t:s}=(0,l.Bd)(),{values:r,form:i,events:c}=(0,p.Z)(),{onChangeTopUpAmountHandler:u}=c||{},{getTopUpAmount:m}=i||{},{minPossibleStakeAmount:x,selectedValidator:f}=r||{},h=(null==m?void 0:m())||0,g=eo.gH.from(o.Wp.formatEtherToWei(h.toString())),v=f?eo.gH.from(f.balance.toString()):eo.gH.from("0"),b=g.add(v),E=N.Fn,y=E.isZero()?0:Number.parseFloat(o.Wp.formatWeiToEther(b.toString()))/Number.parseFloat(o.Wp.formatWeiToEther(E.toString()))*100,T="".concat(Math.min(y,100).toFixed(1),"%"),S=eo.gH.from(o.Wp.formatEtherToWei(x.toString())),C=v.lt(S)?o.Wp.formatWeiToEther(S.sub(v).toString()):0,j=v.gt(S)?o.Wp.formatWeiToEther(S.sub(v).toString()):0,w=()=>{let e=eo.gH.from("1000000000000000000");if(f){let t=E.mul(70).div(100).div(e).mul(e).sub(v),a=t.lt(eo.gH.from(0))?eo.gH.from(0):t;return o.Wp.formatWeiToEther(a.toString())}let t=E.mul(70).div(100).div(e).mul(e);return o.Wp.formatWeiToEther(t.toString())},A=e=>{u&&u(o.Wp.padStakeAmountData(e))};return(0,n.jsxs)(d.az,{className:(0,d.cx)("space-y-2",t&&"opacity-40 pointer-events-none text-itemSecondaryDefault"),children:[(0,n.jsx)(d.JU,{htmlFor:"stakingCapacity",children:s("stake.STAKING_CAPACITY")}),(0,n.jsxs)(d.az,{flex:!0,className:"gap-2",children:[(0,n.jsxs)("span",{className:"font-medium text-callout",children:[o.Wp.padBeaconChainData(o.Wp.formatWeiToEther(b.toString()))," ETH"," "]}),(0,n.jsx)(d.Ex,{className:"rounded-none badge bg-backgroundInverseDefault text-backgroundInverseOnDefault ring-0 px-1.5 py-0.5",children:T})]}),(0,n.jsxs)(d.az,{children:[(0,n.jsx)(d.Ap,{id:"stakingCapacity",min:Number(j),max:Number(a),thumbClassName:"w-0.5 h-2 rounded-none",thumbIconSize:0,value:[h],onValueChange:e=>e[0]>=0&&(null==A?void 0:A(e[0])),className:"h-4 after:absolute after:left-[70%] after:-ml-px after:w-px after:h-1 after:bg-backgroundPrimaryDefault after:mix-blend-difference after:opacity-80"}),(0,n.jsxs)(d.az,{flex:!0,justifyContent:"space-between",className:"relative text-itemSecondaryDefault",children:[(0,n.jsx)(d.$n,{variant:"text",size:"sm",disabled:t,onClick:()=>null==A?void 0:A(C),className:"p-0 !no-underline font-normal text-[12px]","data-testid":"min-level-button",children:N.RL}),(0,n.jsx)(d.$n,{variant:"text",size:"sm",disabled:t,onClick:()=>null==A?void 0:A(w()),className:"p-0 !no-underline font-normal normal-case absolute left-[70%] translate-x-[-40%] text-[12px]","data-testid":"recommended-level-button",children:s("stake.RECOMMENDED_LEVEL")}),(0,n.jsx)(d.$n,{variant:"text",size:"sm",disabled:t,onClick:()=>a&&(null==A?void 0:A(a)),className:"p-0 !no-underline font-normal text-[12px]","data-testid":"max-level-button",children:N.Tw})]})]})]})};var ex=a(56042);let ef=()=>{let{t:e}=(0,l.Bd)(),{connectionStage:t}=(0,C.v)(),{balanceInEther:a}=(0,y.A)(),{validators:n}=(0,ex.d)(),{hasPendingCreatePod:s,hasPendingClassicStakes:r,hasPendingTopUps:i}=(0,E.F)(),{form:d,values:c,events:u,input:m,tx:x}=(0,p.Z)(),{selectedValidator:h}=c||{},{onKeyDown:g,onChangeTopUpAmountHandler:v}=u||{},b=null!==h,T=void 0!==m.value&&0!==m.value&&!m.error,S=T&&m.value>Number(a),j=N.hj,w=N.Fn,A=h?eo.gH.from(h.balance):eo.gH.from("0"),k=h?o.Wp.formatWeiToEther(w.sub(A).toString()):N.Tw,I=T&&!S&&!r&&!s&&!i&&b,_=n.filter(e=>"active_ongoing"===e.status&&eo.gH.from(e.balance).lt(w)),D=0===_.length,O=null==d?void 0:d.handleSubmit,R=()=>{I&&"connected"===t&&O&&O(()=>x.onSubmit&&x.onSubmit({stakeType:"classic"}))()};return{isReadyToSubmit:I,buttonText:(0,f.useMemo)(()=>S?e("stake.INSUFFICIENT_BALANCE"):D?e("stake.NO_VALIDATORS_AVAILABLE"):b?r?e("stake.STAKING_STATE"):i?e("stake.PENDING_STATE"):e("stake.TOPUP_VALIDATOR"):e("stake.SELECT_VALIDATOR"),[S,D,b,r,i]),maxTopUpAmount:k,minTopUpAmount:j,listForDropdown:_,onFormSubmit:R,onInputEnterKeyDown:e=>{null==g||g(e,R)},handleAmountChange:e=>{var t;let a=(null==d||null==(t=d.getTopUpAmount)?void 0:t.call(d))||0;try{let t,n=o.Wp.formatEtherToWei(a.toString()),l=o.Wp.formatEtherToWei(N.m3.toString());t=e?(t=eo.gH.from(n).add(eo.gH.from(l))).gt(w)?w:t:(t=eo.gH.from(n).sub(eo.gH.from(l))).lt(eo.gH.from(0))?eo.gH.from(0):t;let s=String(o.Wp.formatWeiToEther(t.toString())),r=t.isZero()?s:o.Wp.padStakeAmountData(s);null==v||v(r)}catch(e){console.error("Error calculating amount:",e)}}}},eh=()=>{let{apiStatus:e}=(0,V.a)(),{isStakingDisabled:t}=(0,p.Z)(),{isReadyToSubmit:a,buttonText:l,onFormSubmit:s}=ef(),r=(0,n.jsx)(d.$n,{application:!0,disabled:!a||t,type:"button",color:"inverseAccent",size:"sm",onClick:s,className:"size-full !px-4","data-testid":"stake-submit-button",children:l});return t?(0,n.jsx)(d.m_,{content:null==e?void 0:e.message,triggerProps:{className:"flex h-full"},className:"flounder:max-w-[340px]",dangerousContent:!0,children:r}):r},eg=()=>{var e;let{t}=(0,l.Bd)(),{down:a}=(0,el.P)(),{activeAccount:s}=(0,C.v)(),{balanceInEther:r}=(0,y.A)(),{form:i,values:o,events:c,input:u}=(0,p.Z)(),{maxTopUpAmount:m,minTopUpAmount:x,handleAmountChange:f,onInputEnterKeyDown:h}=ef(),{onBlur:g,onFocus:v,onChangeTopUpAmountHandler:b}=c||{},E=null==a?void 0:a.flounder;return(0,n.jsx)(d.az,{children:(0,n.jsx)("form",{onSubmit:e=>e.preventDefault(),noValidate:!0,children:(0,n.jsxs)(d.az,{className:"space-y-6",children:[(0,n.jsxs)(d.az,{children:[(0,n.jsx)(es.F,{onPlusClick:()=>f(!0),onMinusClick:()=>f(!1),inputSupportBoxProps:E?{balanceText:t("stake.AVAILABLE_BALANCE_SHORT")}:void 0,action:(0,n.jsx)(eh,{}),children:(0,n.jsx)(U.Z,{name:"topUpAmount",rules:{validate:e=>{if(!(0,N.BT)(e))return t("commonForms.ERRORS.INVALID_VALUE")},min:{value:x,message:t("commonForms.ERRORS.TOO_SMALL",{value:x})},max:{value:m,message:t("commonForms.ERRORS.TOO_BIG",{value:m})}},control:null==i?void 0:i.control,inputProps:{disabled:null==i||null==(e=i.formState)?void 0:e.isSubmitting,invalid:!!u.error,hint:u.error,type:"number",placeholder:"0",min:x,max:r||m,step:N.m3,ref:null==o?void 0:o.inputElement,autoFocus:!0,onBlur:g,onFocus:v,onKeyDown:h,onChange:e=>null==b?void 0:b(e.target.value),className:"h-[54px]",hintClassName:"!mt-2 !mb-1.5 flounder:!mt-2.5 flounder:!-mb-0.5",defaultValue:x}})}),!E&&s&&(0,n.jsx)(ei.D,{balanceText:t("stake.AVAILABLE_BALANCE"),maxTopUpAmount:m})]}),(0,n.jsx)(d.az,{className:"space-y-4",children:(0,n.jsx)(ep,{maxTopUpAmount:String(m)})})]})})})};var ev=a(96136);let eb=()=>{let{t:e}=(0,l.Bd)(),[t,a]=(0,f.useState)(!1),{values:s,events:r,form:i}=(0,p.Z)(),{validators:o}=(0,ex.d)(),c=o.filter(e=>"active_ongoing"===e.status&&eo.gH.from(e.balance).lt(N.Fn)&&(0,L.E$)(e.withdrawalCredentials));return 0===c.length?(0,n.jsx)(n.Fragment,{}):(0,n.jsxs)(d.ms.bL,{modal:!1,open:t,onOpenChange:()=>a(e=>!e),children:[(0,n.jsx)(d.ms.l9,{asChild:!0,children:(0,n.jsx)(d.$n,{application:!0,color:"secondary",size:"xs",endIcon:{iconKey:t?"chevronUp":"chevronDown",size:14},className:"normal-case hover:no-underline text-itemPrimaryDefault !px-1.5 !py-0 !pr-3  flounder:!text-callout font-semibold !text-[12px] relative top-px",children:(null==s?void 0:s.selectedValidator)?s.selectedValidator.index:e("stake.SELECT_VALIDATOR")})}),(0,n.jsxs)(d.ms.UC,{className:"py-2 pointer-events-auto w-[256px] overflow-auto max-h-[210px]",align:"start",sideOffset:3,children:[(0,n.jsx)(d.ms.JU,{className:"px-3.5 text-[10px] uppercase font-semibold",children:e("stake.SELECT_VALIDATOR")}),c.map(e=>(0,n.jsx)(d.ms.q7,{className:"mb-px",children:(0,n.jsx)(d.$n,{size:"sm",variant:"menuItem",className:"w-full disabled:backgroundSecondaryOnDefault [&>div]:w-full",onClick:()=>{null==r||r.setSelectedValidator({index:e.index,balance:e.balance,pubkey:e.pubkey}),s.topUpAmount>=N.RL&&(null==i||i.trigger())},children:(0,n.jsxs)(d.az,{flex:!0,justifyContent:"space-between",className:"w-full",children:[(0,n.jsx)("span",{children:e.index}),(0,n.jsx)("span",{className:"font-normal text-itemSecondaryDefault",children:(0,ev.z_)(e.balance,"beaconChain")})]})})},e.index))]})]})},eN=e=>{let{type:t}=e,{t:a}=(0,l.Bd)(),{activeAccount:s}=(0,C.v)(),{apiStatus:r}=(0,V.a)(),{isStakingDisabled:i,values:o,events:c}=(0,p.Z)(),{stakeMode:u}=o||{},m=[{value:"createNew",children:(0,n.jsx)("div",{children:a("stake.NEW_STAKING")})},{value:"topUp",children:(0,n.jsxs)(d.az,{flex:!0,className:"gap-3 !items-center",children:[(0,n.jsx)("span",{children:a("stake.TOPUP")})," ","topUp"===o.stakeMode&&(0,n.jsx)(eb,{})]})}],x={createNew:(0,n.jsx)(em,{}),topUp:(0,n.jsx)(eg,{})},f=null==r?void 0:r.isEigenLayerEnabled,h="classic"===t,g="eigenlayer"===t,v=h&&i&&(null==r?void 0:r.message)||g&&!f&&((null==r?void 0:r.eigenLayerMessage)||(null==r?void 0:r.message))||"";return(0,n.jsxs)(d.az,{className:"space-y-6",children:[v&&(0,n.jsx)(X,{variant:"error",message:v}),g?(0,n.jsx)(em,{}):(0,n.jsxs)(d.tU.bL,{value:o.stakeMode,onValueChange:e=>null==c?void 0:c.setStakeMode(e),defaultValue:"createNew",children:[(0,n.jsx)(d.tU.YJ,{items:m.map(e=>({...e,bordered:!0,asChild:u===e.value,className:"!px-3 !py-1.5 !normal-case"})),separator:!0,className:"mb-6"}),(0,n.jsx)(d.tU.UC,{value:u,tabIndex:-1,children:x[u]})]}),s&&g&&f&&(0,n.jsx)(en,{}),s&&h&&"createNew"===u&&(0,n.jsx)(ee,{}),(null==o?void 0:o.verificationAddressError)&&(0,n.jsx)(X,{variant:"error",message:(null==o?void 0:o.verificationAddressError)||""})]})};var eE=a(27160);let ey=e=>{var t;let{input:a,maxPossibleValidatorsToStake:s,getValidatorsNumber:r,onChangeAmount:i,balanceText:c}=e,{t:u}=(0,l.Bd)(),{connectionStage:m}=(0,C.v)(),{balanceInEther:p}=(0,y.A)(),{stakingCapacity:x}=(0,A.t)(),f=Math.trunc(Number(p)/N.m3),h=f>=s?s:f||N.rl,g=r?r():0,v=g===N.rl||a.error||(0,N.bS)(g)?void 0:u("stake.FORM_ROUNDING_HINT",{value:null!=(t=(0,N.lM)(g))?t:N.n2}),b=void 0===x||g<=x||a.error?void 0:u("stake.FORM_NO_STAKING_CAPACITY_HINT"),E=a.error,T=p?u("stake.ETH_BALANCE",{balance:o.Wp.padExecutionLayerData(p)}):void 0,S=h===N.rl,j={helperMessage:(0,n.jsx)("p",{className:"text-callout text-itemSecondaryDefault",children:v}),stakingCapacityMessage:(0,n.jsx)("p",{className:"text-callout text-itemWarningHighlight",children:b}),balanceMessage:(0,n.jsxs)("div",{className:"flex items-center justify-between w-full gap-2",children:[(0,n.jsx)("p",{className:"text-callout text-itemSecondaryDefault",children:!E&&c}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("p",{className:"text-callout",children:!E&&T}),"connected"===m&&!E&&T&&(0,n.jsx)(d.$n,{application:!0,size:"xs",color:"secondary",type:"button",disabled:S,onClick:()=>null==i?void 0:i(h),className:"px-2 py-1 flounder:px-2 flounder:py-1",children:u("stake.MAX_BUTTON")})]})]})},w=v?"helperMessage":b?"stakingCapacityMessage":"balanceMessage";return E?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("div",{className:"my-1 flounder:mt-2 flounder:mb-0 relative flex items-center gap-2.5 w-full flounder:translate-y-[2px]",children:j[w]})},eT=()=>{let{t:e}=(0,l.Bd)(),{apiStatus:t}=(0,V.a)(),{isStakingDisabled:a,modalView:s,withdrawalCredentials:r}=(0,p.Z)(),{isReadyToSubmit:i,buttonText:o,buttonHandler:c}=k(),u=r.disableStakeButton&&"contract"!==r.addressType,m=(0,n.jsx)(d.$n,{application:!0,disabled:!i||a,type:"button",color:"inverse",size:"sm",onClick:c,className:"w-full h-full !px-4",children:o});return a&&s||u?(0,n.jsx)(d.m_,{content:u?e("stake.STAKE_BITTON_DISABLED_HINT"):null==t?void 0:t.message,triggerProps:{className:"flex h-full"},className:"flounder:max-w-[340px]",dangerousContent:!0,children:m}):m},eS=e=>{let{onPlusClick:t,onMinusClick:a,inputSupportBoxProps:l,children:s}=e,{connectionStage:r}=(0,C.v)(),i={color:"transparent",size:"sm",type:"button",className:"active:scale-90"};return(0,n.jsxs)("div",{className:"flex flex-col items-start gap-1 flounder:flex-row flounder:gap-4",children:[(0,n.jsxs)("div",{className:"relative flex-grow w-full flounder:w-auto",children:[s,(0,n.jsxs)("div",{className:"absolute top-[14px] right-4 *:transition-transform *:will-change-transform bg-backgroundPrimaryDefault *:!p-1",children:[(0,n.jsx)(d.$n,{icon:{iconKey:"minus"},onClick:a,...i}),(0,n.jsx)(d.$n,{icon:{iconKey:"plus"},onClick:t,...i})]})]}),l&&(0,n.jsx)(ey,{...l}),(0,n.jsx)("div",{className:"h-[54px] w-full flounder:w-auto mt-1 flounder:mt-0 flounder:min-w-[232px]",children:"connected"!==r?(0,n.jsx)(eE.u,{size:"lg",type:"button",variant:"primary",disabled:"loading"===r,className:"w-full h-full !text-desktopCallout"}):(0,n.jsx)(eT,{})})]})},eC=e=>{let{type:t}=e,{down:a}=(0,el.P)(),{t:s}=(0,l.Bd)(),{form:r,values:i,events:o,input:c,isStakingDisabled:u}=(0,p.Z)(),{onFormSubmit:m}=k(),{activeAccount:x}=(0,C.v)(),{apiStatus:f}=(0,V.a)(),{formState:h,control:g,getValidatorsNumber:v}=r||{},{inputElement:b,minPossibleValidatorsToStake:E,maxPossibleValidatorsToStake:y}=i||{},{onBlur:T,onKeyDown:S,onFocus:j,onChangeValidatorsNumberHandler:w}=o||{},A=null==a?void 0:a.flounder,I={input:c,maxPossibleValidatorsToStake:y,getValidatorsNumber:v,onChangeAmount:w};return(0,n.jsxs)(d.az,{className:"space-y-4",children:[u&&(0,n.jsx)(X,{variant:"error",message:(null==f?void 0:f.message)||""}),(0,n.jsxs)("form",{onSubmit:e=>e.preventDefault(),children:[(0,n.jsx)(eS,{onPlusClick:()=>null==w?void 0:w((0,N.Nf)(v&&v())),onMinusClick:()=>null==w?void 0:w((0,N.Nf)(v&&v(),!1)),inputSupportBoxProps:A?{...I,balanceText:s("stake.AVAILABLE_BALANCE_SHORT")}:void 0,children:(0,n.jsx)(U.Z,{name:"validatorsNumber",rules:{validate:e=>{if(!(0,N.i3)(e))return s("commonForms.ERRORS.INVALID_VALUE")},min:{value:E,message:s("commonForms.ERRORS.TOO_SMALL",{value:E})},max:{value:y,message:s("commonForms.ERRORS.TOO_BIG",{value:y})}},control:g,inputProps:{disabled:null==h?void 0:h.isSubmitting,invalid:!!c.error,hint:c.error,type:"number",placeholder:"".concat(N.rl),min:E,max:y,step:N.n2,ref:b,autoFocus:!0,onBlur:T,onFocus:j,onKeyDown:e=>{null==S||S(e,m)},className:"h-[54px]",hintClassName:"!mt-2 !mb-1.5 flounder:!mt-2.5 flounder:!-mb-0.5"}})}),!A&&x&&(0,n.jsx)(ey,{...I,balanceText:s("stake.AVAILABLE_BALANCE")}),"eigenlayer"===t&&x&&(0,n.jsx)(en,{})]}),x&&"classic"===t&&(0,n.jsx)(ee,{})]})},ej=()=>{let{t:e}=(0,l.Bd)(),{type:t}=(0,p.Z)(),a=(0,M.useRouter)(),{apiStatus:s}=(0,V.a)(),r=null==s?void 0:s.isNewStakingDialogEnabled,i=(0,f.useMemo)(()=>[{value:"classic",title:e("stake.STANDARD_TYPE_TITLE"),subtitle:e("stake.STANDARD_TYPE_SUBTITLE")},{value:"eigenlayer",title:e("stake.EIGENLAYER_TYPE_TITLE"),subtitle:e("stake.EIGENLAYER_TYPE_SUBTITLE")}],[]),o=r?eN:eC;return(0,f.useEffect)(()=>{t.setActiveTab&&t.setActiveTab("classic"),t.onTabChange&&t.onTabChange("classic"),"eigenlayer"===a.query.type&&(t.setActiveTab&&t.setActiveTab("eigenlayer"),t.onTabChange&&t.onTabChange("eigenlayer"))},[]),(0,n.jsxs)(d.tU.bL,{value:t.activeTab,defaultValue:i[0].value,onValueChange:e=>{t.setActiveTab&&t.setActiveTab(e),t.onTabChange&&t.onTabChange(e)},children:[(0,n.jsx)(d.tU.B8,{className:"flex flex-col gap-2 mb-6 flounder:flex-row salmon:gap-4 [&>*]:w-1/2","aria-label":"Staking flows",children:i.map(e=>(0,n.jsx)(d.tU.l9,{className:"flex-1",value:e.value,asChild:!0,children:(0,n.jsx)(d.rk,{active:t.activeTab===e.value,...e})},e.value))}),i.map(e=>(0,n.jsx)(d.tU.UC,{value:e.value,children:(0,n.jsx)(o,{type:e.value})},e.value))]})},ew=()=>{let{open:e,onOpenChange:t}=(0,g.E)(),{events:a}=(0,p.Z)();return(0,n.jsx)(d.lG.bL,{open:!!e,onOpenChange:e=>{t(e),e||null==a||a.resetWidget()},children:(0,n.jsx)(d.lG.UC,{innerClassName:"max-w-full flounder:w-[724px] pt-12 flounder:pt-14",closeButtonProps:{className:"right-5 flounder:right-7 text-itemSecondaryDefault hover:text-itemPrimaryDefault transition-colors p-3 -m-3"},children:(0,n.jsx)(ej,{})})})};var eA=a(75516),ek=a(58387);let eI=()=>{let{open:e,onOpenChange:t}=(0,h.s)("shortcutsDialog"),a=(0,d._N)("?"),{t:s}=(0,l.Bd)(),r=(0,f.useMemo)(()=>[{label:s("application.KEYS.PAGE_UP"),keys:["shift","arrowUp"]},{label:s("application.KEYS.PAGE_DOWN"),keys:["shift","arrowDown"]},{label:s("application.KEYS.FOCUS_PREVIOUS_VALIDATOR"),keys:["arrowUp"]},{label:s("application.KEYS.FOCUS_NEXT_VALIDATOR"),keys:["arrowDown"]},{label:s("application.KEYS.SELECT_VALIDATOR"),keys:["space"]},{label:s("application.KEYS.VIEW_DETAILS"),keys:["enter"]},{label:s("application.KEYS.PREVIOUS_VALIDATOR"),keys:["arrowLeft"]},{label:s("application.KEYS.NEXT_VALIDATOR"),keys:["arrowRight"]}],[]);return(0,f.useEffect)(()=>{!e&&a&&t(!0)},[a]),(0,n.jsx)(d.lG.bL,{open:!!e,onOpenChange:()=>{t(!e)},children:(0,n.jsx)(d.lG.UC,{title:s("application.KEYS.SHORTCUTS"),innerClassName:"!p-7 max-w-[440px] flounder:w-[440px]",titleProps:{className:"text-title"},children:(0,n.jsx)("div",{className:"flex flex-col divide-y divide-itemPrimaryMute",children:r.map(e=>(0,n.jsxs)("div",{className:"flex justify-between items-center py-2.5 px-0 font-semibold text-callout",children:[(0,n.jsx)("span",{children:e.label}),(0,n.jsx)("div",{className:"text-[12px] leading-none flex gap-1 items-stretch *:border *:border-itemPrimaryMute *:rounded *:bg-backgroundSecondaryDefault *:bg-opacity/50 *:text-itemSecondaryDefault *:px-1.5 *:py-1",children:e.keys.map((e,t)=>(0,n.jsx)("span",{className:"flex items-center justify-center",children:e.includes("arrow")?(0,n.jsx)(d.In,{iconKey:e,size:14}):e},t))})]},e.label))})})})},e_=()=>{let{t:e}=(0,l.Bd)(),{connectionStage:t}=(0,C.v)(),a="loading"===t,[s,r]=(0,f.useState)(!1);return(0,f.useEffect)(()=>{let e;return a?e=setTimeout(()=>{r(!0)},1e3):r(!1),()=>clearTimeout(e)},[a]),(0,n.jsx)(d.lG.bL,{open:s,children:(0,n.jsx)(d.lG.UC,{title:void 0,hideCloseButton:a,innerClassName:"max-w-[440px] flounder:w-[440px] flounder:p-7",titleProps:{className:"text-title"},children:(0,n.jsx)(v.d,{type:"pending",title:e("application.KEYS.PENDING_WALLET_CONNECTION_TITLE"),subtitle:e("application.KEYS.PENDING_WALLET_CONNECTION_SUBTITLE")})})})};var eD=a(35394),eO=a(91752),eR=a(22900);let eL=e=>{let{selectedValidator:t,setSelectedValidator:a,dropdownList:s}=e,{t:r}=(0,l.Bd)(),[i,o]=(0,f.useState)(!1);return(0,n.jsxs)(d.ms.bL,{modal:!1,open:i,onOpenChange:()=>o(e=>!e),children:[(0,n.jsx)(d.ms.l9,{asChild:!0,children:(0,n.jsx)(d.$n,{size:"md",variant:"outline",application:!0,color:"secondary",className:"justify-between w-full !px-4 !py-3.5 font-normal text-start ring-1 [&>div]:w-full",endIcon:{iconKey:"chevronSelector",size:20,className:"rotate-90"},children:(0,n.jsxs)(d.az,{flex:!0,justifyContent:"space-between",className:"w-full",children:[(0,n.jsxs)(d.az,{flex:!0,className:"gap-2",children:[(null==t?void 0:t.index)||r("stake.SELECT_VALIDATOR"),(0,n.jsx)("span",{className:"text-itemSecondaryDefault",children:(null==t?void 0:t.balance)&&(0,ev.z_)(t.balance,"beaconChain")})]}),(0,n.jsx)(O.w,{type:"COMP"})]})})}),(0,n.jsxs)(d.ms.UC,{className:"py-2 pointer-events-auto w-[256px] salmon:w-[356px] overflow-auto max-h-[300px]",align:"start",sideOffset:3,children:[(0,n.jsx)(d.ms.JU,{className:"px-3.5 text-[10px] uppercase font-semibold",children:r("stake.SELECT_VALIDATOR")}),s.map(e=>(0,n.jsx)(d.ms.q7,{className:"mb-px",children:(0,n.jsx)(d.$n,{size:"sm",variant:"menuItem",className:"w-full disabled:backgroundSecondaryOnDefault [&>div]:w-full !py-2.5",onClick:()=>a(Number(e.index)),children:(0,n.jsxs)(d.az,{flex:!0,justifyContent:"space-between",className:"w-full",children:[(0,n.jsx)("span",{children:e.index}),(0,n.jsx)("span",{className:"font-normal text-itemSecondaryDefault",children:(0,ev.z_)(e.balance,"beaconChain")})]})})},e.index))]})]})},eB=()=>{let{t:e}=(0,l.Bd)(),{validators:t}=(0,ex.d)(),{selectedSourceValidators:a,selectedTargetValidator:s,setSelectedSourceValidators:r,setSelectedTargetValidator:i,onConsolidate:o,calculateTotalBalance:c,isUpgradingCredentials:u}=(0,x.n)(),{allSelectedValidators:m}=(0,eD.o)(e=>({allSelectedValidators:e.allSelectedValidators})),p=t.filter(e=>m.includes(e.index)&&(u||e.index!==s)),f=p.filter(e=>e.withdrawalCredentials.includes(eO.dz)),h=t.find(e=>e.index===s),g=(0,ev.z_)((null==h?void 0:h.balance)||"0","beaconChain"),v=c().gte(N.Fn);return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"mb-6 space-y-1 ",children:(0,n.jsx)("h4",{className:"text-title",children:e("dashboard.KEYS.CONSOLIDATE_VALIDATORS")})}),(0,n.jsxs)("form",{"data-testid":"consolidate-form",className:"space-y-6",children:[(0,n.jsxs)(d.az,{flex:!0,className:"relative flex-col items-start gap-4 salmon:gap-6 salmon:flex-row",children:[(0,n.jsxs)(d.az,{className:"w-full space-y-1",children:[(0,n.jsx)(d.JU,{className:"text-itemPrimaryHighlight",tooltip:e("dashboard.KEYS.SOURCE_VALIDATORS_TOOLTIP"),tooltipProps:{className:"font-mono"},children:e("dashboard.KEYS.SOURCE_VALIDATORS")}),(0,n.jsx)(d.az,{className:"pt-1.5",children:p.length>10?(0,n.jsx)("div",{className:"size-full  gap-2 px-4 py-3.5 -mt-px ring-1 ring-inset ring-itemSecondaryMute",children:p.map(e=>e.index).join(", ")}):p.map((e,t)=>(0,n.jsxs)(d.az,{flex:!0,justifyContent:"space-between",className:"flex items-center gap-2 px-4 py-3.5 -mt-px ring-1 ring-inset w-full ring-itemSecondaryMute",children:[(0,n.jsxs)(d.az,{flex:!0,className:"gap-2",children:[(0,n.jsx)("span",{children:e.index}),(0,n.jsx)("span",{className:"font-normal text-itemSecondaryDefault",children:(0,ev.z_)(e.balance,"beaconChain")})]}),(0,n.jsx)(O.w,{type:(0,eR.Di)(e.wcLabel,(0,L.iL)(e.withdrawalCredentials))})]},t))})]}),(0,n.jsx)(d.az,{className:"salmon:top-[35px] ring-1 ring-itemSecondaryMute rounded-full p-2.5 text-center mx-auto relative",children:(0,n.jsx)(d.In,{iconKey:"arrowRight",className:"block leading-none rotate-90 salmon:rotate-0"})}),(0,n.jsxs)(d.az,{className:"w-full space-y-1",children:[(0,n.jsx)(d.JU,{className:"text-itemPrimaryHighlight",tooltip:e("dashboard.KEYS.TARGET_VALIDATOR_TOOLTIP"),tooltipProps:{className:"font-mono"},children:e("dashboard.KEYS.TARGET_VALIDATOR")}),(0,n.jsx)(d.az,{className:"space-y-0.5 pt-1.5",children:u||!f.length?(0,n.jsxs)(d.az,{flex:!0,justifyContent:"space-between",className:"flex items-center gap-2 px-4 py-3.5 ring-1 w-fulltext-callout ring-itemSecondaryMute -mt-px",children:[(0,n.jsxs)(d.az,{flex:!0,className:"gap-2",children:[(0,n.jsx)("span",{children:s}),(0,n.jsx)("span",{className:"text-itemSecondaryDefault",children:g})]}),(0,n.jsx)(O.w,{type:"COMP"})]}):(0,n.jsx)(d.az,{className:"-mt-px",children:(0,n.jsx)(eL,{dropdownList:f,selectedValidator:h,setSelectedValidator:e=>{let t=a.includes(e),n=[...a];t&&(n=n.filter(t=>Number(t)!==e)),void 0!==s&&n.push(Number(s)),r(n),i(e)}})})})]})]}),u?(0,n.jsx)(d.yh,{variant:"neutral",customizedContent:(0,n.jsx)(d.az,{children:e("dashboard.KEYS.CONSOLIDATE_UPGRADE_HINT")})}):(0,n.jsx)(d.az,{className:"space-y-2",children:(0,n.jsxs)(d.az,{flex:!0,className:"justify-between text-callout",children:[(0,n.jsx)(d.JU,{className:"font-mono font-normal text-itemSecondaryDefault",children:e("dashboard.KEYS.FINAL_BALANCE")}),(0,n.jsx)(d.az,{children:u?g:(0,ev.z_)(c().toString(),"beaconChain")})]})}),(0,n.jsx)(d.az,{className:"mt-6",flex:!0,justifyContent:"end",children:(0,n.jsx)(d.$n,{type:"button",application:!0,color:"inverse",size:"lg",disabled:v,onClick:o,"data-testid":"consolidate-ctaButton",children:e("dashboard.KEYS.CONSOLIDATE_CTA")})})]})]})},eP=()=>{let{t:e}=(0,l.Bd)(),{open:t,onOpenChange:a}=(0,h.s)("consolidationDialog"),{onOpenChange:s}=(0,h.s)("walletCapsuleDialog"),{clearSelection:r,onConsolidate:i,errorMessage:o,calculateTotalBalance:c,selectedSourceValidators:u,selectedTargetValidator:m}=(0,x.n)(),p=()=>{i()},g={initial:(0,n.jsx)(eB,{}),txSigning:(0,n.jsx)(v.d,{type:"pending",title:e("dashboard.KEYS.CLAIM_PENDING_TITLE"),subtitle:e("dashboard.KEYS.CONSOLIDATE_VALUE",{value:(0,ev.z_)(c().toString(),"beaconChain"),validatorsNumber:u.length,targetIndex:m})}),txPending:(0,n.jsx)(v.d,{type:"pending",title:e("common.WEB3.TX_PENDING_SUBTITLE")}),txError:(0,n.jsx)(v.d,{type:"error",title:(null==o?void 0:o.title)||e("dashboard.KEYS.CLAIM_FAILED_TITLE"),errorMessage:null==o?void 0:o.subtitle,onSubmit:()=>p(),buttonTitle:e("stake.TRY_AGAIN")}),txSubmitted:(0,n.jsx)(v.d,{type:"submitted",title:e("common.WEB3.TX_SUBMITTED_TITLE"),subtitle:e("common.WEB3.TX_PENDING_SUBTITLE"),buttonTitle:e("common.WEB3.VIEW_PROGRESS"),onSubmit:()=>{s(!0),a(!1)}}),closed:(0,n.jsx)(n.Fragment,{})},b=(0,f.useCallback)(e=>{e||"txPending"===t||"txSigning"===t||(a(!1),r())},[t,a]),N="initial"===t;return(0,n.jsx)(d.lG.bL,{open:!!t,onOpenChange:b,children:(0,n.jsx)(d.lG.UC,{id:"claim-dialog",innerClassName:(0,d.cx)(N?"flounder:p-5 flounder:w-[500px] salmon:w-[840px]":"flounder:p-7 max-w-[440px] flounder:w-[440px]"),...{initial:{title:void 0},tx:{title:void 0,hideCloseButton:"txPending"===t||"txSigning"===t}}[N?"initial":"tx"],children:g[t]})})},eW=e=>{let{children:t}=e,{open:a}=(0,h.s)("stakeStepDialog"),{open:l}=(0,g.E)(),{open:s}=(0,h.s)("shortcutsDialog"),{open:r}=(0,h.s)("consolidationDialog");return(0,n.jsx)(p.p,{children:(0,n.jsxs)(x.H,{children:[(0,n.jsx)(ek.q,{}),(0,n.jsx)(eA.T,{}),(0,n.jsx)(e_,{}),!!l&&(0,n.jsx)(ew,{}),!!a&&(0,n.jsx)(P,{}),!!s&&(0,n.jsx)(eI,{}),!!r&&(0,n.jsx)(eP,{}),t]})})};var eM=a(17659),eV=a(22174),ez=a(96741),eU=a(28297),eF=a(7588),eH=a(97184),eK=a(38714),eY=a(59961);let eG=e=>{let{children:t}=e,{t:a}=(0,l.Bd)(),{isMaintenanceMode:s,maintenanceMessage:r,isLoading:i}=(0,ez._)();return i?(0,n.jsx)(eV.x,{}):s?(0,n.jsx)(d.a_,{children:(0,n.jsx)(eM.Q,{title:a("common.KEYS.MAINTENANCE"),subtitle:r||a("common.KEYS.IS_UNDER_MAINTENANCE")})}):(0,n.jsx)(n.Fragment,{children:t})},eX=e=>{let{disableLoading:t,children:a,customMetaTags:s=!1}=e,{rendererState:i}=(0,eF.C)(),{t:d}=(0,l.Bd)();(0,eU.B)();let p={loadingView:(0,n.jsx)(eV.x,{}),defaultView:(0,n.jsx)(eW,{children:a})};return(0,n.jsx)(r.SafeProvider,{children:(0,n.jsx)(eY.P,{value:"ethereum",children:(0,n.jsx)(o.ej,{children:(0,n.jsx)(S.qB,{children:(0,n.jsx)(eK.k,{children:(0,n.jsxs)(E.r,{children:[(0,n.jsxs)("main",{className:"relative",children:[!s&&(0,n.jsx)(u.p,{title:d("common.KEYS.STAKE"),description:d("networks/ethereum.CONTENT.DESCRIPTION"),keywords:d("networks/ethereum.CONTENT.KEYWORDS")}),(0,n.jsx)(m.Y,{}),(0,n.jsx)("div",{className:"flex flex-col min-h-screen py-12",children:(0,n.jsx)(eG,{children:p[t&&"loadingView"===i?"defaultView":i]})}),(0,n.jsx)(c.w,{simple:!0,fixed:!0})]}),(0,n.jsx)(eH.P,{})]})})})})})})};(0,s.Pg)({ethersConfig:i.ethersConfig,chains:[i.mainnet,i.hoodi],projectId:i.projectId,enableAnalytics:!1,termsConditionsUrl:"https://stake.fish/terms-of-service",privacyPolicyUrl:"https://stake.fish/privacy-policy"})},62807:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(6029),l=a(56191);let s=e=>{let{dataWidgets:t,titleClassName:a,valuesClassName:s,className:r}=e;return(0,n.jsx)("div",{className:(0,l.cx)("grid -mt-px pb-3",r),children:t.map((e,t)=>(0,n.jsx)(l.D7,{titleClassName:a,valuesClassName:s,...e},t))})}},73548:(e,t,a)=>{a.d(t,{D:()=>p});var n=a(6029),l=a(14187),s=a(56191),r=a(30755),i=a(32535),o=a(49974),d=a(63226),c=a(4754),u=a(89187),m=a(39635);let p=e=>{let{balanceText:t,maxTopUpAmount:a}=e,{t:p}=(0,l.Bd)(),{connectionStage:x}=(0,c.v)(),{balanceInEther:f,isLoading:h}=(0,r.A)(),{stakingCapacity:g}=(0,i.t)(),{form:v,values:b,events:N,input:E}=(0,u.Z)(),{minPossibleStakeAmount:y,maxPossibleStakeAmount:T,stakeMode:S,autoCompound:C}=b||{},{onChangeStakeAmountHandler:j,onChangeTopUpAmountHandler:w}=N||{},A="topUp"===S?w:j,k=a?Math.min(Number(a),Number(f)):Math.min(Number(f),T),I=(null==v?void 0:v.getValidatorsNumber)?v.getValidatorsNumber():0,_=void 0===g||I<=g||E.error?void 0:p("stake.FORM_NO_STAKING_CAPACITY_HINT"),D=E.error,O=f?p("stake.ETH_BALANCE",{balance:d.Wp.padStakeAmountData(f)}):void 0,R=k===o.rl||k===y,L={stakingCapacityMessage:(0,n.jsx)("p",{className:"text-callout text-itemWarningHighlight",children:_}),balanceMessage:(0,n.jsxs)("div",{className:"flex items-center justify-between w-full gap-2",children:[(0,n.jsx)("p",{className:"text-callout text-itemSecondaryDefault",children:!D&&t}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:h?(0,n.jsx)("div",{className:"-my-1 ",children:(0,n.jsx)(m.m,{})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-callout",children:!D&&O}),"connected"===x&&!D&&O&&(0,n.jsx)(s.$n,{application:!0,size:"xs",color:"secondary",type:"button",disabled:R,onClick:()=>{let e=k;C||a||(e=(0,o.iX)(e/o.m3)*o.m3),null==A||A(d.Wp.padStakeAmountData(e))},className:"px-2 py-1 flounder:px-2 flounder:py-1",children:p("stake.MAX_BUTTON")})]})})]})},B=_?"stakingCapacityMessage":"balanceMessage";return D?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("div",{className:"my-1 flounder:mt-2 flounder:mb-0 relative flex items-center gap-2.5 w-full flounder:translate-y-[2px]",children:L[B]})}},75516:(e,t,a)=>{a.d(t,{T:()=>i});var n=a(6029),l=a(14187),s=a(56191),r=a(4754);let i=()=>{let{t:e}=(0,l.Bd)(),{switchNetwork:t,connectionStage:a}=(0,r.v)();return"unsupportedConnected"!==a?null:(0,n.jsx)(s.ib,{wrapperClassName:"translate-y-0 opacity-100",className:"bg-backgroundInverseDefault flounder:min-h-12 salmon:h-12",children:(0,n.jsxs)(s.az,{flex:!0,alignItems:"center",justifyContent:"center",className:"text-center flounder:text-start flex-col gap-1 pt-1 pb-2.5 flounder:flex-row flounder:gap-2 flounder:py-0",children:[(0,n.jsx)("p",{className:"font-sans text-mobileBody4 text-balance",children:e("common.WEB3.ERROR_WRONG_NETWORK_PROMPT")}),(0,n.jsx)(s.$n,{size:"sm",color:"inverse",variant:"text",onClick:async()=>await (null==t?void 0:t(1)),endIcon:{iconKey:"arrowRight",size:14},className:"gap-1 underline underline-offset-1",children:e("common.WEB3.SWITCH_NETWORK_PROMPT")})]})})}},75713:(e,t,a)=>{a.d(t,{H:()=>u});var n=a(6029),l=a(56191),s=a(14187),r=a(55729),i=a(22864),o=a(47468);let d="https://shop.stake.fish",c="stakefish:shopTooltipShown",u=e=>{let{activateHeader:t,badgeClassName:a,...u}=e,{t:m}=(0,s.Bd)(),[p,x]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{!0===(0,o.M)(c)&&x(!1)},[]),(0,n.jsxs)("div",{className:"relative",children:[p&&(0,n.jsxs)("div",{className:(0,l.cx)("z-50 font-sans bg-neutral0 text-neutral90 max-w-64 absolute right-full top-1/2 -translate-y-1/2 px-1 py-[3px] font-bold rounded text-tag2 flounder:hidden salmon:block select-none dark:text-backgroundInverseOnDefault dark:bg-itemPrimaryDefault",t?"text-backgroundInverseOnDefault dark:text-itemPrimaryOnDefault dark:bg-itemPrimaryDefault":"trout:text-brandDefault dark:text-backgroundInverseOnDefault dark:bg-itemPrimaryDefault",a),children:[m("common.KEYS.NEW"),(0,n.jsx)("span",{className:"absolute right-0.5  translate-y-1/2 -rotate-90 translate-x-full top-[5px]",children:(0,n.jsx)("svg",{offset:"5",className:"block fill-itemPrimaryDefault",width:"7",height:"3",viewBox:"0 0 30 10",preserveAspectRatio:"none",children:(0,n.jsx)("polygon",{points:"0,0 30,0 15,10"})})})]}),(0,n.jsx)(l.$n,{size:"sm",icon:{iconKey:"shop",size:16},title:m("common.KEYS.STORE_TITLE"),...(0,i.bI)(d),href:d,onClick:()=>{x(!1),(0,o.d)(c,!0)},...u})]})}},79956:(e,t,a)=>{a.d(t,{j:()=>c});var n=a(14902),l=a(26906),s=a(32),r=a.n(s);async function i(e){try{return await e()}catch(a){var t;if(r().isAxiosError(a)&&(null==(t=a.response)?void 0:t.status)&&a.response.status>=500)return await new Promise(e=>setTimeout(e,1e3)),await e();throw a}}let o="/eth/retail/stake",d={createValidators:e=>"".concat(e).concat(o,"/v1/create-validators"),createValidatorsV2:e=>"".concat(e).concat(o,"/v2/create-validators"),createTopUp:e=>"".concat(e).concat(o,"/v1/create-top-up-deposit-info"),depositChallenge:e=>"".concat(e).concat(o,"/v1/deposit-challenge"),depositChallengeV2:e=>"".concat(e).concat(o,"/v2/deposit-challenge"),exitChallenge:e=>"".concat(e).concat(o,"/v1/exit-challenge"),generateExitMessages:e=>"".concat(e).concat(o,"/v1/generate-exit-messages"),exitValidators:e=>"".concat(e).concat(o,"/v1/exit-validators"),remainingKeys:e=>"".concat(e).concat(o,"/v1/remaining-keys"),verifyWithdrawalCredentials:e=>"".concat(e).concat(o,"/v1/verify-withdrawal-credentials"),withdrawalRequestTransaction:e=>"".concat(e).concat(o,"/v1/withdrawal-request-transaction"),consolidationRequestTransaction:e=>"".concat(e).concat(o,"/v1/consolidation-request-transaction")},c={verifyWithdrawalCredentials:async(e,t,a)=>{if(!a)throw Error("Service URL is not defined");try{return(await i(()=>l.Q.get(d.verifyWithdrawalCredentials(a),{params:{depositor:e,withdrawalCredentials:t}}))).data}catch(e){throw console.error(e),e}},getRemainingKeys:async e=>(await l.Q.get(d.remainingKeys(e),{})).data,createValidators:async e=>{let{signature:t,message:a,count:s,withdrawalAddress:r,depositor:o,serviceURL:c}=e;return(await i(()=>l.Q.post(d.createValidators(c),{signature:t,message:a,count:s,withdrawalCredentials:(0,n.gO)(r),depositor:o}))).data},createValidatorsV2:async e=>{let{signature:t,message:a,amounts:s,withdrawalCredentials:r,depositor:o,serviceURL:c}=e;return(await i(()=>l.Q.post(d.createValidatorsV2(c),{signature:t,message:a,amounts:s,withdrawalCredentials:(0,n.gO)(r,"0x02"),depositor:o}))).data},createTopUpDeposit:async e=>{let{validatorPubkey:t,amount:a,serviceURL:n}=e;return(await i(()=>l.Q.post(d.createTopUp(n),{amount:a,validatorPubkey:t}))).data},depositChallenge:async e=>{let{count:t,address:a,serviceURL:n}=e;return(await i(()=>l.Q.get(d.depositChallenge(n),{params:{count:t,address:a}}))).data.challenge},depositChallengeV2:async e=>{let{amounts:t,address:a,serviceURL:n}=e;return(await i(()=>l.Q.get(d.depositChallengeV2(n),{params:{amounts:t,address:a}}))).data.challenge},exitChallenge:async e=>{let{indices:t,address:a,type:n,serviceURL:s}=e;return(await i(()=>l.Q.get(d.exitChallenge(s),{params:{type:n,indices:t.join(","),address:a}}))).data.challenge},generateExitMessages:async e=>{let{indices:t,signature:a,message:n,serviceURL:s}=e;return(await i(()=>l.Q.post(d.generateExitMessages(s),{indices:t,signature:a,message:n}))).data},exitValidators:async e=>{let{indices:t,signature:a,message:n,serviceURL:s}=e;return(await i(()=>l.Q.post(d.exitValidators(s),{indices:t,signature:a,message:n}))).data},withdrawalRequest:async e=>{let{data:t,serviceURL:a}=e;return(await i(()=>l.Q.post(d.withdrawalRequestTransaction(a),t))).data},consolidationRequest:async e=>{let{data:t,serviceURL:a}=e;return(await i(()=>l.Q.post(d.consolidationRequestTransaction(a),t))).data}}},87903:(e,t,a)=>{a.d(t,{a:()=>o});var n=a(32),l=a.n(n),s=a(49633),r=a(90495);let i=async()=>l().get("/api/status",r.f).then(e=>e.data),o=()=>{let{data:e,isLoading:t,isFetching:a}=(0,s.useQuery)(["api-status"],()=>i(),{refetchOnWindowFocus:!0,refetchInterval:6e4});return{apiStatus:e,isLoading:t||a&&!e}}},89138:(e,t,a)=>{a.d(t,{r:()=>v,F:()=>g});var n=a(6029),l=a(55729);let s=e=>new Promise(t=>{setTimeout(()=>{t()},e)});var r=a(14187),i=a(63904),o=a(63226),d=a(22864),c=a(38714),u=a(4754),m=a(47468),p=a(56659),x=a(32052);let f="stakefish:pendingTransactions",h=(0,l.createContext)({}),g=()=>(0,l.useContext)(h),v=e=>{let[t,a]=(0,l.useState)([]),[g,v]=(0,l.useState)(new Map),[b,N]=(0,l.useState)(new Map),[E,y]=(0,l.useState)([]),{t:T}=(0,r.Bd)(),{addNewToast:S}=(0,c.Y)(),{activeChainId:C,activeAccount:j,provider:w}=(0,u.v)(),A=(0,l.useCallback)(e=>{let t=o.lk.find(e=>e===C)||o.cG,a=(0,d.g$)(o.Bt[t]);return"".concat(a,"/tx/").concat(e)},[C]),k=(0,l.useCallback)(e=>{y(t=>[...t,e])},[]),I=(0,l.useCallback)(e=>{y(t=>t.filter(t=>t.hash!==e.hash))},[]),_=(0,l.useCallback)(e=>{a(t=>t.filter(t=>t.hash!==e.hash))},[j]),D=(0,l.useCallback)((e,t)=>{let a=(0,i.u1)(e,T);S({type:"error",title:"exit"!==t.type?T("common.WEB3.TX_FAILED_TITLE"):T("common.WEB3.REQUEST_FAILED"),description:"".concat(a.title).concat(a.subtitle?". ".concat(a.subtitle):""),transaction:t.link?{link:t.link,linkLabel:T("common.WEB3.VIEW_ON_ETHER_SCAN")}:void 0})},[]),O=(0,l.useCallback)(async e=>{if(e.chainId!==C||e.account!==j||!w)return;let t={link:e.link,linkLabel:T("common.WEB3.VIEW_ON_ETHER_SCAN")},a={type:"error",title:"exit"!==e.type?T("common.WEB3.TX_FAILED_TITLE"):T("common.WEB3.REQUEST_FAILED_TITLE"),transaction:t};try{let n=await w.waitForTransaction(e.hash);if((null==n?void 0:n.status)!==1){S({...a}),v(t=>new Map(t).set(e.hash,e.type));return}"classicStake"===e.type?B(t):L(t,e.type),N(t=>new Map(t).set(e.hash,!0))}catch(t){(0,i.Cp)(t),S({...a,description:t.message}),v(a=>new Map(a).set(e.hash,t.message))}finally{await s(5e3),_(e)}},[C,j,w]),R=(0,l.useCallback)(e=>{a(t=>[...t||[],e]),O(e)},[O]),L=(0,l.useCallback)((e,t)=>{S({type:"success",title:"exit"!==t?T("common.WEB3.TX_CONFIRMED_TITLE"):T("common.WEB3.REQUEST_CONFIRMED"),transaction:e})},[]),B=(0,l.useCallback)(async e=>{let t=window.location.pathname.includes("stake"),a=async()=>{S({type:"success",title:T("common.WEB3.TX_CONFIRMED_TITLE"),description:t?T("common.WEB3.SUCCESS_REDIRECT_HINT",{duration:5}):void 0,transaction:e,duration:5e3}),t&&await s(5e3)};await a()},[j]);!function(e){let{setPendingTxs:t,pendingTxs:a,removePendingTx:n}=e,{activeAccount:s,provider:r}=(0,u.v)();(0,l.useEffect)(()=>{t((0,m.M)(f))},[]),(0,l.useEffect)(()=>{if(!s||!(null==a?void 0:a.length)||!r)return;let e=setInterval(async()=>{for(let e of a)null!==await r.getTransactionReceipt(e.hash)&&n(e)},1e4);return()=>clearInterval(e)},[s,a,r]),(0,l.useEffect)(()=>{(0,m.d)(f,a)},[a])}({setPendingTxs:a,pendingTxs:t,removePendingTx:_}),function(e){let{safeTxs:t,removeSafeTx:a}=e,{activeAccount:n,activeChainId:s}=(0,u.v)(),{url:r}=(0,x.XX)();(0,l.useEffect)(()=>{if(!n||!(null==t?void 0:t.length)||!(null==r?void 0:r.safeTx)||!s)return;let e=setInterval(async()=>{for(let e of t){let t=await (0,p.z)(e.hash,r.safeTx);t&&t.isExecuted&&(t.txHash?e.onSuccess(t.txHash):e.onError(),a(e))}},2e3);return()=>clearInterval(e)},[t,s,n,null==r?void 0:r.safeTx])}({safeTxs:E,removeSafeTx:I});let P=(0,l.useMemo)(()=>{if(!j||!(null==t?void 0:t.length))return;let e=t.filter(e=>e.account===j);return(null==e?void 0:e.length)?e:void 0},[t,j]),W=(0,l.useCallback)((e,t)=>!!t&&t.some(t=>t.type===e),[]);return(0,n.jsx)(h,{value:{pendingTxs:t,failedTxs:g,successTxs:b,accountTxs:P,hasPendingClaims:(0,l.useMemo)(()=>W("claim",P),[P,W]),hasPendingMints:(0,l.useMemo)(()=>W("mint",P),[P,W]),hasPendingClassicStakes:(0,l.useMemo)(()=>W("classicStake",P),[P,W]),hasPendingWithdrawNFTs:(0,l.useMemo)(()=>W("withdrawNFT",P),[P,W]),hasPendingCreatePod:(0,l.useMemo)(()=>W("createPod",t),[t,W]),hasPendingTopUps:(0,l.useMemo)(()=>W("topUp",t),[t,W]),hasPendingConsolidations:(0,l.useMemo)(()=>W("consolidation",t),[t,W]),hasPendingPartialWithdrawals:(0,l.useMemo)(()=>W("partialWithdrawal",t),[t,W]),createTxLink:A,addPendingTx:R,addSafeTx:k,handleTxError:D},children:e.children})}},89187:(e,t,a)=>{a.d(t,{p:()=>L,Z:()=>R});var n=a(6029),l=a(55729),s=a(99027),r=a(4754),i=a(17121),o=a(16023),d=a(87903),c=a(49974),u=a(14902),m=a(1909),p=a(63226),x=a(30755),f=a(39273);let h=()=>{let e=(0,l.useRef)(null),{balanceInEther:t}=(0,x.A)(),[a,n]=(0,l.useState)(!0),{apiStatus:s}=(0,d.a)(),r=!!(null==s?void 0:s.isNewStakingDialogEnabled),i=(0,m.mN)({defaultValues:{validatorsNumber:c.rl,stakeAmount:0,topUpAmount:0}}),{trigger:o,setValue:u,getValues:h,clearErrors:g,watch:v}=i,b=v("validatorsNumber"),N=v("stakeAmount"),E=v("topUpAmount"),y=(0,l.useCallback)(()=>Number(h().validatorsNumber),[h]),T=(0,l.useCallback)(()=>Number(h().stakeAmount),[h]),S=(0,l.useCallback)(()=>Number(h().topUpAmount),[h]),C=(0,l.useCallback)(e=>{let t="function"==typeof e?e(a):e;if(n(t),t){let e=T();if(e>0){let t=(0,c.Yj)(Number(e)),a=0!==e?p.Wp.padStakeAmountData(String(e)):e;u("validatorsNumber",t),u("stakeAmount",a),o()}}else{let e=T();if(e>0){let t=Math.min((0,c.iX)(e/c.m3),c.yQ),a=t*c.m3,n=0!==a?p.Wp.padStakeAmountData(String(a)):a;u("validatorsNumber",t),u("stakeAmount",n),o()}}},[a]),j=(0,l.useCallback)(()=>{let e=T(),t=S(),n=y(),l=(0,c.lM)(n);if((0!==e||0!==t||n!==c.rl)&&o(),0===e&&(u("stakeAmount",0),g()),0===t&&(u("topUpAmount",0),g()),!i.formState.errors.stakeAmount)if(a||0===e)u("stakeAmount",0!==e?p.Wp.padStakeAmountData(String(e)):e);else{let t=Math.floor(e/c.m3)*c.m3;u("stakeAmount",0!==t?p.Wp.padStakeAmountData(String(t)):t)}if(!i.formState.errors.topUpAmount)if(a||0===t)u("topUpAmount",0!==t?String(p.Wp.padStakeAmountData(String(t))):t);else{let e=Math.floor(t/c.m3)*c.m3;u("topUpAmount",0!==e?String(p.Wp.padStakeAmountData(String(e))):e)}n===c.rl&&(u("validatorsNumber",c.rl),g()),l&&u("validatorsNumber",l)},[y,T,S,o,u,g,N,E,b,r,i.formState.errors.stakeAmount,i.formState.errors.topUpAmount,a]),w=(0,l.useCallback)(()=>{let e=T(),t=S(),a=y();u("stakeAmount",String(e)),u("topUpAmount",String(t)),u("validatorsNumber",a)},[y,T,S,u,r,N,E,b]),A=(0,l.useCallback)((e,t)=>{if("Enter"===e.key&&t&&t(),r){let t=[...f.nE,".",","];if(("."===e.key||","===e.key)&&(String(h().stakeAmount).includes(".")&&"stakeAmount"===e.currentTarget.name||String(h().topUpAmount).includes(".")&&"topUpAmount"===e.currentTarget.name))return void e.preventDefault();e.key.match(/^\d+$/)||t.includes(e.key)||e.preventDefault()}else e.key.match(/^\d+$/)||f.nE.includes(e.key)||e.preventDefault()},[h,r]),k=(0,l.useCallback)(e=>{u("validatorsNumber",e),o()},[u,o]),I=(0,l.useCallback)(e=>{u("stakeAmount",e),u("validatorsNumber",a?(0,c.Yj)(Number(e)):(0,c.iX)(Number(e)/c.m3)),o()},[u,o,a]),_=(0,l.useCallback)(e=>{u("topUpAmount",e),o()},[u,o]),D=(0,l.useMemo)(()=>(0,f.z7)(y(),c.yQ),[y]),O=Math.trunc(Number(t)/c.m3),R=O>=c.yQ?c.yQ:O||c.rl;return{form:{...i,watchValidatorsNumber:b,watchStakeAmount:N,watchTopUpAmount:E,getValidatorsNumber:y,getStakeAmount:T,getTopUpAmount:S},values:{inputElement:e,stakeAmount:T(),topUpAmount:S(),minAvailableValidatorsNumber:1,maxAvailableValidatorsNumber:R,minPossibleValidatorsToStake:c.rl,maxPossibleValidatorsToStake:c.yQ,minPossibleStakeAmount:c.RL,maxPossibleStakeAmount:a?c.TX:c.gO,validatedValidatorsNumber:D,autoCompound:a},events:{onBlur:j,onKeyDown:A,onFocus:w,onChangeValidatorsNumberHandler:k,onChangeStakeAmountHandler:I,onChangeTopUpAmountHandler:_,setAutoCompound:C}}};var g=a(14187),v=a(63904),b=a(32242),N=a(32052),E=a(89138),y=a(56659),T=a(79956),S=a(51743),C=a(49633);let j=()=>{let{batchDeposit:e}=p.Wp.useSfContracts();return(0,C.useMutation)({mutationFn:async t=>{let{pubkeys:a,withdrawalCredentials:n,signatures:l,depositDataRoots:s,stakingAmount:r}=t;return e?(console.log("V1 V1 "),await e.batchDeposit(a,n,l,s,{value:r})):null}})},w=()=>{let{batchDepositV2:e}=p.Wp.useSfContracts();return(0,C.useMutation)({mutationFn:async t=>{let{pubkeys:a,withdrawalCredentials:n,signatures:l,depositDataRoots:s,stakingAmount:r,amountsPerValidator:i}=t;return e&&(null==i?void 0:i.length)?(console.log("V2 V2 "),await e.batchDeposit(a,n,l,s,i,{value:r})):null}})};var A=a(25239),k=a(56042);let I=e=>{let{validatorsNumber:t,stakeAmount:a,modalView:n,handleSuccess:s,withdrawalAddress:i,autoCompound:o}=e,{t:u}=(0,g.Bd)(),[m,x]=(0,l.useState)(void 0),{refetch:h}=(0,k.d)(),C=Number(t||0),I=function(e){let{validatorsNumber:t,stakeAmount:a,handleSuccess:n,setTxError:s,autoCompound:i}=e,{activeChainId:o,activeAccount:u,provider:m}=(0,r.v)(),{url:x}=(0,N.XX)(),{createTxLink:f,addPendingTx:h,addSafeTx:g}=(0,E.F)(),{mutateAsync:v}=j(),{mutateAsync:C}=w(),{onOpenChange:A}=(0,S.E)(),{onOpenChange:k}=(0,b.s)("stakeStepDialog"),{apiStatus:I}=(0,d.a)(),_=!!(null==I?void 0:I.isNewStakingDialogEnabled)&&i,D=(0,c.pt)(String(a),t).map(e=>p.Wp.padBeaconChainData(p.Wp.formatWeiToEther(e.toString())));return(0,l.useCallback)(async e=>{s(void 0);try{let a,l,s,r,i,d,b,N;if(!v||!o||!(null==x?void 0:x.api)||!(null==x?void 0:x.safeTx)||!u||!m)throw Error("Missing required provider or contract.");k("txSigning"),k("txPreparing"),a=_?await T.j.depositChallengeV2({amounts:D.join(","),address:u,serviceURL:x.api}):await T.j.depositChallenge({count:t,address:u,serviceURL:x.api});let E=await m.getSigner().signMessage(a);if(_){let t=await T.j.createValidatorsV2({signature:E,message:a,amounts:D,withdrawalCredentials:e,depositor:u,serviceURL:x.api});l=t.pubkeys,s=t.withdrawalCredentials,r=t.signatures,i=t.depositDataRoots,b=t.depositAmountsEth.map(e=>p.Wp.formatEtherToWei(e)),d=(0,c.$q)(t.depositAmountsEth)}else{let n=await T.j.createValidators({signature:E,message:a,count:t,withdrawalAddress:e,depositor:u,serviceURL:x.api});l=n.pubkeys,s=n.withdrawalCredentials,r=n.signatures,i=n.depositDataRoots,d=p.Wp.formatEtherToWei((32*t).toString())}k("txPending");let S=null==(N=_?await C({pubkeys:l,withdrawalCredentials:s,signatures:r,depositDataRoots:i,amountsPerValidator:b,stakingAmount:d}):await v({pubkeys:l,withdrawalCredentials:s,signatures:r,depositDataRoots:i,stakingAmount:d}))?void 0:N.hash;if(S){let e={type:"classicStake",account:u,chainId:o,hash:S},t=await (0,y.z)(S,x.safeTx);A(!1),t?g({...e,onSuccess:()=>{h({...e,hash:S,link:f(S)}),n(),k("txSubmitted")},onError:()=>{k("txError")}}):(h({...e,link:f(S)}),n(),k("txSubmitted"))}else throw Error("No transaction hash")}catch(e){s(e),k("txError")}},[v,C,u,o,a,t,m,null==x?void 0:x.safeTx,null==x?void 0:x.api,k,h,g,f,A,n,_,D])}({validatorsNumber:C,stakeAmount:a,handleSuccess:s,setTxError:x,autoCompound:o}),_=function(e){let{validatorsNumber:t,onClassicStake:a,setTxError:n}=e,{activeChainId:s,activeAccount:i}=(0,r.v)(),{url:o}=(0,N.XX)(),{createTxLink:d,addPendingTx:c,successTxs:u,failedTxs:m,addSafeTx:p}=(0,E.F)(),{createPod:x,getPod:f,hasPod:h}=(0,A.O)(),{onOpenChange:g}=(0,b.s)("stakeStepDialog"),[v,T]=(0,l.useState)(null),S=!!v&&!!u.get(v.hash)&&t>0,C=!!v&&!!m.get(v.hash);return(0,l.useEffect)(()=>{let e=async()=>{if(i&&await h({address:i})){let e=await f({address:i});if(e)try{await a(e)}catch(e){n(e),g("txError")}}T(null)};S&&e(),C&&(g("txError"),T(null))},[S,C,i,a]),(0,l.useCallback)(async()=>{n(void 0);try{if(!s||!(null==o?void 0:o.safeTx)||!i)throw Error("Missing required provider or contract.");if(await h({address:i})){let e=await f({address:i});if(e)await a(e);else throw Error("Missing pod address")}else{g("eigenpodTxPending");let e=await x();if(null==e?void 0:e.hash){let t={type:"createPod",account:i,chainId:s,hash:e.hash};await (0,y.z)(e.hash,o.safeTx)?p({...t,onSuccess:e=>{c({...t,hash:e,link:d(e)}),T({...t,hash:e,link:d(e)}),g("eigenpodPending")},onError:()=>{g("txError")}}):(c({...t,link:d(e.hash)}),T({...t,link:d(e.hash)}),g("eigenpodPending"))}else throw Error("No transaction hash")}}catch(e){n(e),g("txError")}},[i,s,a,null==o?void 0:o.safeTx])}({validatorsNumber:C,setTxError:x,onClassicStake:I}),D=(0,l.useCallback)(async e=>{let{stakeType:t}=e;try{"eigenlayer"===t?await _():await I(i),h(),(0,f.AE)(C,n?"dialog":"widgetRow")}catch(e){throw console.error("Error in stake transaction:",e),x(e),e}},[C,n,_,I,i]);return{error:m&&(0,v.u1)(m,u),onSubmit:D}},_=()=>{let{beaconDeposit:e}=p.Wp.useSfContracts();return(0,C.useMutation)({mutationFn:async t=>{let{pubkey:a,withdrawalCredentials:n,signature:l,depositDataRoot:s,amount:r}=t;return e?await e.deposit(a,n,l,s,{value:r}):null}})},D=e=>{let{pubkey:t,amount:a,withdrawalAddress:n,handleSuccess:s}=e,{t:i}=(0,g.Bd)(),[o,d]=(0,l.useState)(void 0),{refetch:c}=(0,k.d)(),u=function(e){let{pubkey:t,amount:a,handleSuccess:n,setTxError:s}=e,{activeChainId:i,activeAccount:o,provider:d}=(0,r.v)(),{url:c}=(0,N.XX)(),{createTxLink:u,addPendingTx:m,addSafeTx:x}=(0,E.F)(),{mutateAsync:f}=_(),{onOpenChange:h}=(0,S.E)(),{onOpenChange:g}=(0,b.s)("stakeStepDialog");return(0,l.useCallback)(async()=>{s(void 0);try{if(!f||!i||!(null==c?void 0:c.api)||!(null==c?void 0:c.safeTx)||!o||!d)throw Error("Missing required provider or contract.");g("txPreparing");let e=await T.j.createTopUpDeposit({amount:a.toString(),validatorPubkey:t,serviceURL:c.api});g("txPending");let l=await f({pubkey:t,withdrawalCredentials:e.withdrawalCredentials,signature:e.signature,depositDataRoot:e.depositDataRoot,amount:p.Wp.formatEtherToWei(a.toString())}),s=null==l?void 0:l.hash;if(s){let e={type:"topUp",account:o,chainId:i,hash:s},t=await (0,y.z)(s,c.safeTx);h(!1),t?x({...e,onSuccess:()=>{m({...e,hash:s,link:u(s)}),n(),g("txSubmitted")},onError:()=>{g("txError")}}):(m({...e,link:u(s)}),n(),g("txSubmitted"))}else throw Error("No transaction hash")}catch(e){s(e),g("txError")}},[f,o,i,a,t,d,null==c?void 0:c.safeTx,null==c?void 0:c.api,g,m,x,u,h,n])}({pubkey:t,amount:a,handleSuccess:s,setTxError:d}),m=(0,l.useCallback)(async()=>{try{await u(),c(),(0,f.uv)(t,String(a))}catch(e){throw console.error("Error in topUp transaction:",e),d(e),e}},[t,a,u,n]);return{error:o&&(0,v.u1)(o,i),onSubmit:m}},O=(0,l.createContext)({}),R=()=>(0,l.useContext)(O),L=e=>{var t,a,m,p,x,f,g,v,b;let{children:N}=e,{apiStatus:E}=(0,d.a)(),{activeAccount:y,activeChainId:T}=(0,r.v)(),[S,C]=(0,l.useState)(s.l[0]),[j,w]=(0,l.useState)("createNew"),[A,k]=(0,l.useState)(null),[_,R]=(0,l.useState)({address:y}),{error:L}=(0,o.c)({address:y&&(0,u.gO)(y,"0x02")}),{form:P,values:W,events:M}=h(),V=!!(null==E?void 0:E.isNewStakingDialogEnabled),[z,U]=(0,l.useReducer)((e,t)=>({...e,...t}),B),F=I({validatorsNumber:null==P?void 0:P.getValidatorsNumber(),stakeAmount:W.stakeAmount||0,modalView:z.modalView,withdrawalAddress:_.address,autoCompound:W.autoCompound,handleSuccess:()=>{V?null==P||P.setValue("stakeAmount",0):null==P||P.setValue("validatorsNumber",W.minPossibleValidatorsToStake),R({address:y})}}),H=D({amount:W.topUpAmount||0,pubkey:(null==A?void 0:A.pubkey)||"",withdrawalAddress:_.address,handleSuccess:()=>{V?null==P||P.setValue("topUpAmount",0):null==P||P.setValue("validatorsNumber",W.minPossibleValidatorsToStake),R({address:y})}}),K=(0,i.M)({activeTab:S,setActiveTab:C,queryKey:"type",queryKeyVariants:[...s.l,"eigenlayer"]}),Y=(0,l.useMemo)(()=>{var e,t,a,n,l,s,r,i,o;return V?"topUp"===j?{value:(0,c.BT)(P.watchTopUpAmount)?Number(P.watchTopUpAmount):void 0,error:null==(a=P.formState)||null==(t=a.errors)||null==(e=t.topUpAmount)?void 0:e.message}:{value:(0,c.BT)(P.watchStakeAmount)?Number(P.watchStakeAmount):void 0,error:null==(s=P.formState)||null==(l=s.errors)||null==(n=l.stakeAmount)?void 0:n.message}:{value:(0,c.i3)(P.watchValidatorsNumber)?Number(P.watchValidatorsNumber):void 0,error:null==(o=P.formState)||null==(i=o.errors)||null==(r=i.validatorsNumber)?void 0:r.message}},[P.watchTopUpAmount,P.watchValidatorsNumber,P.watchStakeAmount,null==(m=P.formState)||null==(a=m.errors)||null==(t=a.validatorsNumber)?void 0:t.message,null==(f=P.formState)||null==(x=f.errors)||null==(p=x.stakeAmount)?void 0:p.message,null==(b=P.formState)||null==(v=b.errors)||null==(g=v.topUpAmount)?void 0:g.message,V,j]),G=!!(null==E?void 0:E.isStakingDisabled)||!!L;return(0,l.useEffect)(()=>{P.trigger()},[T]),(0,l.useEffect)(()=>{R({address:y})},[y,z.modalView,S]),(0,l.useEffect)(()=>{V||P.trigger()},[P.getValues("validatorsNumber")]),(0,n.jsx)(O,{value:{...z,form:P,values:{...W,stakeMode:j,selectedValidator:A,verificationAddressError:L},events:{...M,setStakeMode:w,setSelectedValidator:k,resetWidget:()=>{P.reset(),k(null),w("createNew")}},input:Y,tx:"topUp"===j?H:F,type:K,setStates:U,isStakingDisabled:G,withdrawalCredentials:_,setWithdrawalCredentials:R},children:N})},B={type:{activeTab:"classic",setActiveTab:void 0,onTabChange:void 0},modalView:void 0,form:void 0,values:{inputElement:void 0,stakeAmount:0,topUpAmount:0,minPossibleValidatorsToStake:0,maxPossibleValidatorsToStake:0,validatedValidatorsNumber:0,maxAvailableValidatorsNumber:0,minAvailableValidatorsNumber:1,minPossibleStakeAmount:0,maxPossibleStakeAmount:0,autoCompound:void 0,stakeMode:"createNew",selectedValidator:null,verificationAddressError:void 0},events:void 0,input:{value:void 0,error:void 0},tx:{onMint:void 0,onClassicStake:void 0,onSubmit:void 0,error:void 0},withdrawalCredentials:{addressType:void 0,address:void 0,owner:void 0,showWarning:void 0,disableStakeButton:void 0},isStakingDisabled:void 0,setWithdrawalCredentials:()=>{},setStates:()=>{}}},90495:(e,t,a)=>{a.d(t,{f:()=>n}),a(32);let n={retry:void 0,retryDelay:void 0}},91856:(e,t,a)=>{a.d(t,{H:()=>v,n:()=>b});var n=a(6029),l=a(55729),s=a(21505),r=a(32242),i=a(56042),o=a(91752),d=a(4754),c=a(32052),u=a(79956),m=a(63904),p=a(14187),x=a(57319),f=a(89138),h=a(56659);let g=(0,l.createContext)(void 0),v=e=>{var t;let{children:a}=e,{t:v}=(0,p.Bd)(),{url:b}=(0,c.XX)(),[N,E]=(0,l.useState)(void 0),[y,T]=(0,l.useState)([]),[S,C]=(0,l.useState)(),{onOpenChange:j}=(0,r.s)("consolidationDialog"),{validators:w}=(0,i.d)(),{activeAccount:A,provider:k,activeChainId:I,walletInfo:_}=(0,d.v)(),{createTxLink:D,addPendingTx:O,addSafeTx:R}=(0,f.F)(),L=(0,l.useCallback)(e=>{E(e)},[]),B=(0,l.useCallback)(e=>{T(e)},[]),P=null==_||null==(t=_.name)?void 0:t.includes("Safe"),W=1===y.length&&Number(N)===Number(y[0]),M=w.filter(e=>e.withdrawalCredentials.includes(o.dz)),V=y.map(e=>({sourceValidator:String(e),targetValidator:String(N)})),z=(0,l.useCallback)(async()=>{if(!A||!k||!(null==b?void 0:b.api)||!V.length||!I)throw Error("Missing required values");try{j("txSigning");let e=(await u.j.consolidationRequest({serviceURL:b.api,data:V})).map(e=>({to:e.to,data:e.data,value:e.feeValueInWei,chainId:e.chainId})),t=await (0,x.v)(e,A,k);if(t&&t.length>0){for(let e of t){if(!e)continue;let t={type:"consolidation",account:A,chainId:I,hash:e};(P?await (0,h.z)(e,b.safeTx):void 0)?R({...t,onSuccess:()=>{O({...t,hash:e,link:D(e)})},onError:()=>{j("txError")}}):O({...t,link:D(e)})}j("txSubmitted")}}catch(e){C((0,m.u1)(e,v)),j("txError")}},[V]);return(0,n.jsx)(g,{value:{selectedTargetValidator:N,selectedSourceValidators:y,errorMessage:S,pectraValidators:M,isUpgradingCredentials:W,setSelectedTargetValidator:L,setSelectedSourceValidators:B,onConsolidate:z,clearSelection:()=>{B([]),L()},calculateTotalBalance:()=>{if(!N)return s.gH.from(0);let e=w.find(e=>e.index===N),t=w.filter(e=>y.includes(e.index)),a=e?s.gH.from(e.balance):s.gH.from(0),n=t.reduce((e,t)=>e.add(s.gH.from(t.balance)),s.gH.from(0));return W?a:a.add(n)}},children:a})},b=()=>{let e=(0,l.useContext)(g);if(void 0===e)throw Error("useConsolidationContext must be used within a ConsolidationContextProvider");return e}},96136:(e,t,a)=>{a.d(t,{aK:()=>c,eH:()=>o,oo:()=>i,z_:()=>r});var n=a(21505),l=a(63226),s=a(56191);a(49974);let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",a=arguments.length>2?arguments[2]:void 0;if(!e||0===Number(e)&&!a)return s.AA.Hh;let n=l.Wp.formatWeiToEther(e);switch(t){case"beaconChain":return"".concat(l.Wp.padBeaconChainData(n)," ETH");case"executionLayer":return"".concat(l.Wp.padExecutionLayerData(n)," ETH");default:return e}},i=(e,t,a)=>{let r=d(t);if(!e||!r)return s.AA.Hh;let i=l.Wp.formatWeiToEther(n.gH.from(e).mul(t).toString(),9);return"beaconChain"===a?l.Wp.padBeaconChainData(i):l.Wp.padExecutionLayerData(i)},o=(e,t)=>d(t)?0!==t&&e?e:"0.00":s.AA.Hh,d=e=>!!e||0===e,c=e=>Math.trunc(100*Number(e))/100},96741:(e,t,a)=>{a.d(t,{_:()=>r});var n=a(55729),l=a(87903),s=a(4754);let r=()=>{let{connectionStage:e,activeChainId:t}=(0,s.v)(),{apiStatus:a,isLoading:r}=(0,l.a)(),{isDashboardUnderMaintenance:i,isTestnetDashboardUnderMaintenance:o}=a||{};return{isMaintenanceMode:(0,n.useMemo)(()=>560048===t?o:i,[t,i,o,e]),maintenanceMessage:null==a?void 0:a.message,isLoading:r}}},96869:(e,t,a)=>{a.d(t,{p:()=>o});var n=a(6029),l=a(95669),s=a.n(l),r=a(14187),i=a(59278);let o=e=>{let{title:t,description:a,image:l,keywords:o,themeMeta:d,...c}=e,{t:u}=(0,r.Bd)(),{resolvedTheme:m}=(0,i.D)();return(0,n.jsxs)(s(),{...c,children:[(0,n.jsx)("title",{children:"".concat(t||u("common.META.TITLE_TEXT")," | stakefish")}),(0,n.jsx)("meta",{httpEquiv:"x-ua-compatible",content:"ie=edge"}),(0,n.jsx)("meta",{name:"yandex-verification",content:"4016a7076e28de6f"}),(0,n.jsx)("meta",{name:"baidu-site-verification",content:"nBa2RJJdzb"}),(0,n.jsx)("meta",{name:"naver-site-verification",content:"7595a900bbd6f486f3fc1df5ce644f0f52f00489"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width,minimum-scale=1.0,initial-scale=1.0,maximum-scale=1.0,shrink-to-fit=no"}),(0,n.jsx)("meta",{name:"referrer",content:"no-referrer-when-downgrade"}),(0,n.jsx)("meta",{name:"description",content:a||u("common.META.DESCRIPTION_TEXT")}),(0,n.jsx)("meta",{name:"keywords",content:o||u("common.META.KEYWORDS")}),(0,n.jsx)("meta",{property:"og:image",content:l||"/website-preview-image.png"}),(0,n.jsx)("meta",{property:"og:image:type",content:"image/png"}),(0,n.jsx)("meta",{property:"og:image:width",content:"1080"}),(0,n.jsx)("meta",{property:"og:image:height",content:"640"}),(0,n.jsx)("meta",{property:"og:title",content:t||u("common.META.TITLE_TEXT")}),(0,n.jsx)("meta",{property:"og:description",content:a||u("common.META.DESCRIPTION_TEXT")}),(0,n.jsx)("meta",{property:"og:type",content:"website"}),(0,n.jsx)("meta",{property:"og:url",content:"https://stake.fish"}),(0,n.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,n.jsx)("meta",{name:"twitter:creator",content:"@stakefish"}),(0,n.jsx)("meta",{name:"twitter:title",content:t||u("common.META.TITLE_TEXT")}),(0,n.jsx)("meta",{name:"twitter:description",content:a||u("common.META.DESCRIPTION_TEXT")}),(0,n.jsx)("meta",{name:"twitter:image",content:l||"/website-preview-image.png"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,n.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-touch-icon.png"}),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon-32x32.png"}),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon-16x16.png"}),(0,n.jsx)("meta",{name:"msapplication-TileColor",content:"#B4E600"}),(0,n.jsx)("link",{rel:"manifest",href:"/site.webmanifest"}),d||(0,n.jsx)("meta",{name:"theme-color",content:"dark"===m?"#1B1D21":"light"===m?"#FFFFFF":"transparent"})]})}},97184:(e,t,a)=>{a.d(t,{P:()=>l});var n=a(7588);let l=()=>((0,n.L)(),null)},97850:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(6029),l=a(1909),s=a(56191);let r=e=>{let{name:t,rules:a,defaultValue:r,control:i,buttonHelper:o,inputProps:d}=e,{id:c,labelProps:u,...m}=d;return(0,n.jsx)(l.xI,{name:t,rules:a,defaultValue:r,control:i,render:e=>{let{field:a}=e;return(0,n.jsx)(s.pd,{id:null!=c?c:t,labelProps:u,buttonHelper:o,...a,...m})}})}},97880:(e,t,a)=>{a.d(t,{Y:()=>F});var n=a(6029),l=a(55729),s=a(82203),r=a.n(s),i=a(17648),o=a.n(i),d=a(81278),c=a(14187),u=a(56191),m=a(63226),p=a(4754),x=a(7477),f=a(45537),h=a(75713);let g=()=>{let{t:e}=(0,c.Bd)(),{down:t}=(0,x.P)(),{connectionStage:a,openModal:l}=(0,p.v)();return"readonly"!==a||(null==t?void 0:t.salmon)?null:(0,n.jsx)("div",{className:"items-center justify-center hidden salmon:flex",children:(0,n.jsxs)("div",{className:"px-3 py-2.5 flex items-baseline gap-2",children:[(0,n.jsx)(u.In,{iconKey:"warning",size:12,className:"self-center text-itemSecondaryDefault mt-0.5"}),(0,n.jsxs)("p",{className:"font-semibold text-[12px] text-itemSecondaryDefault",children:[e("dashboard.KEYS.READ_ONLY")," ",(0,n.jsx)("span",{className:"hidden tuna:inline",children:e("dashboard.KEYS.READ_ONLY_EXTRA")})]}),(0,n.jsx)(u.$n,{application:!0,size:"sm",variant:"text",className:"hidden gap-1 p-0 underline underline-offset-1 whale:inline-flex",onClick:()=>null==l?void 0:l(),children:e("common.WEB3.CONNECT_WALLET_PROMPT_SHORT")})]})})};var v=a(35394),b=a(22864),N=a(56042),E=a(59961);let y=["Babylon"],T={ethereum:{displayName:"Ethereum",logo:"ethLogo",link:"/dashboard"},babylon:{displayName:"Babylon",logo:"babylonLogo",link:"https://babylon.stake.fish"}},S={Mainnet:"Ethereum",Hoodi:"Hoodi",Babylon:"Babylon Bitcoin"},C=e=>y.includes(e)?e:m.Bt[e],j=e=>{var t;let{className:a}=e,{t:s}=(0,c.Bd)(),{pathname:r,query:i}=(0,d.useRouter)(),{totalItems:o}=(0,N.d)(),{activeAccount:m,connectionStage:x,activeChainId:f}=(0,p.v)(),h=(0,E.m)(),g=(0,v.m)(e=>e.validatorsCount),y=(0,v.m)(e=>e.setValidatorsCount),S="".concat(i.address?"?address=".concat(i.address):"").concat(i.address&&i.network?"&network=".concat(i.network):""),C=(null==(t=T[h])?void 0:t.link)||T.ethereum.link;(0,l.useEffect)(()=>{m&&void 0!==o&&y(o),(m||!g||"disconnected"!==x)&&(r.includes("dashboard")||"readonly"!==x)||y(null)},[f,x,m,r,o]);let j=r===C;return(0,n.jsx)(u.$n,{variant:"text",...(0,b.bI)(C),href:"".concat(C).concat(S),className:(0,u.cx)("!no-underline",a),children:(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)("span",{className:(0,u.cx)("capitalize text-desktopCallout underline-offset-1",j?"underline":"no-underline hover:underline"),children:s("common.KEYS.DASHBOARD_SHORT")}),"babylon"!==h&&null!==g&&(0,n.jsx)(u.m_,{content:s("application.KEYS.TOTAL_VALIDATORS_TOOLTIP"),contentProps:{align:"center",side:"bottom"},triggerProps:{className:"flex px-[5px] py-[2px] rounded-full text-mobileTag1 bg-backgroundSecondaryDefault ring-1 ring-itemSecondaryMute"},children:g})]})})};var w=a(32242);let A=e=>{let{list:t}=e,{t:a}=(0,c.Bd)(),[s,i]=(0,l.useState)(!1),{onOpenChange:o}=(0,w.s)("shortcutsDialog"),{down:d}=(0,x.P)(),m=null==d?void 0:d.flounder;return(0,l.useEffect)(()=>{m&&i(!1)},[m]),(0,n.jsxs)(u.ms.bL,{open:s,onOpenChange:e=>i(e),modal:!1,children:[(0,n.jsx)(u.ms.l9,{asChild:!0,children:(0,n.jsx)(u.$n,{size:"sm",variant:"menuItem",color:"transparent",className:"normal-case !no-underline flex-start justify-start text-start w-full",endIcon:{iconKey:s?"chevronUp":"chevronDown",size:14},children:a("application.KEYS.TOOLS")})}),(0,n.jsxs)(u.ms.UC,{className:"w-[320px] ",align:"start",side:"bottom",sideOffset:11,children:[(0,n.jsx)(u.ms.q7,{asChild:!0,children:(0,n.jsx)(u.$n,{application:!0,size:"sm",variant:"menuItem",startIcon:{iconKey:"keyboard",size:14},onClick:()=>{o(!0),i(!1)},children:a("application.KEYS.SHORTCUTS")})},"shortcuts"),t.map((e,t)=>{let{url:a,title:l,iconKey:s}=e;return(0,n.jsx)(u.ms.q7,{asChild:!0,children:(0,n.jsx)(u.$n,{size:"sm",Element:r(),href:a,variant:"menuItem",className:"mb-px",startIcon:{iconKey:s,size:14},children:l})},t)})]})]})};var k=a(3249),I=a(47165),_=a(33347),D=a(32052),O=a(89138),R=a(27160);let L={src:"/_next/static/media/default-avatar.94f630be.svg"},B=e=>{var t;let{onDisconnect:a}=e,{t:l}=(0,c.Bd)(),{url:s}=(0,D.XX)(),{activeAccount:r,errorMessage:i,deactivate:o,walletInfo:d}=(0,p.v)(),{accountTxs:m}=(0,O.F)(),{mempoolApiUrl:x}=(0,_.RY)(),f="babylon"===(0,E.m)(),h=null==d||null==(t=d.name)?void 0:t.includes("Safe"),g=f?x:null==s?void 0:s.etherScan,v=!!i,N=(null==i?void 0:i.key)==="WALLET_WRONG_CHAIN",y={claim:l("application.KEYS.CLAIM_TRANSACTION"),mint:l("application.KEYS.MINT_TRANSACTION"),classicStake:l("application.KEYS.STANDARD_STAKE_TRANSACTION"),exit:l("application.KEYS.EXIT_TRANSACTION"),withdrawNFT:l("application.KEYS.WITHDRAW_NFT_TRANSACTION"),createPod:l("application.KEYS.CREATE_POD_TRANSACTION"),topUp:l("application.KEYS.TOPUP_TRANSACTION"),partialWithdrawal:l("application.KEYS.PARTIAL_WITHDRAWAL_TRANSACTION"),consolidation:l("application.KEYS.CONSOLIDATION_TRANSACTION")};return r&&0!==r.length?(0,n.jsxs)("div",{className:"-mt-2 space-y-2.5",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"font-semibold text-callout text-itemSecondaryDefault",children:l("application.KEYS.CONNECTED_WITH",{providerName:null==d?void 0:d.name})}),!h&&(0,n.jsx)(u.$n,{application:!0,size:"xs",color:"secondary",variant:"outline",onClick:()=>{a(),o()},className:"px-2 py-1.5",children:l("application.KEYS.DISCONNECT")})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)("div",{className:"size-4 min-w-4 min-h-4 rounded-full -mb-0.5",style:{background:"url(".concat(L.src,") no-repeat center / cover")}}),(0,n.jsx)(u.Mz,{address:r,externalLink:"".concat(g,"/address/").concat(r),className:"font-semibold",wrapperClassName:"overflow-hidden"})]}),v&&(0,n.jsxs)("div",{className:"!mt-5 space-y-3",children:[(0,n.jsx)(u.yh,{variant:"error",text:N?l("common.WEB3.ERROR_WRONG_NETWORK_PROMPT"):"".concat(l("application.KEYS.ERROR_WALLET_CONNECTION"),". ").concat(null==i?void 0:i.subtitle)}),(0,n.jsx)(R.u,{className:"w-full"})]}),!v&&(0,n.jsx)("div",{children:(null==m?void 0:m.length)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.wv,{className:"my-4"}),(0,n.jsx)("span",{className:"font-semibold text-callout text-itemSecondaryDefault",children:l("application.KEYS.PENDING_TRANSACTIONS")}),(0,n.jsx)("div",{className:"mt-1",children:m.map(e=>(0,n.jsxs)("div",{className:"flex justify-between mb-0.5",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("span",{className:"font-semibold text-callout",children:y[e.type]}),(0,n.jsx)(u.mP,{size:"goldfish"})]}),!!e.link&&(0,n.jsx)(u.$n,{...(0,b.bI)(e.link),href:e.link,size:"sm",color:"secondary",variant:"text",className:"!p-0 normal-case !m-0 text-callout gap-1.5",endIcon:{iconKey:"share",size:14,className:"!m-0"},children:l("common.WEB3.VIEW_ON_ETHER_SCAN")})]},e.type))})]}):(0,n.jsx)("div",{className:"p-4 mt-4 text-center bg-backgroundSecondaryDefault text-itemSecondaryDefault",children:(0,n.jsx)("p",{className:"font-sans text-[12px] perch:w-2/5 m-auto",children:l("application.KEYS.TRANSACTIONS_APPEAR_HERE")})})})]}):(0,n.jsx)(u.yh,{text:null==i?void 0:i.title,variant:"error"})},P=()=>{var e;let{t}=(0,c.Bd)(),{down:a}=(0,x.P)(),{open:s,onOpenChange:r}=(0,w.s)("walletCapsuleDialog"),{activeChainId:i,activeAccount:o,openModal:d,connectionStage:m,exitReadonly:f,walletInfo:h}=(0,p.v)(),{accountTxs:g}=(0,O.F)(),v=(0,l.useMemo)(()=>null==g?void 0:g.filter(e=>e.chainId===i),[g,i]),b="connected"===m&&(null==v?void 0:v.length),N=t(o?"common.WEB3.ACCOUNT":"common.WEB3.CONNECT_WALLET_PROMPT_SHORT"),y="babylon"===(0,E.m)(),T=null==h||null==(e=h.name)?void 0:e.includes("Safe");return(0,n.jsxs)(u.lG.bL,{open:!!s,onOpenChange:()=>{"readonly"===m&&f(),"disconnected"!==m||T||null==d||d(),("connected"===m||T&&o)&&r(!s)},children:[a&&(null==a?void 0:a.tuna)!==null&&(0,n.jsx)(u.lG.l9,{asChild:!0,children:(0,n.jsx)(u.Rr,{className:"!py-[7px] flounder:!py-1.5",processingTxCopy:b?t("common.WEB3.PENDING_TX",{count:null==g?void 0:g.length}):void 0,state:"connected"!==m&&"disconnected"!==m?"readonly"===m?"disconnected":"warning":T&&o?"connected":m,address:o&&u.Wp.getTruncatedAddress({address:o,prefix:y?"":"0x",left:(null==a?void 0:a.tuna)?4:6}),disabled:!1,connectCopy:t((null==a?void 0:a.trout)?"common.WEB3.CONNECT_WALLET_PROMPT_SHORT_MOBILE":"common.WEB3.CONNECT_WALLET_PROMPT_SHORT")})}),(0,n.jsx)(u.lG.UC,{title:N,innerClassName:"max-w-[463px] flounder:w-[463px] flounder:p-5",titleProps:{className:"text-h5"},children:(0,n.jsx)(B,{onDisconnect:()=>r(!1)})})]})},W=e=>{let{list:t}=e,{t:a}=(0,c.Bd)(),{pathname:s}=(0,d.useRouter)(),[r,i]=(0,l.useState)(!1),{up:o}=(0,x.P)(),m=null==o?void 0:o.flounder;(0,l.useEffect)(()=>{m&&i(!1)},[m]);let p=t.map(e=>{let{url:t,...a}=e;return{active:!!(t&&(t===s||t.includes(s))),onClick:()=>i(!1),...t?{...(0,b.bI)(t),url:t}:void 0,...a}});return(0,n.jsxs)(u.ms.bL,{open:r,onOpenChange:e=>i(e),modal:!1,children:[(0,n.jsx)(u.ms.l9,{asChild:!0,children:(0,n.jsx)(u.$n,{size:"md",color:"secondary",variant:"outline",className:"ring-1 ring-inset",icon:{iconKey:"menu",size:16},children:a("application.KEYS.TOOLS")})}),(0,n.jsx)(u.ms.UC,{className:"w-[320px]",align:"center",side:"bottom",sideOffset:11,list:p})]})},M=()=>{let[e,t]=(0,l.useState)(!1),[a,s]=(0,l.useState)(!1),{down:r}=(0,x.P)(),i=null==r?void 0:r.salmon,o=(0,E.m)(),{pathname:c}=(0,d.useRouter)();return((0,l.useEffect)(()=>{s(!0)},[]),a)?(0,n.jsxs)(u.ms.bL,{modal:!1,open:e,onOpenChange:e=>{t(!!e)},children:[(0,n.jsx)(u.ms.l9,{asChild:!0,children:(0,n.jsx)(u.$n,{application:!0,size:"sm",color:"secondary",startIcon:{iconKey:T[o].logo,size:14},endIcon:{iconKey:e?"chevronUp":"chevronDown",size:14},className:(0,u.cx)("data-[state=open]:ring-itemSecondaryDefault hover:ring-itemSecondaryDefault ring-itemPrimaryDefaultAlt2 ring-1 ring-inset disabled:backgroundSecondaryOnDefault h-full py-[9px] flounder:!py-[9px] salmon:!py-1.5 gap-1 !px-3"),children:i?void 0:T[o].displayName})}),(0,n.jsx)(u.ms.UC,{align:"end",sideOffset:11,className:"w-[160px] pointer-events-auto",children:m.Xs.map((e,t)=>{let a=T[e].link===c;return(0,n.jsx)(u.ms.q7,{className:"mb-px",asChild:!0,children:(0,n.jsx)(u.$n,{size:"sm",variant:"menuItem",endIcon:a?{iconKey:"checkCircleFilled",size:14}:void 0,disabled:a,className:(0,u.cx)("justify-between disabled:backgroundSecondaryOnDefault",a&&"!bg-backgroundPrimaryMute"),href:T[e].link,children:T[e].displayName})},t)})})]}):null},V=()=>{var e;let{query:t,pathname:a}=(0,d.useRouter)(),{connectionStage:n,switchNetwork:l,walletInfo:s,activeChainId:r}=(0,p.v)(),i="readonly"===n;return{shouldShow:("connected"===n||i)&&"unsupportedConnected"!==n&&!(null==s||null==(e=s.name)?void 0:e.includes("Safe")),shouldDisable:"loading"===n,chainName:m.Bt[r||m.cG],isLink:i,getLinkButtonProps:e=>{let n=o()(e),l=new Map(Object.entries(t));l.set("network",n),l.delete("tokenId");let s=a.includes("[tokenId]")&&t.tokenId&&"string"==typeof t.tokenId?a.replace("[tokenId]",t.tokenId):a,r=new URLSearchParams(Object.fromEntries(l)).toString();return{as:"a",href:"".concat(s,"?").concat(r)}},getDefaultButtonProps:e=>({onClick:async()=>{await (null==l?void 0:l(e))}})}},z=()=>{let[e,t]=(0,l.useState)(!1),{shouldShow:a,shouldDisable:s,chainName:r,isLink:i,getLinkButtonProps:o,getDefaultButtonProps:d}=V(),{down:c}=(0,x.P)(),p=null==c?void 0:c.salmon,f=a?[...m.lk,...y]:[m.lk[0],...y],h=(e,t)=>e===T.babylon.displayName?{href:T.babylon.link}:a||i?i?o(t):d(e):{href:T.ethereum.link,...(0,b.bI)(T.ethereum.link)};return(0,n.jsxs)(u.ms.bL,{modal:!1,open:e,onOpenChange:e=>{t(!!e)},children:[(0,n.jsx)(u.ms.l9,{asChild:!0,disabled:s,children:(0,n.jsx)(u.$n,{application:!0,size:"sm",color:"secondary",startIcon:{iconKey:"ethLogo",size:14},endIcon:{iconKey:e?"chevronUp":"chevronDown",size:14},className:(0,u.cx)("data-[state=open]:ring-itemSecondaryDefault hover:ring-itemSecondaryDefault ring-itemPrimaryDefaultAlt2 ring-1 ring-inset disabled:backgroundSecondaryOnDefault h-full py-[9px] flounder:!py-[9px] salmon:!py-1.5 gap-1 !px-3"),children:p?void 0:a?S[r]:"Network"})}),(0,n.jsx)(u.ms.UC,{align:"end",sideOffset:11,className:"w-[160px] pointer-events-auto",children:f.map((e,t)=>{let a=C(e),l=r===a;return(0,n.jsx)(u.ms.q7,{className:"mb-px",asChild:!0,children:(0,n.jsx)(u.$n,{size:"sm",variant:"menuItem",endIcon:l?{iconKey:"checkCircleFilled",size:14}:void 0,disabled:l,className:(0,u.cx)("justify-between disabled:backgroundSecondaryOnDefault",l&&"!bg-backgroundPrimaryMute"),...h(e,a),children:S[a]})},t)})})]})},U=()=>{let[e,t]=(0,l.useState)(!1),a=(0,E.m)();return((0,l.useEffect)(()=>{t(!0)},[]),e)?"ethereum"===a?(0,n.jsx)(z,{}):(0,n.jsx)(M,{}):null},F=()=>{var e;let{t}=(0,c.Bd)(),{up:a}=(0,x.P)(),s=(0,u.r1)("(min-width: 501px)"),{title:i,toggleStakeDialog:v}=(0,I.o)()||{},{activeChainId:b,walletInfo:N}=(0,p.v)(),{query:y}=(0,d.useRouter)(),T="ethereum"===(0,E.m)(),S=null==N||null==(e=N.name)?void 0:e.includes("Safe"),C=(0,l.useMemo)(()=>{let e="?network=".concat(o()(m.Bt[b||m.cG])),n=y.address?"&address=".concat(y.address):"",l="".concat(e).concat(n),r=[{title:t("application.KEYS.CHANGE_CREDENTIALS_CTA"),url:"/ethereum/change-credentials".concat(l),iconKey:"tool"},{title:t("application.KEYS.EXIT_TOOL"),url:"/ethereum/exit-request".concat(l),iconKey:"exit"}];return(null==a?void 0:a.perch)?r:s||!v?[{title:t("common.KEYS.DASHBOARD_SHORT"),url:"/dashboard"},...r]:T?[{title:t("common.KEYS.DASHBOARD_SHORT"),url:"/dashboard"},{title:i,onClick:()=>v(!0)},...r]:[{title:t("common.KEYS.DASHBOARD_SHORT"),url:"/dashboard"},{title:i,onClick:()=>v(!0)}]},[a,s,i,b,v,y]),w=(0,n.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(null==a?void 0:a.perch)&&(0,n.jsx)(j,{}),(null==a?void 0:a.flounder)&&(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[T&&(0,n.jsx)(A,{list:C}),(0,n.jsx)(k.D,{})]})]}),_=(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[s&&!(null==a?void 0:a.flounder)&&(0,n.jsx)(k.D,{className:"text-desktopCallout flounder:text-desktopCallout"}),(0,n.jsx)(h.H,{activateHeader:!0,variant:(null==a?void 0:a.flounder)?"primary":"outline",color:(null==a?void 0:a.flounder)?"transparent":"secondary",className:"!p-2",badgeClassName:"hidden flounder:block"}),(0,n.jsx)(f.G,{buttonProps:{variant:"outline",color:"secondary",className:"ring-1 ring-inset !p-2"}}),!(null==a?void 0:a.flounder)&&(0,n.jsx)(W,{list:C})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[!S&&(0,n.jsx)(U,{}),(0,n.jsx)(P,{})]})]});return(0,n.jsx)(u.Y9,{filled:!0,bordered:!0,pictogramOnly:!0,ElementLogo:r(),frontMenu:w,centerMenu:(0,n.jsx)(g,{}),actionsContent:_,className:"w-screen py-2"})}},99027:(e,t,a)=>{a.d(t,{l:()=>n});let n=["classic","nft"]},99481:(e,t,a)=>{a.d(t,{w:()=>s});var n=a(6029),l=a(56191);let s=e=>{let{type:t,className:a}=e;return(0,n.jsx)("div",{className:(0,l.cx)("app-table-label",{ETH1:"",EOA:"",COMP:"label-comp",BLS:"label-bls",EPOD:"label-epod",NFT:"label-nft",SAFE:"label-safe",nested:"label-nested","N/A":"label-unknown"}[t||"ETH1"],a),children:"nested"!==t&&(0,n.jsx)("span",{className:"text-[12px] font-mono font-semibold",children:t})})}}}]);