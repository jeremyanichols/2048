(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9724],{12273:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return a(96846)}])},96846:(e,t,a)=>{"use strict";a.r(t),a.d(t,{__N_SSG:()=>aE,default:()=>aA});var l=a(6029),n=a(55729),r=a(81278),i=a(61409),s=a(7588),o=a(22174),d=a(14187),c=a(56191),u=a(51743),h=a(3249),m=a(27160),x=a(4754);let p=()=>{let{t:e}=(0,d.Bd)();return(0,l.jsx)(c.Vz,{title:e("common.KEYS.ERROR_NETWORK"),subtitle:e("dashboard.KEYS.ERROR_LOADING_VALIDATORS"),cta:(0,l.jsx)(c.$n,{application:!0,size:"md",variant:"outline",className:"w-full",onClick:()=>window.location.reload(),children:e("common.KEYS.TRY_AGAIN")})})},g=()=>{let{t:e}=(0,d.Bd)();return(0,l.jsx)(c.Vz,{title:e("dashboard.KEYS.INVALID_READONLY_ADDRESS_TITLE"),subtitle:e("dashboard.KEYS.INVALID_READONLY_ADDRESS_MESSAGE"),cta:(0,l.jsx)(c.$n,{application:!0,size:"md",variant:"outline",className:"w-full",as:"a",href:"/dashboard",children:e("dashboard.KEYS.BACK_TO_DASHBOARD")})})},b=()=>{let{t:e}=(0,d.Bd)(),{connectionStage:t}=(0,x.v)(),{onOpenChange:a}=(0,u.E)();return(0,n.useEffect)(()=>{("connected"===t||"disconnected"===t)&&a(!0)},[t]),(0,l.jsx)(c.a_,{children:(0,l.jsx)(c.MP,{title:e("dashboard.KEYS.EMPTY_VIEW_TITLE"),cta:(0,l.jsx)(h.D,{application:!0,size:"md",color:"inverse"})})})},v=()=>{let{t:e}=(0,d.Bd)();return(0,l.jsx)(o.x,{children:(0,l.jsx)(c.MP,{className:"mt-2",title:e("dashboard.KEYS.BUILDING_DASHBOARD_TITLE"),subtitle:e("dashboard.KEYS.BUILDING_DASHBOARD_MESSAGE")})})},f=()=>{let{t:e}=(0,d.Bd)();return(0,l.jsx)(c.a_,{children:(0,l.jsx)(c.MP,{title:e("dashboard.KEYS.CONNECT_TO_SEE_DASHBOARD"),cta:(0,l.jsx)(m.u,{})})})};var w=a(19012),y=a(35394),S=a(8066),N=a(17121),E=a(7477),A=a(32052),T=a(11709),j=a(86510),k=a(52124);let C=e=>{let{children:t,id:a}=e;return(0,l.jsx)(c.lG.UC,{variant:"drawer",id:"validator-".concat(a),innerClassName:"max-w-full w-full flounder:w-[max(840px,80vw)] whale:w-[1140px] pt-5 px-5 pb-15 flounder:pt-7 flounder:pb-14 flounder:px-14",closeButtonProps:{size:"lg",className:"top-7 flounder:top-7 flounder:right-3 flounder:p-2",icon:{size:20}},children:t})},I=(e,t,a)=>{switch(t){case"prev":return 0===e?void 0:(e-1+a)%a;case"next":return e===a-1?void 0:(e+1)%a;case"top":return 0;case"bottom":return a-1}},R=(e,t,a)=>{if(a)return e.find(e=>e[t]===a)};var L=a(1153),D=a(32242);let _=(e,t)=>{let a=(0,r.useRouter)(),l=(0,L.k)(),{onOpenChange:i,open:s}=(0,D.s)("validatorDetailsDialog"),[o,d]=(0,n.useState)(null),c=(0,n.useCallback)(e=>{let t=new Map(Object.entries(a.query));Object.entries(e).forEach(e=>{let[a,l]=e;null===l?t.delete(a):t.set(a,l)}),a.push({query:Object.fromEntries(t)},void 0,{shallow:!0})},[a]),u=(0,n.useMemo)(()=>{if(l)return R(e,"number"==typeof l?"index":"pubkey",l)},[l,t]),h=(0,n.useCallback)(e=>{d(e),i(!0)},[]),m=(0,n.useCallback)(()=>{d(null),i(!1)},[]),x=(0,n.useCallback)(t=>{if(!o)return null;let a=I(e.findIndex(e=>e.pubkey===o.pubkey),t,e.length);if(void 0===a)return null;let l=e[a];return d(l),l},[o,e]),p=(0,n.useCallback)(()=>{c({validator:null}),m()},[m,a.query]),g=(0,n.useCallback)(e=>{let t=x(e);t&&c({validator:String(t.index||t.pubkey)})},[x,a.query]),b=(0,n.useCallback)(t=>{if(!e||!Array.isArray(e))return void console.error("sortedRows is undefined or not an array");let a=e[t];if(!a)return void console.error("No validator found at index ".concat(t));c({validator:String(a.index||a.pubkey)}),h(a)},[e,a,s]);return(0,n.useEffect)(()=>{if(!u)return void m();h(u)},[u]),{dialogOpened:s,dialogValidatorData:o,navigateValidator:x,handleDialogClose:p,handleNavigate:g,handleRowClick:b}};var K=a(89187),W=a(49974),B=a(30755);let O=e=>{let{sortedRows:t}=e,{t:a}=(0,d.Bd)(),{isStakingDisabled:n,form:r}=(0,K.Z)(),{balanceInEther:i}=(0,B.A)(),s=Number(null==r?void 0:r.getValues("validatorsNumber")),o=null==r?void 0:r.getValues("stakeAmount"),u=Number(i)<W.m3||Number(i)<Number(o);return(0,l.jsx)(c.XI.fI,{highlight:!0,className:"absolute left-0 w-full !border-0",style:{top:"".concat((t.length+1)*T.FL,"px"),height:"".concat(T.FL-2,"px")},children:(0,l.jsx)(c.XI.fv,{expandCell:!0,className:"p-0",style:{minWidth:c.Wp.spacingToPx(143.5)},children:(0,l.jsxs)(c.az,{flex:!0,className:"gap-2",children:[u?(0,l.jsx)(c.m_,{className:"font-mono",content:a("stake.INSUFFICIENT_BALANCE"),contentProps:{align:"start",alignOffset:16},children:(0,l.jsx)(M,{})}):(0,l.jsx)(M,{}),(0,l.jsx)(P,{disabled:u||n||!(s>0)})]})})},"stake-widget")},P=e=>{let{disabled:t}=e,{t:a}=(0,d.Bd)(),{withdrawalCredentials:r,setStates:i}=(0,K.Z)(),{onOpenChange:s}=(0,D.s)("stakeStepDialog"),o=(0,n.useCallback)(()=>{i({modalView:!1}),s((null==r?void 0:r.showWarning)?"confirmWithdrawalCredentials":"initial")},[]);return(0,l.jsx)(c.$n,{application:!0,size:"sm",color:"inverse",disabled:t,onClick:o,children:a("common.KEYS.STAKE_NOW")})},M=()=>{let{t:e}=(0,d.Bd)(),{form:t,setWithdrawalCredentials:a}=(0,K.Z)(),{activeAccount:r}=(0,x.v)(),{balanceInEther:i}=(0,B.A)(),s=W.yQ,o=(0,n.useMemo)(()=>s*W.m3,[s]),u=Number(null==t?void 0:t.getValues("validatorsNumber")),h=null==t?void 0:t.getValues("stakeAmount"),m=(0,n.useMemo)(()=>{let e=[];for(let t=W.m3;t<=o;t+=W.m3)e.push(t);return e},[o,W.m3]);return(0,n.useEffect)(()=>{a({address:r})},[]),(0,l.jsx)(c.A5.bL,{value:String(h),onValueChange:e=>{null==t||t.setValue("stakeAmount",e),null==t||t.setValue("validatorsNumber",(0,W.iX)(Number(e)/W.m3))},triggerProps:{children:u?"".concat(u," ").concat(1===u?e("dashboard.KEYS.VALIDATOR"):e("stake.VALIDATORS")):e("stake.STAKE_ROW_NUMBER_OF_VALIDATORS")},disabled:Number(i)<W.m3,options:m.map((t,a)=>{let n=t>Number(i),r=(0,l.jsxs)(c.az,{className:"whitespace-nowrap",children:[a+1," ",(0,l.jsxs)("span",{className:"font-normal",children:["(",t," ETH)"]})]}),s=n?(0,l.jsx)(c.m_,{content:e("stake.INSUFFICIENT_BALANCE"),className:"font-mono",contentProps:{align:"start"},children:r}):r;return{value:String(t),children:s,disabled:n,hideItemIndicator:!0,className:n?"data-[disabled]:![pointer-events:initial] data-[disabled]:cursor-[initial]":void 0}})})};var H=a(22900);let G=H.Ml.filter(e=>"Active"!==e&&"Withdrawn"!==e),V=e=>e?(null==e?void 0:e.nft.length)+(null==e?void 0:e.nonNft.length)+(null==e?void 0:e.withdrawnUncollected.length):0,z=(e,t)=>!!e&&!!t&&((null==e?void 0:e.nft.includes(t))||(null==e?void 0:e.nonNft.includes(t))||(null==e?void 0:e.withdrawnUncollected.includes(t))),U=(e,t)=>!!e&&!!(null==e?void 0:e[t].length),F={index:"Index",nft:"NFT",pubkey:"Validator public key",credentials:"Withdrawal credentials",balance:"Balance",reward:"Protocol rewards",status:"Status"},Y=[{value:"nft",children:"NFT validators"},{value:"classic",children:"Classic validators"}];var Q=a(27733),q=a(49460),$=a(8452);let X=e=>{let{active:t,children:a}=e;return(0,l.jsxs)("div",{className:(0,c.cx)("relative overflow-hidden","[&>span]:absolute [&>span]:size-full [&>span]:top-0 [&>span]:left-0 [&>span]:opacity-60 [&>span]:z-10"),children:[a,t&&(0,l.jsx)(c.EA,{baseColor:"transparent",highlightColor:"rgb(var(--color-backgroundPrimaryDefault))",className:"app-skeleton"})]})},Z=e=>{let{type:t,disabled:a,showSkeleton:n,variant:r="green",trigger:i}=e,{t:s}=(0,d.Bd)();return(0,l.jsx)(c.az,{className:(0,c.cx)(a&&"pointer-events-none"),...!a&&!n&&{onClick:()=>i()},children:"star"===t?(0,l.jsx)(X,{active:n,children:(0,l.jsx)(c.$n,{application:!0,tabIndex:-1,size:"sm",color:"transparent",className:(0,c.cx)("!p-2 -my-2 mx-auto block transition-transform hover:scale-[1.15]",a&&"grayscale"),title:s("dashboard.KEYS.VIEW_DETAILS"),children:(0,l.jsx)($.F,{variant:r})})}):(0,l.jsx)(X,{active:n,children:(0,l.jsx)(c.$n,{tabIndex:-1,size:"sm",variant:"text",color:a?"secondary":"primary",className:"block normal-case font-normal !p-2 -my-2 !-mx-2 tracking-normal underline-offset-1",children:s("dashboard.KEYS.VIEW_DETAILS")})})})},J=e=>{let{protocolRewards:t,nftRewards:a,totalRewards:n}=e,{t:r}=(0,d.Bd)();return(0,l.jsxs)(c.az,{flex:!0,justifyContent:"end",className:"gap-3",children:[a&&n!==c.AA.Hh&&(0,l.jsx)(ee,{content:"\n      <ul>\n      ".concat(t&&"<li>".concat(r("dashboard.KEYS.BEACON_CHAIN_REWARDS",{value:t}),"</li>"),"\n      ").concat(a&&"<li>".concat(r("dashboard.KEYS.NFT_CONTRACT_REWARDS",{value:a}),"</li>"),"\n      </ul>\n       "),children:(0,l.jsx)("div",{className:"block size-1.5 rounded-full bg-backgroundBrandActive bg-[linear-gradient(145deg,rgba(99,227,54,1)_0%,rgba(197,251,255,1)_100%)]"})}),n]})},ee=e=>{let{children:t,content:a}=e;return(0,l.jsx)(c.m_,{delayDuration:250,content:a,className:"px-4 flounder:max-w-[415px] font-mobileCallout [&_ul]:list-disc [&_ul]:list-inside",triggerProps:{className:"block p-2 -m-2 pointer relative top-px"},contentProps:{align:"end",side:"bottom",sideOffset:-2,alignOffset:1},dangerousContent:!0,children:t})};var et=a(22864);let ea=e=>{let{index:t,beaconChainURL:a,onExpandClick:n}=e,r=!t||0===t,i="".concat(a,"/validator/").concat(t),s={size:"sm",application:!0,variant:"text",color:"secondary",tabIndex:-1};return(0,l.jsxs)(c.az,{flex:!0,alignItems:"center",justifyContent:r&&n?"space-between":"end",className:"gap-2",children:[n&&(0,l.jsx)(c.$n,{...s,onClick:n,icon:{iconKey:"expand",size:12},className:"invisible table-expand-trigger group-hover:visible !p-2 [&_span]:!m-0 !-m-2"}),r&&c.AA.Hh,!r&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-desktopCallout",children:t}),(0,l.jsx)(c.$n,{href:i,...(0,et.bI)(i),...s,icon:{iconKey:"share",size:14},className:"!p-2 !-m-2 [&_span]:!m-0"})]})]})},el=e=>{let{row:t}=e,{onSelectionChange:a,selectedValidators:n}=(0,y.o)(e=>({onSelectionChange:e.onSelectionChange,selectedValidators:e.selectedValidators})),r=U(n,"nft"),i=U(n,"nonNft"),s="Withdrawn"===t.Status&&!t.isNFTWithdrawnUncollected||G.includes(t.Status)||r&&!t.nft||i&&!!t.nft;return(0,l.jsx)("div",{tabIndex:-1,className:(0,c.cx)(er,s?"cursor-default":"cursor-pointer"),onClick:s?void 0:()=>a(t.index,!!(null==t?void 0:t.nft),t.isNFTWithdrawnUncollected),children:(0,l.jsx)(c.Sc,{tabIndex:-1,id:"validator-".concat(t.index),disabled:s,checked:z(n,t.index)})})},en=e=>{let{handleGroupSelection:t}=e,a=!!V((0,y.o)(e=>e.selectedValidators));return a?(0,l.jsx)("div",{className:er,onClick:()=>t(),role:"button",tabIndex:-1,children:(0,l.jsx)(c.Sc,{id:"header-checkbox",checked:a,iconProps:{iconKey:"minus"}})}):null},er="absolute left-0 top-0 size-full flex items-center justify-center appearance-none border-0 !outline-none",ei=e=>{let{beaconChainURL:t,handleRowClick:a,handleGroupSelection:n}=e;return[{width:6,align:"center",headerCell:()=>(0,l.jsx)(en,{handleGroupSelection:n}),bodyCell:e=>(0,l.jsx)(el,{row:e})},{sortKey:F.index,width:16,align:"end",headerCell:F.index,bodyCell:e=>{let n=e[F.status];return(0,l.jsx)(ea,{index:e[F.index],beaconChainURL:t,onExpandClick:"Deposited"!==n?()=>es(a,e.rowIndex):void 0})}},{sortKey:F.nft,width:10.5,align:"center",headerCell:F.nft,bodyCell:e=>{let t=e[F.status],n="Withdrawn"===e.Status&&!e.isNFTWithdrawnUncollected&&0===Number.parseFloat(e.balance);return e[F.nft]&&(0,l.jsx)(Z,{type:"star",trigger:()=>es(a,e.rowIndex),showSkeleton:"Deposited"===t,disabled:"Deposited"===t,variant:n?"gray":"Slashed"===t?"red":"green"})}},{sortKey:F.credentials,width:40,expand:!0,headerCell:F.credentials,bodyCell:e=>(0,l.jsx)(Q.a,{type:e.credentialsType,index:e[F.index],address:e[F.credentials],rawAddress:e.withdrawalCredentials})},{sortKey:F.balance,width:25,align:"end",headerCell:F.balance,bodyCell:e=>e[F.balance]},{sortKey:F.reward,width:25,align:"end",headerCell:F.reward,bodyCell:e=>{let t="Exited"!==e.Status&&"Exiting"!==e.Status;return(0,l.jsx)(J,{totalRewards:e[F.reward],nftRewards:t?null==e?void 0:e.nftRewards:void 0,protocolRewards:null==e?void 0:e.protocolRewards})}},{sortKey:F.status,width:18,align:"end",headerCell:F.status,bodyCell:e=>(0,l.jsx)(q.T,{className:"justify-end",text:e[F.status],activationDate:e["Activation date"],estimateActivationTime:e.estimatedActivationTime,epochs:{exit:null==e?void 0:e.exitEpoch,withdrawable:null==e?void 0:e.withdrawableEpoch}})},{width:18,headerCell:"Actions",bodyCell:e=>{let t=e[F.status];return(0,l.jsx)(Z,{trigger:()=>es(a,e.rowIndex),showSkeleton:"Deposited"===t,disabled:"Deposited"===t})}}]},es=(e,t)=>{void 0!==t&&e(t)};var eo=a(71963),ed=a(1203);let ec=e=>e.map(e=>{let t=e.activatedAt?(0,eo.toDate)(e.activatedAt):null;return{Index:e.index,NFT:e.NFT,"Validator public key":e.pubkey,"Withdrawal credentials":e.withdrawalCredentials,Balance:Number(e.Balance.replace("ETH","")),"Protocol rewards":Number(e["Protocol rewards"].replace("ETH","")),"Activation date":t?(0,ed.Bp)(t):c.AA.Sb,"Activation timestamp":t?(0,ed.hx)(t):c.AA.Sb,Status:e.Status}});var eu=a(56042),eh=a(6072),em=a(91752);let ex=e=>{let{sortState:t}=e,a=(0,c._N)("Escape"),{validators:l,isLoading:r,isAllRecordsFetched:i,error:s}=(0,eu.d)(),o=(0,eh.L)(l),[d,u]=t,[h,m]=(0,n.useState)(),{filterValues:x,getGroupSelection:p,showSelectionUtils:g,clearSelection:b}=(0,y.o)(e=>({filterValues:e.filterValues,getGroupSelection:e.getGroupSelection,showSelectionUtils:e.showSelectionUtils,clearSelection:e.clearSelection})),v=(0,n.useMemo)(()=>l.map(e=>{var t;let a=o&&(null==(t=e.nft)?void 0:t.address)?o[e.nft.address][em.B2]:"0",{index:l,isNFTValidator:n,balance:r,protocolRewards:i,pubKey:s,withdrawalCredentials:d,status:c,activationDate:u,totalRewards:h,nftRewards:m}=(0,H.nj)(e,a);return{...e,[F.index]:null===l?0:l,[F.nft]:n,[F.pubkey]:s,[F.credentials]:d.address||"",[F.balance]:r,[F.reward]:h,[F.status]:c,credentialsType:d.type||"ETH1",nftRewards:m,protocolRewards:i,isNFTWithdrawnUncollected:!!(n&&"Withdrawn"===c&&m),"Activation date":u}}),[l]),f=(0,n.useMemo)(()=>v.filter(e=>(e.isNFTWithdrawnUncollected||(null==x?void 0:x.validatorStatus.includes(e.Status)))&&(null==x?void 0:x.credentialsType.includes(e.credentialsType))&&(null==x?void 0:x.stakeType.includes(e.NFT?"nft":"classic"))),[v,x]),w=(0,n.useMemo)(()=>c.Wp.order(f,{propertyName:d.columnName,direction:d.direction}).map((e,t)=>{let a="withdrawal_done"===e.status?"disabled":"default";return{...e,rowStatus:a,rowIndex:t}}),[d,f]);return(0,n.useEffect)(()=>{a&&g&&b()},[a,g]),(0,n.useEffect)(()=>{b()},[]),{tableData:{validatorsForDownload:ec(w),unfilteredRows:v,sortedRows:w,activePubKeyState:[h,m]},controlledSort:{sortValues:d,setSortValues:u},tableStates:{isLoading:r||!i,isAllRecordsFetched:i},error:s,handleGroupSelection:e=>p(w,e)}},ep=()=>({sortState:(0,n.useState)({columnName:"Index",direction:"asc"})});var eg=a(72864),eb=a(7131);let ev=e=>{let{onSelectValueChange:t,selectOptions:a,selectButtonTitle:r,actionButtons:i,actionDropdowns:s,clearButton:o}=e,[d,u]=(0,n.useState)(!1),h=a.map(e=>({...e,className:"normal-case",hideItemIndicator:!0}));return(0,l.jsx)("div",{className:"absolute top-[-9px] inset-x-0 py-1.5 z-[11] bg-backgroundPrimaryDefault flounder:-top-2.5 flounder:inset-x-0 tuna:py-2 tuna:-mt-14 tuna:sticky tuna:top-12 tuna:bg-backgroundPrimaryDefault tuna:w-full tuna:h-14",children:(0,l.jsxs)(c.az,{flex:!0,justifyContent:"space-between",children:[(0,l.jsxs)(c.az,{flex:!0,className:"relative gap-3",children:[(0,l.jsx)(c.A5.bL,{onValueChange:t,options:h,triggerProps:{className:"normal-case font-normal",children:r,placeholder:r}}),(i||s)&&(0,l.jsxs)("div",{className:"relative after:absolute after:z-[1] after:top-[calc((100%-16px)/2)] after:left-[-7px] after:h-4 after:border-l after:border-itemSecondaryDefault after:pointer-events-none",children:[(null==s?void 0:s.length)?s.map((e,t)=>(0,l.jsxs)(c.ms.bL,{open:d,onOpenChange:e=>u(!!e),children:[(0,l.jsx)(c.ms.l9,{asChild:!0,children:(0,l.jsx)(c.$n,{...ef,disabled:e.disabled,startIcon:{iconKey:"downloadUp",size:14},children:e.title})}),(0,l.jsx)(c.ms.UC,{align:"end",sideOffset:6,className:"py-2 pointer-events-all w-max",children:e.list.map((e,t)=>{if(e)return(0,l.jsx)(c.ms.q7,{className:"mb-px",children:(0,l.jsx)(c.$n,{application:!0,size:"sm",className:"w-full",variant:"menuItem",...e})},t)})})]},t)):null,(null==i?void 0:i.length)?i.map((e,t)=>(0,l.jsx)(c.$n,{...e,...ef},t)):null]})]}),(0,l.jsx)(c.az,{children:(0,l.jsx)(c.$n,{...o,...ef,color:"secondary"})})]})})},ef={size:"sm",application:!0,color:"primary",variant:"text",className:"gap-1.5 !px-2.5 !py-2 !m-0 [&_span]:!m-0 !no-underline !text-desktopCallout"};var ew=a(17648),ey=a.n(ew),eS=a(51603),eN=a.n(eS),eE=a(21505),eA=a(63226),eT=a(99027),ej=a(89138),ek=a(91856),eC=a(54992),eI=a(14902),eR=a(87903);let eL=(e,t)=>{let{t:a}=(0,d.Bd)(),{onFilterValuesChange:l,filterValues:r}=(0,y.o)(e=>({onFilterValuesChange:e.onFilterValuesChange,filterValues:e.filterValues})),i=(0,n.useMemo)(()=>null==e?void 0:e.filter(e=>null==r?void 0:r.stakeType.includes(e.NFT?"nft":"classic")),[e,null==r?void 0:r.stakeType,t]),s=(0,n.useMemo)(()=>eN()(e,"NFT"),[e,null==r?void 0:r.stakeType,t]),o=(0,n.useMemo)(()=>eN()(i,"Status"),[i,null==r?void 0:r.stakeType,t]),c=(0,n.useMemo)(()=>eN()(i,e=>{let t=(0,eI.iL)(null==e?void 0:e.withdrawalCredentials);return(0,H.Di)(e.wcLabel,t)}),[i,null==r?void 0:r.credentialsType,t]),u=(0,n.useMemo)(()=>eN()(e,e=>"Withdrawn"!==e.Status||e.isNFTWithdrawnUncollected?"active":"inactive"),[i,null==r?void 0:r.stakeType,t]),h=[{label:a("dashboard.KEYS.VALIDATOR_TYPE"),group:"stakeType",content:eT.l.map(e=>{let t=s["".concat("nft"===e)];return{value:e,title:"classic"===e?a("dashboard.KEYS.CLASSIC_VALIDATORS"):a("dashboard.KEYS.NFT_VALIDATORS"),disabled:!t||0===t}})},{label:a("dashboard.KEYS.VALIDATOR_STATUS"),group:"validatorStatus",content:H.Ml.map(e=>{var t;return{value:e,title:"".concat(e," (").concat(null!=(t=o[e])?t:0,")"),disabled:!o[e]||0===o[e]}})},{label:a("dashboard.KEYS.WITHDRAWAL_CREDENTIALS_TYPE"),group:"credentialsType",content:em.PW.map(e=>{var t;return{value:e,title:"".concat(e," (").concat(null!=(t=c[e])?t:0,")"),disabled:!c[e]||0===c[e]}}).filter(e=>!("N/A"===e.value&&e.disabled))}];return(0,n.useEffect)(()=>{!t||u.active||r.validatorStatus.includes("Withdrawn")||l("validatorStatus","Withdrawn")},[t,u]),h},eD=e=>{var t;let{t:a}=(0,d.Bd)(),{up:l}=(0,E.P)(),{hasPendingWithdrawNFTs:r,accountTxs:i}=(0,ej.F)(),{activeAccount:s,connectionStage:o,activeChainId:c}=(0,x.v)(),{apiStatus:h}=(0,eR.a)(),{onOpenChange:m}=(0,u.E)(),{events:p}=(0,K.Z)(),{setSelectedSourceValidators:g,setSelectedTargetValidator:b,pectraValidators:v}=(0,ek.n)(),{onOpenChange:f}=(0,D.s)("consolidationDialog"),{selectedValidators:w,allSelectedValidators:S,clearSelection:N}=(0,y.o)(e=>({selectedValidators:e.selectedValidators,allSelectedValidators:e.allSelectedValidators,clearSelection:e.clearSelection})),A=(0,eC.E)(N),T=!!(null==h?void 0:h.isNewStakingDialogEnabled),j=!!(null==h?void 0:h.isPartialWithdrawalEnabled),k=!!(null==h?void 0:h.isConsolidationEnabled),C=null==S?void 0:S.length,I=[...e.filter(e=>w.nft.includes(e.index)).filter(e=>!!e.nftRewards),...e.filter(e=>w.withdrawnUncollected.includes(e.index))],R=v.filter(e=>S.includes(e.index)),L=e.filter(e=>S.includes(e.index)&&(0,eI.f1)(e.withdrawalCredentials)&&("EOA"===e.wcLabel||"SAFE"===e.wcLabel)),_=L.some(e=>"0x01"===(0,eI.iL)(e.withdrawalCredentials)),B=s&&"connected"===o,O=(0,n.useMemo)(()=>!!r&&!!i&&i.some(e=>{var t;return"withdrawNFT"===e.type&&(null==(t=e.nftIDs)?void 0:t.some(e=>I.map(e=>{var t;return null==(t=e.nft)?void 0:t.tokenId}).includes(e)))}),[r,i,I]),P=!!((null==w?void 0:w.nonNft.length)&&(null==w?void 0:w.nft.length))||!!(!(null==w?void 0:w.nonNft.length)&&!(null==w?void 0:w.nft.length)&&!(null==w?void 0:w.withdrawnUncollected.length)),M=!!I.length,H=!!((null==w?void 0:w.nonNft.length)&&!(null==w?void 0:w.nft.length)||!I.length||O),G=!!(null==w?void 0:w.withdrawnUncollected.length),V=!!(!R.length||R.length>1||_||R.length&&eE.gH.from(null==R||null==(t=R[0])?void 0:t.balance).gte(W.Fn)),z=1===L.length&&_,U=!z&&(!R.length||L.length<=1||L.reduce((e,t)=>e.add(eE.gH.from(t.balance)),eE.gH.from(0)).gte(eE.gH.from(W.Fn))),F=(e,t)=>Array.from(new Set(1===e.length&&e[0].index===t?[e[0].index]:e.filter(e=>e.index!==t).map(e=>e.index))),Y="&network=".concat(ey()(eA.Bt[c||eA.cG])),Q=S.length<=10?"validator=".concat(S.join(",")):"",q="/ethereum/exit-request?".concat(Q).concat(Y),$="".concat(q,"&withdrawalType=partial");return{actionDropdowns:[j&&{title:(null==l?void 0:l.flounder)&&a("dashboard.KEYS.WITHDRAW"),disabled:!B||P||G,list:[{children:a("withdrawal.KEYS.PARTIAL_WITHDRAWAL"),href:$,...(0,et.bI)($)},{children:a("withdrawal.KEYS.FULL_WITHDRAWAL"),href:q,...(0,et.bI)(q)}]}].filter(Boolean),actionButtons:[M&&{startIcon:{iconKey:"ethLogo",size:14},disabled:!B||P||H,onClick:()=>A(I),children:(null==l?void 0:l.flounder)&&a("withdrawal.KEYS.COLLECT")},T&&{startIcon:{iconKey:"downloadDown",size:14},disabled:!B||P||V,onClick:()=>{let e=R[0];m(!0),null==p||p.setStakeMode("topUp"),e&&(null==p||p.setSelectedValidator({index:e.index,pubkey:e.pubkey,balance:e.balance}))},children:(null==l?void 0:l.flounder)&&a("stake.TOPUP")},k&&{startIcon:{iconKey:z?"arrowsCircle":"coinsStack",size:14},disabled:!B||P||U,onClick:()=>{if(L.length){let e=z?L[0].index:R[0].index;b(e),g(F(L,e)),f("initial")}},children:(null==l?void 0:l.flounder)&&a("dashboard.KEYS.MERGE")}].filter(Boolean),clearButton:{startIcon:{iconKey:"close",size:14},children:a((null==l?void 0:l.flounder)?"dashboard.KEYS.CLEAR_SELECTION":"dashboard.KEYS.CLEAR_SELECTION_SHORT")},selectButtonTitle:a((null==l?void 0:l.flounder)?"dashboard.KEYS.VALIDATORS_SELECTED":"dashboard.KEYS.VALIDATORS_SELECTED_SHORT",{value:C})}},e_=e=>{let{handleGroupSelection:t,unfilteredRows:a,validatorsForDownload:n}=e,{isLoading:r,isAllRecordsFetched:i,error:s}=(0,eu.d)(),o=eL(a,i),{selectButtonTitle:d,actionButtons:c,actionDropdowns:u,clearButton:h}=eD(a),{showSelectionUtils:m,onFilterValuesChange:x,getCheckedValues:p}=(0,y.o)(e=>({showSelectionUtils:e.showSelectionUtils,onFilterValuesChange:e.onFilterValuesChange,getCheckedValues:e.getCheckedValues}),eg.x);return s?(0,l.jsx)(l.Fragment,{}):m?(0,l.jsx)(ev,{selectOptions:Y,selectButtonTitle:d,onSelectValueChange:e=>t(e),actionButtons:c,actionDropdowns:u,clearButton:{...h,onClick:()=>t()}}):(0,l.jsx)(eb.m,{tableName:"validators",tablesRows:n,isLoadingTableRows:r,isAllRecordsFetched:i,filter:{filterData:o,getCheckedValues:p,onFilterValuesChange:x}})},eK=e=>{let{sortState:t}=e,{t:a}=(0,d.Bd)(),{connectionStage:r,activeAccount:i,activeChainId:s}=(0,x.v)(),{url:o}=(0,A.XX)(),{tableData:u,tableStates:h,controlledSort:m,handleGroupSelection:p,error:g}=ex({sortState:t}),{validatorsForDownload:b,sortedRows:v,unfilteredRows:f}=u,{isLoading:w,isAllRecordsFetched:S}=h,N=(0,y.o)(e=>e.selectedValidators),{dialogOpened:E,dialogValidatorData:I,handleRowClick:R,handleDialogClose:L,handleNavigate:D}=_(v,!w&&S),K=(null==I?void 0:I.rowIndex)===0,W=(null==I?void 0:I.rowIndex)===v.length-1,B=(0,n.useMemo)(()=>ei({beaconChainURL:null==o?void 0:o.beaconChain,handleRowClick:R,handleGroupSelection:p}),[s,i,null==o?void 0:o.beaconChain,S,N,v]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e_,{handleGroupSelection:p,validatorsForDownload:b,unfilteredRows:f}),(0,l.jsx)(j.I,{fullWidth:!0,columns:B,isLoading:w,rowsData:v,errorPrompt:g||void 0,controlledSort:m,emptyPrompt:{title:a("dashboard.KEYS.NO_VALIDATORS_FOUND")},customFooter:"connected"===r&&(0,l.jsx)(O,{sortedRows:v}),children:e=>{var t;let{index:a,style:n}=e,r=a-1,i=(null==(t=v[r])?void 0:t.rowStatus)==="disabled",s=r===(null==I?void 0:I.rowIndex),o=z(N,v[r].index);return(0,l.jsx)(c.XI.fI,{highlight:s||o,disabled:i,style:n,id:String(r),children:(0,T.dE)({row:v[r],columns:B})},"".concat(++a))}}),E&&(0,l.jsx)(c.lG.bL,{open:!!E,onOpenChange:e=>!e&&L(),children:(0,l.jsx)(C,{id:null==I?void 0:I.pubkey,children:(0,l.jsx)(k.$,{data:I,changeDialogValidator:D,disablePrevButton:K,disableNextButton:W})})})]})};var eW=a(90490),eB=a(71746);let eO=e=>new Date(1e3*e),eP=e=>eA.Wp.padExecutionLayerData(eA.Wp.formatWeiToEther(e)),eM=e=>e.map(e=>{let t=eO(e.blockTimestamp);return{Time:(0,ed.Bp)(t),"Time timestamp":(0,ed.hx)(t),"Transaction hash":e.txHash,"Beneficiary address":e.beneficiary,Amount:e.Amount.replace(" ETH","")}}),eH=e=>{let{chainName:t,t:a}=e;return[{sortKey:ez.time,width:31,align:"start",headerCell:ez.time,bodyCell:e=>e[ez.time]},{sortKey:ez.txHash,width:42,expand:!0,headerCell:ez.txHash,bodyCell:e=>{let a=(0,et.g$)(t);return(0,l.jsx)(c.Mz,{address:e[ez.txHash],externalLink:"".concat(a,"/tx/").concat(e.txHash)})}},{sortKey:ez.reward,width:40,align:"end",headerCell:ez.reward,bodyCell:e=>e[ez.reward]},{width:32,headerCell:"Actions",bodyCell:e=>{let n=(0,et.g$)(t),r="".concat(n,"/tx/").concat(e.txHash);return(0,l.jsx)(c.$n,{href:r,...(0,et.bI)(r),size:"sm",application:!0,variant:"text",tabIndex:-1,endIcon:{iconKey:"share",size:14,className:"text-itemSecondaryDefault group-hover:text-itemPrimaryDefault transition-colors"},className:"!p-2 !-m-2 normal-case font-normal group",children:a("common.WEB3.VIEW_ON_ETHER_SCAN")})}}]},eG=e=>{let{sortState:t}=e,{activeAccount:a,connectionStage:l,openModal:r,activeChainId:i}=(0,x.v)(),{t:s}=(0,d.Bd)(),{onOpenChange:o}=(0,D.s)("claimsDialog"),{apiStatus:u}=(0,eR.a)(),h=null==u?void 0:u.isClaimingEnabled,[m,p]=t,{claims:g,isLoading:b,isAllRecordsFetched:v,error:f}=(0,eW.T)(),{validators:w,isAllRecordsFetched:y}=(0,eu.d)(),{data:S,error:N}=(0,eB.g)(w,{enabled:y&&0===g.length}),E=(0,n.useMemo)(()=>eH({chainName:eA.Bt[i||eA.cG],t:s}),[eA.Bt,i,eA.cG,a]),A=(0,n.useMemo)(()=>g.map(e=>{let t=(0,ed.m8)(eO(e.blockTimestamp)),a="".concat(eP(e.reward)," ETH");return{...e,[ez.time]:t,[ez.txHash]:e.txHash,[ez.beneficiary]:e.beneficiary,[ez.reward]:a}}),[g,ez]),T=(0,n.useMemo)(()=>c.Wp.order(A,{propertyName:m.columnName,direction:m.direction}).map((e,t)=>({...e,rowIndex:t})),[A,m]),j=(0,n.useMemo)(()=>{let e=(null==S?void 0:S.pendingTotal)&&(null==S?void 0:S.pendingTotal)!=="0"&&!N,t="connected"===l;if(e)return t?{text:s("dashboard.KEYS.CLAIM_NOW_HINT",{amount:eA.Wp.formatWeiToEther(null==S?void 0:S.pendingTotal)}),disabled:!h,onClick:()=>o("initial")}:{text:s("dashboard.KEYS.CLAIM_NOW_HINT_DISCONNECTED"),onClick:()=>null==r?void 0:r()}},[null==S?void 0:S.pendingTotal,N,l,h]);return{tableData:{claimsForDownload:eM(A),sortedRows:T,columns:E,emptyPrompt:j},controlledSort:{sortValues:m,setSortValues:p},tableStates:{isLoading:b,isAllClaimsFetched:v},error:f}},eV=()=>({sortState:(0,n.useState)({columnName:"Time",direction:"desc"})}),ez={time:"Time",txHash:"Transaction hash",beneficiary:"Beneficiary address",reward:"Amount"},eU=e=>{let{sortState:t}=e,{t:a}=(0,d.Bd)(),{tableData:n,error:r,tableStates:i,controlledSort:s}=eG({sortState:t}),{claimsForDownload:o,sortedRows:u,columns:h,emptyPrompt:m}=n;return(0,l.jsxs)(l.Fragment,{children:[!r&&(0,l.jsx)(eb.m,{tableName:"claims",tablesRows:o,isLoadingTableRows:i.isLoading,isAllRecordsFetched:i.isAllClaimsFetched}),(0,l.jsx)(j.I,{rowsData:u,columns:h,fullWidth:!0,emptyPrompt:{title:a("dashboard.KEYS.NO_CLAIMS"),customSubtitle:(0,l.jsx)(c.$n,{size:"sm",application:!0,variant:"text",color:"secondary",onClick:null==m?void 0:m.onClick,disabled:null==m?void 0:m.disabled,className:"mt-4 underline normal-case whitespace-normal",children:null==m?void 0:m.text})},errorPrompt:r||void 0,isLoading:i.isLoading,controlledSort:s,children:e=>{let{index:t,style:a}=e,n=t-1;return(0,l.jsx)(c.XI.fI,{id:String(n),style:a,children:(0,T.dE)({row:u[n],columns:h})},"".concat(++t))}})]})};var eF=a(41606),eY=a(38783),eQ=a(44088),eq=a(2499),e$=a(92688),eX=a(42901),eZ=a(54419),eJ=a(89295),e0=a(23966),e1=a(74352);let e2=e=>{let{x:t,y:a,payload:n,textAnchor:r,className:i,customTransform:s}=e;return(0,l.jsx)("g",{transform:s?void 0:"translate(".concat(t,",").concat(a,")"),className:i,children:(0,l.jsx)("text",{x:0,y:0,textAnchor:r,className:"recharts-text recharts-cartesian-axis-tick-value",children:(0,l.jsx)("tspan",{dy:-10,dx:0,children:null==n?void 0:n.value})})})},e4=e=>{let{x:t=0,y:a=0,payload:n}=e;return(0,l.jsxs)("g",{children:[(0,l.jsx)("text",{x:t,y:a+12,orientation:"bottom",className:"recharts-text recharts-cartesian-axis-tick-value",textAnchor:"middle",children:null==n?void 0:n.value}),(null==n?void 0:n.subvalue)&&(0,l.jsx)("text",{x:t,y:a+28,orientation:"bottom",className:"recharts-text recharts-cartesian-axis-tick-subvalue",textAnchor:"middle",children:n.subvalue})]})},e5=e=>{let{dataConfig:t}=e,{up:a}=(0,E.P)(),[l,r]=(0,n.useState)(-1),i=(0,n.useMemo)(()=>t.barKey===t.yAxisLeftKey?{bar:{default:e6.primaryColor,highlight:e6.primaryHighlightColor,border:e6.primaryBorderColor},area:{default:e6.secondaryColor,highlight:e6.secondaryHighlightColor,border:e6.secondaryBorderColor}}:{bar:{default:e6.secondaryColor,highlight:e6.secondaryHighlightColor,border:e6.secondaryBorderColor},area:{default:e6.primaryColor,highlight:e6.primaryHighlightColor,border:e6.primaryBorderColor}},[t]),s={vertical:!1,strokeDasharray:"6 6",stroke:e6.strokeColor},o={padding:{left:100,right:(null==t?void 0:t.yAxisRightKey)?70:20},height:48,tickSize:10,stroke:e6.strokeColor,tickLine:{stroke:e6.tickLineColor}},d={mirror:!0,tickCount:(null==a?void 0:a.flounder)?78:5,interval:11*(null!=a&&!!a.flounder),tickSize:0,stroke:e6.strokeColor,axisLine:!1,padding:{top:60},tickLine:{stroke:e6.tickLineColor}},c={...d,tickCount:(null==a?void 0:a.flounder)?8:5},u={strokeOpacity:0,isAnimationActive:!1,fill:i.area.default,stroke:i.area.border,fillOpacity:.8,activeDot:{stroke:"none",fill:e6.tickColor}};return{chartColorScheme:e6,composedChartProps:{width:480,height:480,margin:{top:0,right:44,left:44,bottom:16}},cartesianGridProps:s,xAxisProps:o,yAxisProps:d,yAxisRightProps:c,barProps:{shape:e9(2,i.bar.border),isAnimationActive:!1,fillOpacity:1,fill:i.bar.default},barActiveIndex:l,labelProps:{offset:23},areaProps:u,barEvents:{renderBarHighlightColor:e=>e===l?i.bar.highlight:i.bar.default,onBarMouseEnter:(e,t)=>{r(t)},onBarMouseLeave:()=>{r(-1)}}}},e3=()=>{(0,c.NR)(()=>{let t=e(),a=document.querySelectorAll(".recharts-cartesian-axis-tick-value__right");a.length&&(null==t?void 0:t.length)&&a.forEach((e,a)=>{t[a]&&e.setAttribute("transform","translate(".concat(t[a][0]-2,", ").concat(t[a][1],")"))})});let e=(0,n.useCallback)(()=>{let e=document.querySelector(".recharts-cartesian-grid-horizontal"),t=null==e?void 0:e.querySelectorAll("line");if(!t)return null;let a=[];return t.forEach(e=>{let t=e.getAttribute("x2"),l=e.getAttribute("y2");a.push([Number(t),Number(l)])}),a},[])},e6={strokeColor:"rgb(var(--color-itemSecondaryMute))",tickColor:"rgb(var(--color-itemPrimaryDefault))",tickSubvalue:"rgb(var(--color-itemSecondaryDefault))",tickLineColor:"transparent",primaryColor:"rgb(var(--color-paleBlue))",primaryHighlightColor:"rgb(var(--color-lavenderGray))",primaryBorderColor:"rgb(var(--color-neutral0))",secondaryColor:"rgb(var(--color-mintGreen))",secondaryHighlightColor:"rgb(var(--color-powderBlue))",secondaryBorderColor:"rgb(var(--color-neutral0))"},e9=(e,t)=>a=>{let{fill:n,x:r,y:i,width:s,height:o}=a;return(0,l.jsxs)("g",{children:[(0,l.jsx)("rect",{x:r,y:i,width:s,height:o,stroke:"none",fill:n}),(0,l.jsx)("rect",{x:r,y:i,width:s,height:e,stroke:"none",fill:t})]})},e7=e=>{let{active:t,payload:a}=e,r=(0,n.useMemo)(()=>{var e;return a&&0!==a.length?{title:null==(e=a[0].payload)?void 0:e.date,values:a.map(e=>({type:e.customLabel||e.name,value:e.payload&&e.name&&e.payload[e.name]}))}:null},[a]);return t&&a&&null!=a?(0,l.jsxs)("div",{className:"relative text-neutral90 bg-neutral0",children:[(null==r?void 0:r.title)&&(0,l.jsx)("span",{className:"text-neutral90 bg-neutral20 text-center py-1 px-3 block text-[12px]",children:r.title}),(0,l.jsx)("div",{className:"p-3 flex flex-col gap-3.5",children:(null==r?void 0:r.values)&&r.values.map((e,t)=>(0,l.jsxs)(c.az,{children:[(null==e?void 0:e.type)&&(0,l.jsx)("div",{className:"text-callout",children:e.type}),(null==e?void 0:e.value)&&(0,l.jsxs)("div",{className:(0,c.cx)("font-mono font-semibold text-body2 tracking-tight",e8[t]),children:[e.value," ETH"]})]},t))})]}):null},e8=["text-paleBlue","text-mintGreen"],te=e=>(0,n.useMemo)(()=>({loadingView:(0,l.jsx)(o.x,{}),chartView:(0,l.jsx)(tt,{...e})}),[e])[e.isLoading?"loadingView":"chartView"],tt=e=>{let{data:t,dataConfig:a,tooltipLabels:n,axisLabels:r,axisDomains:i}=e,{composedChartProps:s,cartesianGridProps:o,xAxisProps:d,yAxisProps:c,yAxisRightProps:u,barProps:h,barEvents:m,areaProps:x,labelProps:p}=e5({dataConfig:a});return e3(),(0,l.jsx)("div",{className:"app-chart",children:(0,l.jsx)(eF.u,{width:"100%",height:"100%",children:(0,l.jsxs)(eY.X,{data:t,...s,children:[(0,l.jsx)(eQ.d,{...o}),(0,l.jsx)(eq.W,{dataKey:a.xAxisKey,...d,tick:e=>{let{x:a,y:n,payload:r}=e;return(0,l.jsx)(e4,{x:a,y:n,payload:{value:(0,ed.Hx)(r.value),subvalue:t[r.index].epoch?"Epoch ".concat(t[r.index].epoch):void 0}})}}),(null==a?void 0:a.yAxisLeftKey)&&(0,l.jsx)(e$.h,{type:"number",yAxisId:a.yAxisLeftKey,dataKey:a.yAxisLeftKey,domain:i&&i[a.yAxisLeftKey],...c,tick:e=>{let{x:t,y:a,payload:n}=e;return(0,l.jsx)(e2,{x:t,y:a,payload:{value:eA.Wp.padString(String(n.value),6,"end")}})},children:r&&(0,l.jsx)(eX.J,{value:r[a.yAxisLeftKey],angle:-90,position:"left",...p})}),(null==a?void 0:a.yAxisRightKey)&&(0,l.jsx)(e$.h,{type:"number",orientation:"right",yAxisId:a.yAxisRightKey,dataKey:a.yAxisRightKey,domain:i&&i[a.yAxisRightKey],...u,interval:"preserveStartEnd",tick:e=>{let{x:t,y:a,payload:n}=e;return(0,l.jsx)(e2,{x:t,y:a,textAnchor:"end",payload:{value:eA.Wp.padString(String(n.value),6,"end")},className:"recharts-cartesian-axis-tick-value__right",customTransform:!0})},children:r&&(0,l.jsx)(eX.J,{value:r[a.yAxisRightKey],angle:90,position:"right",...p})}),a.areaKey&&(0,l.jsx)(eZ.G,{yAxisId:a.yAxisRightKey===a.areaKey?a.yAxisRightKey:a.yAxisLeftKey,dataKey:a.areaKey,...x}),a.barKey&&(0,l.jsx)(eJ.y,{dataKey:a.barKey,yAxisId:a.yAxisLeftKey===a.barKey?a.yAxisLeftKey:a.yAxisRightKey,onMouseEnter:m.onBarMouseEnter,onMouseLeave:m.onBarMouseLeave,...h,children:t.map((e,t)=>(0,l.jsx)(e0.f,{cursor:"pointer",fill:m.renderBarHighlightColor(t)},"cell-".concat(t)))}),(0,l.jsx)(e1.m,{animationDuration:0,content:e=>{let{active:t,payload:a}=e;return(0,l.jsx)(e7,{active:t,payload:null==a?void 0:a.map(e=>({...e,customLabel:e.name&&n?n[e.name]:void 0}))})}})]})})})};var ta=a(79283),tl=a(7273),tn=a(42674),tr=a(30977),ti=a(92713),ts=a(53286);let to=e=>{let{setTimeWindow:t}=e,[a,r]=(0,n.useState)(!1),[i,s]=(0,n.useState)("1M"),{validators:o}=(0,eu.d)(),{url:d}=(0,A.XX)(),{data:u}=(0,ts.K)(null==d?void 0:d.api),h=(0,n.useMemo)(()=>new Date,[]),m=(0,n.useMemo)(()=>u?(0,tn.A)(h,new Date(u)):0,[u]),x=(0,n.useMemo)(()=>[{id:"1M",label:"1M",timeWindow:30},{id:"3M",label:"3M",timeWindow:91},{id:"6M",label:"6M",timeWindow:182},{id:"YTD",label:"YTD",timeWindow:(0,tn.A)(h,(0,tr.A)(h))-m+1},{id:"1Y",label:"1Y",timeWindow:(0,tn.A)(h,(0,ti.A)(h,1))},{id:"all",label:"All time",timeWindow:"all"}],[o]);return(0,l.jsxs)(c.ms.bL,{modal:!1,open:a,onOpenChange:()=>r(e=>!e),children:[(0,l.jsx)(c.ms.l9,{asChild:!0,children:(0,l.jsx)(c.$n,{application:!0,color:"secondary",variant:"text",size:"sm",endIcon:{iconKey:a?"chevronUp":"chevronDown",size:14},className:"normal-case hover:no-underline text-itemSecondaryDefault !p-2 !-m-2 !text-callout flounder:!text-callout font-semibold",children:i})}),(0,l.jsx)(c.ms.UC,{className:"py-2 pointer-events-auto w-[160px]",align:"end",sideOffset:0,children:x.map(e=>(0,l.jsx)(c.ms.q7,{className:"mb-px",children:(0,l.jsx)(c.$n,{size:"sm",variant:"menuItem",className:"justify-start disabled:backgroundSecondaryOnDefault",onClick:()=>{t(e.timeWindow),s(e.label)},children:e.label})},e.id))})]})},td=e=>{let{expandedState:t}=e,{t:a}=(0,d.Bd)(),{up:r}=(0,E.P)(),[i,s]=t,[o,u]=(0,n.useState)(em.e5),{selectedTab:h,setSelectedTab:m}=(0,S.d)("dailyRewardsTabs"),{dailyRewards:x,isLoading:p,isRefetching:g}=(0,ta.t)({timeWindow:o}),b=!x.length&&!p&&!g,v=(0,n.useMemo)(()=>{let e=[];return x.map(t=>{let{cumulativeBalance:a,unixtime:l,epoch:n,rewards:r,date:i}=(0,tl._)(t);e.push({balance:Number(a)>0?Number(a):0,rewards:Number(r)>0?Number(r):0,date:i,unixtime:l,epoch:n})}),e},[p,g,x]),f=(0,n.useMemo)(()=>[()=>(0,l.jsx)(te,{data:v,isLoading:p,dataConfig:{barKey:"rewards",xAxisKey:"unixtime",yAxisLeftKey:"rewards",formattedDateKey:"date"},tooltipLabels:{rewards:"Consensus income"},axisLabels:{rewards:"Daily rewards (ETH)"},axisDomains:{rewards:[()=>0,"auto"]}}),()=>(0,l.jsx)(te,{data:v,isLoading:p,dataConfig:{areaKey:"balance",xAxisKey:"unixtime",yAxisLeftKey:"balance",formattedDateKey:"date"},tooltipLabels:{balance:"Total rewards"},axisLabels:{balance:"Total rewards (ETH)"},axisDomains:{balance:e=>{let[t,a]=e,l=t-(a-t)*3,n=Math.max(Math.abs(t),Math.abs(a));return[l>0&&l!==n?l:0,n]},withdrawals:e=>{let[t,a]=e;return[0,a+(a-t)*3]}}})],[v,p]);return b?(0,l.jsx)(c.a_,{children:(0,l.jsx)(c.MP,{title:a("dashboard.KEYS.NO_DATA")})}):(0,l.jsx)(c.tU.bL,{asChild:!0,defaultValue:tc[0].value,value:h,onValueChange:e=>m(e),children:(0,l.jsxs)("div",{className:(0,c.cx)("min-w-full absolute size-full right-0 z-[12] bg-backgroundPrimaryDefault !outline-none *:!outline-none",i&&"flounder:top-0 h-full w-screen"),children:[(0,l.jsxs)("div",{className:"flex justify-between pr-px -mb-px ring-1 ring-inset ring-itemSecondaryMute",children:[(0,l.jsx)(c.tU.YJ,{items:tc.map(e=>({...e,bordered:!0,className:"px-0.5 py-3 h-10"}))}),(0,l.jsx)(c.az,{flex:!0,className:"ml-auto mr-2",children:(0,l.jsx)(to,{setTimeWindow:u})}),(null==r?void 0:r.flounder)&&(0,l.jsx)(c.$n,{color:"transparent",icon:{iconKey:i?"shrinkSquare":"expandSquare",size:18},onClick:()=>s(e=>!e)})]}),tc.map((e,t)=>(0,l.jsx)(c.tU.UC,{className:(0,c.cx)("flex-grow h-[calc(100%-39px)] ring-1 ring-inset ring-itemSecondaryMute"),value:e.value,tabIndex:-1,children:f[t]()},e.value))]})})},tc=[{value:"dailyRewards",children:"daily rewards"},{value:"balance",children:"total rewards"}];var tu=a(36750);let th=e=>{let{page:t,setPage:a,isLoading:n}=e,r=e=>{a(t=>Math.max(1,Math.min("function"==typeof e?e(t):e,10)))},i=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,l=Math.max(e-Math.floor(a/2),1),n=Math.min(l+a-1,t);return n-l+1<a&&(l=Math.max(n-a+1,1)),Array.from({length:n-l+1},(e,t)=>l+t)}(t,10),s=1===t,o=10===t;return(0,l.jsxs)("div",{className:(0,c.cx)("sticky flounder:absolute flounder:-bottom-px z-[2] left-0 flex justify-center w-full border-t flounder:justify-start bg-backgroundPrimaryDefault border-itemSecondaryMute","*:text-itemSecondaryDefault *:text-desktopCallout *:font-semibold *:flex *:justify-center *:items-center *:size-10  *:bg-backgroundPrimaryDefault *:cursor-pointer *:appearance-none"),children:[(0,l.jsx)(tm,{onClick:()=>r(e=>e-1),disabled:s||n,className:(0,c.cx)(s||n?tx:void 0),children:(0,l.jsx)(c.In,{iconKey:"chevronLeft"})}),i.map(e=>(0,l.jsx)(tm,{disabled:n,onClick:()=>r(e),className:(0,c.cx)(t===e?"!bg-backgroundSecondaryHighlight !text-itemPrimaryActive":void 0,n&&tx),children:e},e)),(0,l.jsx)(tm,{onClick:()=>r(e=>e+1),disabled:o||n,className:o||n?tx:void 0,children:(0,l.jsx)(c.In,{iconKey:"chevronRight"})})]})},tm=e=>{let{className:t,disabled:a,...n}=e;return(0,l.jsx)(c.$n,{application:!0,size:"sm",disabled:a,className:(0,c.cx)("select-none hover:bg-backgroundSecondaryHighlight hover:text-itemPrimaryActive border-0 !border-r first:!border-l first:-ml-px border-solid !border-itemSecondaryMute",t),...n})},tx="!text-itemPrimaryMute hover:!bg-backgroundPrimaryDefault hover:!text-itemPrimaryMute hover:!cursor-default",tp=()=>{let{t:e}=(0,d.Bd)(),{up:t}=(0,E.P)(),[a,r]=(0,n.useState)(!1),[i,s]=(0,n.useState)(1),{tableData:{sortedRows:o,columns:u,totalItems:h},tableStates:{isLoading:m},controlledSort:x,error:p}=(0,tu.n)({page:i}),g=null==t||!t.flounder||!a;return(0,l.jsxs)(l.Fragment,{children:[h&&h>0?(0,l.jsx)(eb.m,{tableName:"dailyRewards",tablesRows:o,isLoadingTableRows:!1,isAllRecordsFetched:!0,totalItems:h,disableSticky:!0,className:"tuna:mt-0.5"}):null,(0,l.jsxs)("div",{className:"flex flex-col items-stretch h-full gap-4 mx-0 flounder:flex-row z-[1] bg-backgroundPrimaryDefault relative",children:[(0,l.jsx)("div",{className:(0,c.cx)("w-full h-full px-0 border-y border-itemSecondaryMute"),children:g&&(0,l.jsxs)("div",{className:"relative h-full overflow-hidden bg-backgroundSecondaryHighlight border-x border-itemSecondaryMute",children:[(0,l.jsx)("div",{className:(0,c.cx)("overflow-auto","flounder:h-[calc(100dvh-365px)] min-h-[560px] -m-px"),children:(0,l.jsx)(j.I,{customOverflow:!0,rowsData:o,columns:u,emptyPrompt:{title:e("dashboard.KEYS.NO_DATA")},errorPrompt:p||void 0,isLoading:m,controlledSort:x,headerType:"sticky",className:"-mt-px w-[calc(100%-1px)]",children:e=>{let{index:t,style:a}=e,n=t-1;return(0,l.jsx)(c.XI.fI,{style:a,children:(0,T.dE)({row:o[n],columns:u})},t)}})}),(0,l.jsx)(th,{page:i,setPage:s,isLoading:m})]})}),(0,l.jsx)("div",{className:"w-full h-full px-0",children:(0,l.jsx)("div",{className:"relative h-[400px] flounder:h-full",children:(0,l.jsx)(td,{expandedState:[a,r]})})})]})]})},tg=e=>{let{address:t,disabled:a}=e,{onTokenSelectionChange:n,selectedTokens:r}=(0,y.o)(e=>({onTokenSelectionChange:e.onTokenSelectionChange,selectedTokens:e.selectedTokens})),i=!!t&&r.includes(t);return(0,l.jsx)("div",{tabIndex:-1,className:(0,c.cx)(er),onClick:()=>t&&!a&&n(t),children:(0,l.jsx)(c.Sc,{tabIndex:-1,id:"token-".concat(t),checked:i,disabled:a})})},tb=e=>{let{tokens:t}=e,{clearTokensSelection:a,selectAllTokens:n,selectedTokens:r}=(0,y.o)(e=>({clearTokensSelection:e.clearTokensSelection,selectAllTokens:e.selectAllTokens,onTokenSelectionChange:e.onTokenSelectionChange,selectedTokens:e.selectedTokens})),i=!!r.length;return i?(0,l.jsx)("button",{className:er,onClick:()=>i?a():t&&n(t),type:"button",tabIndex:-1,children:(0,l.jsx)(c.Sc,{id:"header-checkbox",checked:i,iconProps:{iconKey:"minus"}})}):(0,l.jsx)(l.Fragment,{})};var tv=a(21884);let tf=e=>{let{tokens:t,chainName:a}=e;return[{width:6,align:"center",headerCell:()=>(0,l.jsx)(tb,{tokens:t}),bodyCell:e=>(0,l.jsx)(tg,{address:e[tK.rewardToken],disabled:e.disabled})},{sortKey:tK.rewardToken,width:60,expand:!0,headerCell:tK.rewardToken,bodyCell:e=>{let t="".concat((0,et.g$)(a),"/address/").concat(e[tK.rewardToken]);return(0,l.jsx)(c.Mz,{prefix:e.tokenName,showCopyButton:!1,address:e[tK.rewardToken],externalLink:t})}},{width:38,align:"end",headerCell:tK.amount,bodyCell:e=>e[tK.amount]}]},tw=e=>{let t=new Date(new Date(e+"Z").toISOString()).getTime();if(t<new Date().getTime())return"Almost done…";let a=(0,tv.A)(t,{addSuffix:!0});return"~".concat(a.replace("less than a minute","a minute…"))};var ty=a(45557),tS=a(49633),tN=a(26906);let tE="/v1/eth/eigen",tA={getPodStatus:(e,t)=>"".concat(e).concat(tE,"/v1/status/").concat(t),generateCheckpointProofs:(e,t)=>"".concat(e).concat(tE,"/v1/checkpoints/").concat(t),generateWithdrawalCredentialsProofs:(e,t)=>"".concat(e).concat(tE,"/v1/credentials/").concat(t),getWalletRewards:(e,t)=>"".concat(e).concat(tE,"/v1/rewards/").concat(t),generateClaimProofs:(e,t,a)=>"".concat(e).concat(tE,"/v1/rewards/").concat(t,"/claim/").concat(a)},tT={getPodStatus:async(e,t)=>{try{return(await tN.Q.get(tA.getPodStatus(e,t))).data}catch(e){if(e instanceof Error)throw e;throw Error("Unknown error occurred")}},generateCheckpointProofs:async(e,t)=>{try{return(await tN.Q.get(tA.generateCheckpointProofs(e,t))).data}catch(e){if(e instanceof Error)throw e;throw Error("Unknown error occurred")}},generateWithdrawalCredentialsProofs:async(e,t)=>{try{return(await tN.Q.get(tA.generateWithdrawalCredentialsProofs(e,t))).data}catch(e){if(e instanceof Error)throw e;throw Error("Unknown error occurred")}},getWalletRewards:async(e,t,a)=>{try{return(await tN.Q.get(tA.getWalletRewards(e,t),{params:{type:a}})).data}catch(e){if(e instanceof Error)throw e;throw Error("Unknown error occurred")}},generateClaimProofs:async(e,t,a)=>{try{return(await tN.Q.get(tA.generateClaimProofs(e,t,a))).data}catch(e){if(e instanceof Error)throw e;throw Error("Unknown error occurred")}}};var tj=a(63904),tk=a(8685);let tC=()=>{var e,t;let{activeAccount:a}=(0,x.v)(),{url:l}=(0,A.XX)(),{t:n}=(0,d.Bd)(),{data:r,isLoading:i,error:s,refetch:o,isRefetching:c}=(0,tS.useQuery)(["balance",a,null==l?void 0:l.api],()=>{if(a&&(null==l?void 0:l.api))return tk.y.getBalance(a,l.api)},{refetchOnMount:"always",refetchInterval:4e3,refetchOnWindowFocus:!0,enabled:!!a&&!!(null==l?void 0:l.api)});return{balance:r,restaking:null==r?void 0:r.restaking,podAddress:(null==r||null==(t=r.restaking)||null==(e=t.eigenLayer)?void 0:e.podAddress)||void 0,isLoading:i,error:s&&(0,tj.u1)(s,n),refetch:o,isRefetching:c}},tI=["function symbol() view returns (string)"];function tR(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unclaimed",{url:t}=(0,A.XX)(),{activeChainId:a,activeAccount:l,provider:n}=(0,x.v)(),{podAddress:r}=tC(),i=!!(null==t?void 0:t.api)&&!!l&&!!r,{data:s,isLoading:o,error:d,isRefetching:c,refetch:u}=(0,tS.useQuery)(["rewardsList",r,a,l,null==t?void 0:t.api,e],async()=>l&&(null==t?void 0:t.api)&&n&&r?tD(await tT.getWalletRewards(null==t?void 0:t.api,l,e),n):null,{enabled:i});return{data:s,refetch:u,isLoading:!s&&!!i&&(o||c),error:d}}let tL=async(e,t)=>new ty.NZ(e,tI,t).symbol(),tD=async(e,t)=>Promise.all(e.map(async e=>({...e,symbol:await tL(e.tokenAddress,t)}))),t_=()=>{let[e,t]=(0,n.useState)({columnName:"Reward token",direction:"desc"}),[a,l]=(0,n.useState)("unclaimed"),{activeChainId:r,activeAccount:i}=(0,x.v)(),{data:s,isLoading:o,error:d}=tR(a),{clearTokensSelection:u}=(0,y.o)(e=>({clearTokensSelection:e.clearTokensSelection})),[h,m]=(0,n.useState)(),p=(0,n.useMemo)(()=>{let e=[];return s&&s.filter(e=>"0"!==e.amount).map((t,l)=>{let n=eA.Wp.padExecutionLayerData(eA.Wp.formatWeiToEther(t.amount));e.push({index:l,disabled:"unclaimed"!==a,tokenName:t.tokenName,[tK.rewardToken]:t.tokenAddress,[tK.amount]:"".concat(n," ").concat(t.symbol)})}),e},[o,e,i,s,a]),g=(0,n.useMemo)(()=>c.Wp.order(p,{propertyName:e.columnName,direction:e.direction}).map((e,t)=>({...e,rowIndex:t})),[o,e,i,p,a]),b=(0,n.useMemo)(()=>tf({tokens:p.map(e=>e[tK.rewardToken]),chainName:eA.Bt[r||eA.cG]}),[p,r,i,a]);return(0,n.useEffect)(()=>{u()},[i,a]),{tableData:{rows:p,forDownload:s&&tW(s),sortedRows:g,columns:b,activePubKeyState:[h,m],totalItems:g.length,selectedTab:a,setSelectedTab:l},controlledSort:{sortValues:e,setSortValues:t},tableStates:{isLoading:o},error:d}},tK={rewardToken:"Reward token",amount:"Amount"},tW=e=>e.map(e=>({"Reward token":e.tokenName,"Token address":e.tokenAddress,Amount:eA.Wp.padExecutionLayerData(eA.Wp.formatWeiToEther(e.amount))}));var tB=a(43943),tO=a(15516);function tP(){var e,t;let a=(0,y.m)(e=>e.setPendingOperations),l=(0,y.m)(e=>e.pendingOperations),{restaking:r,isLoading:i,error:s}=tC(),o=null==r?void 0:r.eigenLayer,d=null==o||null==(e=o.completableWithdrawals)?void 0:e.filter(e=>e.strategies.includes(em.dN)),c=null==d?void 0:d.filter(e=>!e.undelegationQueue),u=null==d?void 0:d.filter(e=>e.undelegationQueue),h=null==o||null==(t=o.pendingWithdrawals)?void 0:t.filter(e=>e.strategies.includes(em.dN)).map(e=>({...e,daysUntilCompletable:(0,tO.A)(new Date(e.completableTime),new Date)})),m=null==h?void 0:h.filter(e=>!e.undelegationQueue),x=null==h?void 0:h.filter(e=>e.undelegationQueue),p=u&&tM(u),g=c&&tM(c),b=x&&tM(x),v=m&&tM(m),f=(0,n.useRef)({completable:0,pending:0});return(0,n.useEffect)(()=>{let e=(null==d?void 0:d.length)||0,t=(null==h?void 0:h.length)||0;(null==l?void 0:l.pending)&&(e!==f.current.completable||t!==f.current.pending)&&a({type:null,pending:!1}),f.current={completable:e,pending:t}},[null==d?void 0:d.length,null==h?void 0:h.length,null==l?void 0:l.pending]),(0,n.useEffect)(()=>{a({type:null,pending:!1})},[]),{allWithdrawals:o,completable:{withdrawable:c,undelegated:u},pending:{withdrawable:m,undelegated:x},totalUndelegatedShares:p,totalWithdrawableShares:g,isLoadingForRestaking:i,totalPendingWithdrawableShares:v,totalPendingUndelegatedShares:b,error:s}}function tM(e){return e.reduce((e,t)=>{let a=t.shares.reduce((e,t)=>e.add(eE.gH.from(t)),eE.gH.from(0));return e.add(a)},eE.gH.from(0))}var tH=a(76500),tG=a(64875);let tV=()=>{let{t:e}=(0,d.Bd)(),{activeAccount:t,activeChainId:a,connectionStage:l,provider:n}=(0,x.v)(),{eigenpod:r}=(0,tG.useSfContracts)(),{podAddress:i}=tC(),{data:s,isLoading:o,error:c,refetch:u}=(0,tS.useQuery)(["withdrawableAmount",a,l,t],async()=>i&&n&&r?await r(i).withdrawableRestakedExecutionLayerGwei():null,{refetchOnMount:!0,refetchInterval:6e4,refetchOnWindowFocus:!0,enabled:!!i}),h=null==s?void 0:s.mul(1e9),m=h&&tH.formatEther(h);return{balanceInWei:o||c?null:h,balanceInEther:o||c?null:m,isLoading:!!i&&o,error:c&&(0,tj.u1)(c,e),refetch:u}},tz=()=>{let{t:e}=(0,d.Bd)(),{activeChainId:t,connectionStage:a,provider:l}=(0,x.v)(),{pendingTxs:r}=(0,ej.F)(),{podAddress:i}=tC(),{data:s,isLoading:o,error:c,refetch:u}=(0,tS.useQuery)(["podBalance",t,a,i],async()=>i&&l&&await l.getBalance(i)||null,{refetchOnMount:!0,refetchInterval:6e4,refetchOnWindowFocus:!0,enabled:!!i}),h=s&&tH.formatEther(s);return(0,n.useEffect)(()=>{u()},[null==r?void 0:r.length]),{balanceInWei:o||c?null:s,balanceInEther:o||c?null:h,isLoading:!!i&&o,error:c&&(0,tj.u1)(c,e),refetch:u}};function tU(){let{url:e}=(0,A.XX)(),{activeChainId:t,activeAccount:a}=(0,x.v)(),{balanceInWei:l}=tV(),{balanceInWei:i}=tz(),{podAddress:s}=tC(),{query:o}=(0,r.useRouter)(),{totalWithdrawableShares:d,totalPendingWithdrawableShares:c,totalUndelegatedShares:u,isLoadingForRestaking:h}=tP(),m=!!(null==e?void 0:e.api)&&!!s&&!!a,{data:p,isLoading:g,error:b,refetch:v}=(0,tS.useQuery)(["podStatus",s,t,a,null==e?void 0:e.api],async()=>s&&(null==e?void 0:e.api)?await tT.getPodStatus(null==e?void 0:e.api,s):null,{refetchOnMount:!0,refetchInterval:"restaking"===o.tab?2e4:void 0,refetchOnWindowFocus:!0,enabled:m}),f=null==p?void 0:p.MustForceCheckpoint,w=f?l:i,y=(0,n.useMemo)(()=>!!((null==p?void 0:p.Validators)&&Object.keys(p.Validators).length),[p,a,t,g]),S=(0,n.useMemo)(()=>{if(!(null==p?void 0:p.Validators))return{number:0,balance:eE.gH.from(0)};let e=Object.values(p.Validators).filter(e=>e.IsAwaitingWithdrawalCredentialProof);return{number:e.length,balance:e.reduce((e,t)=>e.add(eE.gH.from(t.CurrentBalance||0)),eE.gH.from(0))}},[null==p?void 0:p.Validators]),N=S.number>0,E=(0,n.useMemo)(()=>(null==p?void 0:p.Validators)&&y?Object.entries(p.Validators).filter(e=>{let[t,a]=e;return 2!==a.Status&&!a.IsAwaitingActivationQueue}).reduce((e,t)=>{let[a,l]=t,n=eE.gH.from(l.CurrentBalance||0);return e.add(n)},eE.gH.from(0)).mul(1e9):eE.gH.from(0),[null==p?void 0:p.Validators,y]),T=d&&Number(w)<Number(d)?eE.gH.from(0):d,j=(null==p?void 0:p.CurrentTotalSharesETH.includes("e"))?Number(p.CurrentTotalSharesETH).toString():null==p?void 0:p.CurrentTotalSharesETH,k=(0,n.useMemo)(()=>{if((null==p?void 0:p.NumberValidatorsToCheckpoint)!==0||Number(E)||w)return w&&"0"!==w.toString()?w.sub(T||eE.gH.from(0)).sub(c||eE.gH.from(0)):eE.gH.from(0)},[w,p,c]),C=(0,n.useMemo)(()=>{if(Number(d))return d},[d]),I=(()=>{if(!j||!(null==p?void 0:p.TotalSharesAfterCheckpointGwei)||f&&!N||0===p.NumberValidatorsToCheckpoint&&0===Number(E))return eE.gH.from(0);if(N)return S.balance.mul(1e9);let e=eE.gH.from(eA.Wp.formatEtherToWei(j));return eE.gH.from(Number(p.TotalSharesAfterCheckpointGwei)).mul(1e9).sub(e)})(),R=!g&&!!Number(I)&&(!f||N),L=!g&&null===b&&(R||(null==k?void 0:k.toString())!=="0"||!!(C&&(null==C?void 0:C.toString())!=="0")||!!(u&&(null==u?void 0:u.toString())!=="0"));return{podStatus:p,podValidatorsBalance:E,currentTotalShares:null!=j?j:"0",unstakedBalance:I,queueWithdrawalShares:k,withdrawableShares:C,mustForceCheckpoint:f,isAwaitingForWithdrawalCredentialProofs:N,isAnyValidators:y,isRestakingAvailable:R,highlightRestakingIcon:L,refetch:v,isLoading:!p&&!!m&&(g||h),error:b}}var tF=a(25239);function tY(){let{activeAccount:e,activeChainId:t}=(0,x.v)(),{delegatedTo:a}=(0,tF.O)(),{contract:l}=(0,A.XX)(),{data:n,refetch:r}=(0,tS.useQuery)(["delegationStatus",e,t],async()=>e?await a({address:e}):null,{refetchOnMount:!0,enabled:!!e,refetchInterval:6e4,refetchOnWindowFocus:!0}),i=()=>null==n?null:n===em.B2?"notDelegated":n.toLowerCase()===(null==l?void 0:l.eigenLayerAvsOperator.toLowerCase())?"delegatedToStakefish":"delegatedToExternal";return{data:i(),refetch:r,isReadyToDelegate:"notDelegated"===i()}}var tQ=a(16181);let tq=async(e,t,a)=>{let l=a.getUncheckedSigner(t);if(!l)throw Error("Failed to get signer");let n=[];for(let t of e){let e={to:null==t?void 0:t.to,data:"0x".concat(t.calldata)},a=await l.sendTransaction(e);n.push(a)}return await Promise.all(n.map(e=>e.wait(1))),n.map(e=>e.hash)},t$=()=>{let{apiStatus:e}=(0,eR.a)(),{currentTotalShares:t,unstakedBalance:a,queueWithdrawalShares:l,withdrawableShares:n,podStatus:r}=tU(),{totalUndelegatedShares:i,totalPendingUndelegatedShares:s,totalPendingWithdrawableShares:o,pending:d}=tP(),{isLoading:c}=tz(),{isLoading:u}=tV(),h=(0,y.m)(e=>e.pendingOperations),m=null==e?void 0:e.isEigenLayerEnabled,x=eA.Wp.padBeaconChainData(t),p=tX(a),g=tX(null==i?void 0:i.add(s||eE.gH.from(0))),b=tX(l),v=tX(n),f=u||c,w=!m||Number(t)&&!Number(g),S=Number(g)||(null==h?void 0:h.type)==="redelegate"||(null==h?void 0:h.type)==="undelegate",N=Number(o)||Number(n)||(null==h?void 0:h.type)==="queue"||(null==h?void 0:h.type)==="withdrawal",E=!m||f||!Number(v)||!N,A=!m||f||0===Number(b)||(null==r?void 0:r.NumberValidatorsToCheckpoint)!==0&&Number(b)>Number(x)&&Number(b)>Number(p),T=(null==h?void 0:h.type)==="queue"||(null==h?void 0:h.type)==="withdrawal",j=!f&&!!Number(v)&&!T,k=!f&&!!Number(b)&&!T;return{values:{totalRestakedValue:x,availableToRestakeValue:p,availableToRedelegateValue:g,availableToWithdraw:v,availableToQueue:b},loading:{isLoadingForBalance:f,isPendingWithdrawalsOperations:T},states:{showAvailableToRedelegateBox:S,showAvailableToWithdrawBox:N,highlightAvailableToWithdrawSign:j,highlightAvailableToQueueSign:k},buttons:{showDelegateButton:w,disableQueueButton:A,disableWithdrawalButton:E},pending:d}},tX=e=>e&&eA.Wp.padBeaconChainData(eA.Wp.formatWeiToEther(e.toString())),tZ=()=>{var e;let{isReadyToDelegate:t}=tY(),{pending:a}=t$(),{handleDelegate:l,handleUndelegate:r,handleCompleteWithdrawal:i,handleQueueWithdrawal:s,handleClaimRewards:o,generateCheckpointProofs:d,generateWithdrawalCredentialsProofs:c}=function(){let{url:e,contract:t}=(0,A.XX)(),{activeAccount:a,provider:l}=(0,x.v)(),{delegateTo:n,undelegate:r,queueWithdrawal:i,completeQueuedWithdrawals:s}=(0,tF.O)(),{podAddress:o}=tC(),d=(0,y.m)(e=>e.setPendingOperations);return{handleDelegate:async()=>{if(!o||!l||!t)throw Error("Missing required values");let e=tQ.p(32),a=await l.getSigner().signMessage("I hereby confirm delegation to stakefish");return await n({operator:null==t?void 0:t.eigenLayerAvsOperator,approverSignatureAndExpiry:{signature:a,expiry:"0"},approverSalt:e})},handleUndelegate:async()=>{if(!a)throw Error("Missing required values");let e=await r({address:a});return d({type:"undelegate",pending:!0}),e},handleCompleteWithdrawal:async function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],l=arguments.length>2?arguments[2]:void 0;if(!a||!(null==e?void 0:e.length))throw Error("No completeable withdrawals available");let n=e.map(()=>[em.B2]),r=e.map(()=>0),i=e.map(()=>t),o=e.map(e=>({staker:e.staker,delegatedTo:e.delegatedTo,withdrawer:e.withdrawer,nonce:e.nonce,startBlock:e.startBlock,strategies:e.strategies,shares:e.shares})),c=await s({withdrawals:o,tokens:n,middlewareTimesIndexes:r,receiveAsTokens:i});return d({type:l,pending:!0}),c},handleQueueWithdrawal:async e=>{if(!e||!a)throw Error("Missing required values");let t=await i({strategies:[em.dN],shares:[e],withdrawer:a});return d({type:"queue",pending:!0}),t},handleClaimRewards:async n=>{if(!a||!(null==e?void 0:e.api)||!l||!(null==t?void 0:t.eigenLayerRewardsCoordinator))throw Error("Missing required values");let r=(await tT.generateClaimProofs(e.api,a,n.join(","))).map(e=>({to:t.eigenLayerRewardsCoordinator,...e}));return await tq(r,a,l)},generateCheckpointProofs:async()=>{if(!o||!(null==e?void 0:e.api)||!l||!a)throw Error("Missing required values");let t=await tT.generateCheckpointProofs(e.api,o);return await tq(t,a,l)},generateWithdrawalCredentialsProofs:async()=>{if(!o||!(null==e?void 0:e.api)||!l||!a)throw Error("Missing required values");let t=await tT.generateWithdrawalCredentialsProofs(e.api,o);return await tq(t,a,l)}}}(),{refetch:u}=tY(),{mustForceCheckpoint:h,isAwaitingForWithdrawalCredentialProofs:m,refetch:p,podStatus:g}=tU(),{refetch:b}=tV(),{refetch:v}=tR(),{refetch:f,podAddress:w}=tC(),{refetch:S}=tz(),{onOpenChange:N}=(0,D.s)("queueWithdrawalsForm"),{clearTokensSelection:E}=(0,y.o)(e=>({clearTokensSelection:e.clearTokensSelection})),[T,j]=(0,n.useState)(null),[k,C]=(0,n.useState)({state:"closed",steps:[],currentStepIndex:0}),I=(0,n.useRef)(0),R=!!(null==g||null==(e=g.ActiveCheckpoint)?void 0:e.ProofsRemaining),L=e=>{let{stepIndex:t,status:a="initial",txHash:l,onSubmit:n}=e;I.current=t,C(e=>({...e,steps:z[e.state].filter(Boolean).map((r,i)=>{var s;let o=null==e||null==(s=e.steps)?void 0:s[i];return i<t&&o?o:i===t?{...r,status:a||r.status,onSubmit:n||r.onSubmit,txHash:l||(null==o?void 0:o.txHash)}:i>t?{...r,status:"error"===a?"initial":(null==o?void 0:o.status)||r.status,txHash:"error"===a||null==o?void 0:o.txHash,onSubmit:"error"===a?n||r.onSubmit:(null==o?void 0:o.onSubmit)||r.onSubmit}:r}),currentStepIndex:"submitted"===a?t+1:t,errorStep:"error"===a?t:void 0}))},_=async()=>{try{j(null),C({state:"undelegate",currentStepIndex:0}),L({stepIndex:0,status:"pending"});let e=await r();L({stepIndex:0,status:"pending",txHash:null==e?void 0:e.hash}),await (null==e?void 0:e.wait()),L({stepIndex:0,status:"submitted"}),tB.N.track("Restaking |  Undelegated",{podAddress:w}),await V(),await u()}catch(e){L({stepIndex:I.current,status:"error",onSubmit:_}),j(e)}},K=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0;j(null),C(e=>({...e,state:a,currentStepIndex:t})),L({stepIndex:t,status:"pending"}),await V();let l=await i(e,"completeWithdraw"===a,{redelegate:"redelegate",queueWithdraw:"queue",completeWithdraw:"withdrawal",restakeBack:"withdrawal"}[a]);L({stepIndex:t,status:"pending",txHash:null==l?void 0:l.hash}),await (null==l?void 0:l.wait()),L({stepIndex:t,status:"submitted",onSubmit:()=>K(e,t,a)})},W=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;j(null),C(a=>({...a,state:t,currentStepIndex:e})),L({stepIndex:e,status:"pending"});let a=await l();L({stepIndex:e,status:"pending",txHash:null==a?void 0:a.hash}),await (null==a?void 0:a.wait()),L({stepIndex:e,status:"submitted"}),await u(),await V()},B=async()=>{if(!t)throw Error("Already delegated");C({state:"delegate",currentStepIndex:0});try{await W(0,"delegate"),tB.N.track("Restaking |  Delegated to stakefish",{podAddress:w})}catch(e){L({stepIndex:I.current,status:"error",onSubmit:B}),j(e)}},O=async e=>{try{if(j(null),C(e=>({...e,state:"redelegate",currentStepIndex:I.current||0})),0===I.current){L({stepIndex:0,status:"pending"});let t=await i(e,!1,"redelegate");L({stepIndex:0,status:"pending",txHash:null==t?void 0:t.hash}),await (null==t?void 0:t.wait()),L({stepIndex:0,status:"submitted"})}t&&(L({stepIndex:1,status:"pending"}),await W(1,"redelegate")),tB.N.track("Restaking |  Re-delegated to stakefish",{podAddress:w})}catch(t){L({stepIndex:I.current,status:"error",onSubmit:()=>O(e)}),j(t)}},P=async()=>{let e=R?1:2;j(null),C(e=>({...e,state:"restake",currentStepIndex:I.current||0}));try{var l;if(I.current<=1)if(m){L({stepIndex:0,status:"pending"});let e=await c();L({stepIndex:0,status:"submitted",txHash:e[0]})}else{L({stepIndex:0,status:"pending"});for(let t=0;t<e;t++){L({stepIndex:t,status:"pending"});let e=await d();L({stepIndex:t,status:"submitted",txHash:e[0]})}}p(),V(),!t||(null==(l=a.undelegated)?void 0:l.length)||await W(m?2:e,"restake"),tB.N.track("Restaked",{podAddress:w})}catch(e){L({stepIndex:I.current,status:"error",onSubmit:P}),j(e),await b()}},M=async e=>{let t=R?1:2;try{if(N(!1),j(null),C(e=>({...e,state:"queueWithdraw",currentStepIndex:I.current||0})),!h&&I.current<=1){L({stepIndex:0,status:"pending"});for(let e=0;e<t;e++){L({stepIndex:e,status:"pending"});let t=await d();L({stepIndex:e,status:"submitted",txHash:t[0]})}}let a=h?0:t;L({stepIndex:a,status:"pending"}),await V();let l=await s(e);L({stepIndex:a,status:"pending",txHash:null==l?void 0:l.hash}),await (null==l?void 0:l.wait()),L({stepIndex:a,status:"submitted"}),tB.N.track("Restaking |  Quequed withdrawal",{podAddress:w}),await V()}catch(t){L({stepIndex:I.current,status:"error",onSubmit:()=>M(e)}),j(t)}},H=async(e,t)=>{let a=R?1:2;try{if(j(null),C(e=>({...e,state:t,currentStepIndex:0})),!h&&I.current<=1){L({stepIndex:0,status:"pending"});for(let e=0;e<a;e++){L({stepIndex:e,status:"pending"});let t=await d();L({stepIndex:e,status:"submitted",txHash:t[0]})}}await K(e,h?0:a,t),tB.N.track("Restaking | Completed withdrawal",{podAddress:w}),await V()}catch(a){L({stepIndex:I.current,status:"error",onSubmit:()=>H(e,t)}),j(a)}},G=async e=>{try{j(null),C({state:"claim",currentStepIndex:0}),L({stepIndex:0,status:"pending"});let t=await o(e);L({stepIndex:0,status:"submitted",txHash:t[0]}),tB.N.track("Restaking |  Claimed rewards",{podAddress:w}),E(),await v()}catch(t){L({stepIndex:I.current,status:"error",onSubmit:()=>G(e)}),j(t)}},V=async()=>{await Promise.allSettled([b(),f(),p(),S()])},z={restake:(()=>{var e;let l=[];return m||(R||l.push({label:"Begin restaking process",icon:"bank"}),l.push({label:"Restake",icon:"coins"})),!t||(null==(e=a.undelegated)?void 0:e.length)||l.push({label:"Delegate",icon:"speedometer"}),l})(),queueWithdraw:(()=>{let e=[];return h||(R||e.push({label:"Begin withdrawal",icon:"bank"}),e.push({label:"Generating proofs",icon:"certificate"})),e.push({label:"Queue withdrawal",icon:"banknote"}),e})(),completeWithdraw:(()=>{let e=[];return h||(R||e.push({label:"Begin withdrawal",icon:"bank"}),e.push({label:"Generating proof",icon:"certificate"})),e.push({label:"Complete withdrawal",icon:"banknote"}),e})(),redelegate:(()=>{let e=[];return e.push({label:"Complete withdrawal",icon:"banknote"}),t&&e.push({label:"Delegate",icon:"speedometer"}),e})(),delegate:[{label:"Delegate",icon:"speedometer"}],undelegate:[{label:"Undelegate",icon:"speedometer"}],restakeBack:[{label:"Restake",icon:"coins"}],claim:[{label:"Claiming",icon:"coins"}],closed:[]};return{errorMessage:T,renderOperations:z,updateStepStatus:L,dialogData:k,setDialogData:C,onClaimRewards:G,onCompleteWithdraw:H,onQueueWithdraw:M,onRestakeAndDelegate:P,onRedelegate:O,onDelegate:B,onDelegateStep:W,onCompleteWithdrawStep:K,onUndelegate:_,resetState:()=>{j(null),C({state:"closed",steps:[],currentStepIndex:0})}}},tJ=e=>{var t,a;let{dialogData:n,resetState:r,errorMessage:i}=e,{t:s}=(0,d.Bd)(),o=null==n||null==(t=n.steps)?void 0:t.filter(Boolean),u=null==o?void 0:o.some(e=>"error"===e.status),h=null==o?void 0:o.every(e=>"submitted"===e.status),m=null==o||null==(a=o.filter(e=>"error"===e.status))?void 0:a[0],{activeChainId:p}=(0,x.v)(),g=p?eA.Bt[p||1]:void 0,b={initial:(0,l.jsx)(l.Fragment,{}),pending:(0,l.jsx)(l.Fragment,{}),submitted:(0,l.jsx)(c.In,{iconKey:"check",size:12}),error:(0,l.jsx)(c.In,{iconKey:"close",size:12})},v={restake:{title:s("dashboard.RESTAKING.RESTAKING_PROGRESS"),subtitle:s("dashboard.RESTAKING.RESTAKING_PROGRESS_SUBTITLE"),buttonTitle:s("dashboard.RESTAKING.RESTAKING_PROGRESS")},redelegate:{title:s("dashboard.RESTAKING.REDELEGATE_PROGRESS"),subtitle:s("dashboard.RESTAKING.REDELEGATE_PROGRESS_SUBTITLE"),buttonTitle:s("dashboard.RESTAKING.REDELEGATE")},delegate:{title:s("dashboard.RESTAKING.DELEGATING_PROGRESS"),subtitle:s("dashboard.RESTAKING.DELEGATING_PROGRESS_SUBTITLE"),buttonTitle:s("dashboard.RESTAKING.DELEGATE_TO")},undelegate:{title:s("dashboard.RESTAKING.UNDELEGATE"),subtitle:s("dashboard.RESTAKING.UNDELEGATE_SUBTITLE"),buttonTitle:s("dashboard.RESTAKING.UNDELEGATE")},queueWithdraw:{title:s("dashboard.RESTAKING.QUEUE_WITHDRAWAL_PROGRESS"),subtitle:s("dashboard.RESTAKING.QUEUE_WITHDRAWAL_PROGRESS_SUBTITLE"),buttonTitle:s("dashboard.RESTAKING.QUEUE_WITHDRAWAL")},completeWithdraw:{title:s("dashboard.RESTAKING.COMPLETE_WITHDRAWAL_PROGRESS"),subtitle:s("common.WEB3.EIGENPOD_WAIT"),buttonTitle:s("dashboard.RESTAKING.COMPLETE_WITHDRAWAL")},claim:{title:s("dashboard.RESTAKING.CLAIM_REWARDS"),subtitle:s("common.WEB3.EIGENPOD_WAIT"),buttonTitle:s("dashboard.RESTAKING.CLAIM_REWARDS")},restakeBack:{title:s("dashboard.RESTAKING.COMPLETE_WITHDRAWAL_PROGRESS"),subtitle:s("dashboard.RESTAKING.RESTAKE_BACK_SUBTITLE"),buttonTitle:s("dashboard.RESTAKING.COMPLETE_WITHDRAWAL_PROGRESS")},closed:null}[n.state];return v?(0,l.jsx)(c.lG.bL,{open:t0(n.state),children:(0,l.jsx)(c.lG.UC,{closeButtonProps:{onClick:()=>r()},id:"restaking-status-dialog",innerClassName:(0,c.cx)("max-w-[440px] flounder:w-[440px] flounder:p-7"),hideCloseButton:!u&&!h,children:(0,l.jsxs)(c.az,{flex:!0,justifyContent:"center",textAlign:"center",flow:"column",className:"min-h-[74px]",children:[(0,l.jsx)(c.az,{flex:!0,alignItems:"center",justifyContent:"center",className:"mx-auto mb-2",children:(0,l.jsx)(c.In,{iconKey:"hourglass",size:18})}),(0,l.jsxs)(c.az,{className:"w-full space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("h5",{className:"text-h5 text-balance mx-auto max-w-[340px]",children:v.title}),i&&(0,l.jsx)("p",{className:(0,c.cx)("text-callout font-semibold text-itemErrorDefault"),children:i}),v.subtitle&&!i&&(0,l.jsx)("p",{className:"font-semibold text-callout text-itemSecondaryDefault",children:v.subtitle})]}),null==o?void 0:o.map((e,t)=>{let a="pending"===e.status,r="error"===e.status,i="submitted"===e.status,s=t===n.currentStepIndex,o="".concat((0,et.g$)(g),"/tx/").concat(e.txHash),d=i||r;return(0,l.jsxs)("div",{className:(0,c.cx)("flex gap-4 items-center",s||d?"text-itemPrimaryDefault":"text-itemSecondaryDefault"),children:[(0,l.jsxs)("div",{className:(0,c.cx)("flex items-center justify-center size-10 relative ring-1 ring-inset ring-itemInverseMute rounded-full text-itemSecondaryDefault",0!==t&&"after:absolute after:bottom-full after:left-0 after:right-0 after:mx-auto after:h-6 after:w-px after:bg-itemInverseMute",s&&"text-itemPrimaryDefault",(s||d)&&"after:bg-backgroundInverseDefault",d&&"text-backgroundPrimaryDefault  bg-backgroundInverseDefault ring-backgroundInverseDefault"),children:[!a&&e.icon&&(0,l.jsx)(c.In,{iconKey:e.icon}),a&&(0,l.jsx)(c.mP,{className:"clear-inline-indent size-5"}),(r||i)&&(0,l.jsx)("span",{className:(0,c.cx)("-top-1 -right-1 absolute size-4 ring-2 ring-backgroundPrimaryDefault rounded-full flex items-center justify-center",r&&"bg-itemErrorDefault text-backgroundPrimaryDefault",i&&"bg-brandDefault text-backgroundPrimaryOnDefault"),children:b[(null==e?void 0:e.status)||"initial"]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between flex-1 font-semibold text-callout",children:[(0,l.jsxs)("span",{children:[e.label,a&&"…"]}),(null==e?void 0:e.txHash)&&(0,l.jsx)(c.$n,{...(0,et.bI)(o),href:o,size:"sm",variant:"text",className:"!p-0 normal-case !m-0 text-callout gap-1.5",endIcon:{iconKey:"share",size:16,className:"!m-0"},children:"View"})]})]},t)})]}),m&&u&&(0,l.jsx)(c.$n,{application:!0,onClick:m.onSubmit,size:"lg",className:"w-full mt-6",children:m.label}),h&&(0,l.jsx)(c.$n,{application:!0,onClick:()=>r(),color:"secondary",size:"md",className:"w-full mt-6",children:"Close"})]})})}):(0,l.jsx)(l.Fragment,{})},t0=e=>e&&"closed"!==e,t1=e=>{let{disabled:t,variant:a,onSubmit:n,...r}=e,{t:i}=(0,d.Bd)(),{connectionStage:s}=(0,x.v)(),o={restake:{size:"md",className:"w-full",children:i("dashboard.RESTAKING.RESTAKE")},delegate:{size:"xs",color:"transparent",className:"uppercase !bg-transparent",endIcon:{iconKey:"arrowRight",size:14},children:i("dashboard.RESTAKING.DELEGATE_TO")},undelegate:{size:"xs",color:"transparent",className:"uppercase !bg-transparent",endIcon:{iconKey:"arrowRight",size:14},children:i("dashboard.RESTAKING.UNDELEGATE")},redelegate:{size:"md",className:"w-full",children:i("dashboard.RESTAKING.DELEGATE_TO")},queueWithdraw:{variant:"outline",color:"secondary",size:"sm",className:"w-full",children:i("dashboard.RESTAKING.QUEUE_CTA")},completeWithdraw:{variant:"outline",color:"secondary",size:"sm",className:"w-full",children:i("dashboard.RESTAKING.WITHDRAW")},restakeBack:{variant:"outline",color:"secondary",size:"sm",className:"w-full",children:i("dashboard.RESTAKING.RESTAKE")},claim:{size:"sm"},closed:{}};return(0,l.jsx)(c.$n,{application:!0,disabled:t||"connected"!==s,...o[a],onClick:n,...r})},t2=()=>{let{t:e}=(0,d.Bd)(),{selectedTokens:t}=(0,y.o)(e=>({selectedTokens:e.selectedTokens})),{onClaimRewards:a,errorMessage:n,resetState:r,dialogData:i}=tZ(),s=n&&(0,tj.u1)(n,e);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(t1,{variant:"claim",onSubmit:()=>(null==t?void 0:t.length)&&a(t),disabled:!t.length,children:["Claim (",t.length,")"]}),(0,l.jsx)(tJ,{resetState:r,dialogData:i,errorMessage:null==s?void 0:s.subtitle})]})};var t4=a(1909),t5=a(63228);let t3=e=>{let{onSubmit:t}=e,{t:a}=(0,d.Bd)(),{connectionStage:r}=(0,x.v)(),{queueWithdrawalShares:i}=tU(),s=eA.Wp.padBeaconChainData(eA.Wp.formatWeiToEther((i||eE.gH.from(0)).toString())),o=s&&Number(s)>0,{formState:c,control:u,handleSubmit:h,getValues:m,setValue:p,watch:g,trigger:b,clearErrors:v,reset:f}=(0,t4.mN)({defaultValues:{shares:null}}),w=c.errors.shares,y=null===m("shares"),S=(0,n.useCallback)(()=>{if(y)return;let e=m("shares");0!==Number(e)&&b(),0===Number(e)&&(p("shares",0),v()),w?p("shares",null):p("shares",eA.Wp.padBeaconChainData(String(m("shares"))))},[w,y]),N=(0,n.useCallback)(()=>{let e=m("shares");t(eA.Wp.formatEtherToWei(String(e))),p("shares",null)},[m,t]);return(0,n.useEffect)(()=>{y||b()},[g("shares")]),{resetForm:()=>f(),buttonDisabled:0===Number(m("shares"))||"unsupportedConnected"===r,onSubmit:h(N),helperButtonProps:{children:a("dashboard.KEYS.MAX_BUTTON"),disabled:String(m("shares"))===s||!o,onClick:()=>{p("shares",s),b()}},inputFieldProps:{rules:{validate:e=>(0,t5.i3)(e,s),min:{value:0,message:a("commonForms.ERRORS.TOO_SMALL",{value:0})},max:{value:s,message:a("commonForms.ERRORS.TOO_BIG",{value:s})}},control:u,inputProps:{disabled:!o,invalid:!!(null==w?void 0:w.message),hint:(null==w?void 0:w.message)?a(null==w?void 0:w.message,{value:s}):(0,l.jsx)("div",{className:"mr-[-100px]",children:a("dashboard.RESTAKING.AVAILABLE_TO_QUEUE",{amount:"".concat(s," ETH")})}),min:0,max:s,placeholder:eA.Wp.padBeaconChainData("0"),onBlur:()=>S()}}}},t6=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"text";return(0,l.jsx)("span",{className:"text-itemSecondaryDefault",children:"text"===e?c.AA.Sb:c.AA.Hh})};var t9=a(62807),t7=a(97850);let t8=e=>{let{disabled:t,inputFieldProps:a,onSubmit:n,reset:r,helperButtonProps:i,children:s}=e,{t:o}=(0,d.Bd)(),{open:u,onOpenChange:h}=(0,D.s)("queueWithdrawalsForm");return(0,l.jsxs)(c.lG.bL,{open:!!u,onOpenChange:()=>{h(!u)},children:[(0,l.jsx)(c.lG.l9,{asChild:!0,children:s}),(0,l.jsx)(c.lG.UC,{closeButtonProps:{onClick:r},id:"restaking-status-dialog",innerClassName:"max-w-[466px] flounder:w-[466px] flounder:p-4",children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("h4",{className:"mt-1 mb-4 font-semibold text-callout",children:o("dashboard.RESTAKING.QUEUE_WITHDRAWAL")}),(0,l.jsx)("form",{children:(0,l.jsxs)("div",{className:"relative flex gap-2 mb-4",children:[(0,l.jsx)(t7.Z,{name:"shares",inputProps:{},...a,buttonHelper:(0,l.jsx)("div",{className:"absolute -translate-y-1/2 right-1.5 flounder:right-2 top-1/2",children:(0,l.jsx)(c.$n,{size:"sm",color:"secondary",...i})})}),(0,l.jsx)(c.$n,{size:"md",disabled:t,application:!0,onClick:n,className:"h-10 flounder:h-12",children:o("dashboard.RESTAKING.QUEUE_CTA")})]})})]})})]})};var ae=a(47165);let at=()=>{let e=(0,r.useRouter)(),{apiStatus:t}=(0,eR.a)(),{connectionStage:a}=(0,x.v)(),n=(0,ae.o)(),i=!(null==t?void 0:t.isEigenLayerEnabled)||"connected"!==a||!n;return(0,l.jsx)(c.$n,{application:!0,disabled:i,size:"md",color:"brand",className:"w-full",onClick:()=>e.replace({pathname:e.pathname,query:{...e.query,stake:!0,type:"eigenlayer"}},void 0,{shallow:!0}),children:null==n?void 0:n.title})},aa=()=>{var e;let{t}=(0,d.Bd)(),{pending:a}=tP(),{open:n,onOpenChange:r}=(0,D.s)("queuedWithdrawalsList"),i=e=>{let t=e.reduce((e,t)=>e.add(eE.gH.from(t)),eE.gH.from(0));return eA.Wp.padBeaconChainData(eA.Wp.formatWeiToEther(t.toString()))};return(0,l.jsxs)(c.lG.bL,{open:!!n,onOpenChange:()=>{r(!n)},children:[(0,l.jsx)(c.lG.l9,{asChild:!0,children:(0,l.jsx)(c.$n,{application:!0,variant:"text",size:"xs",startIcon:{iconKey:"list"},className:"-my-1 capitalize",children:t("dashboard.RESTAKING.QUEUED_CTA")})}),(0,l.jsx)(c.lG.UC,{id:"queued-list-dialog",innerClassName:(0,c.cx)("max-w-[440px] flounder:w-[440px] flounder:p-7"),children:(0,l.jsxs)(c.az,{flex:!0,justifyContent:"center",textAlign:"center",flow:"column",className:"min-h-[74px]",children:[(0,l.jsx)(c.az,{flex:!0,alignItems:"center",justifyContent:"center",className:"mx-auto mb-2",children:(0,l.jsx)(c.In,{iconKey:"hourglass",size:18})}),(0,l.jsx)("div",{className:"space-y-1.5",children:(0,l.jsx)("h5",{className:"text-h5 text-balance mx-auto max-w-[340px]",children:t("dashboard.RESTAKING.WITHDRAWAL_QUEUE")})}),(0,l.jsx)(c.az,{className:"w-full space-y-6",children:(0,l.jsx)("div",{className:"w-full pt-4 divide-y divide-itemPrimaryMute",children:null==(e=a.withdrawable)?void 0:e.map((e,t)=>{let a=i(e.shares),n=tw(null==e?void 0:e.completableTime);return(0,l.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,l.jsx)("div",{className:"text-callout text-itemSecondaryDefault",children:n}),(0,l.jsxs)("div",{className:"font-semibold text-callout",children:[a," ETH"]})]},t)})})}),(0,l.jsx)(c.$n,{application:!0,color:"secondary",type:"submit",size:"lg",className:"w-full mt-6",onClick:()=>r(!1),children:t("dashboard.RESTAKING.GOT_IT")})]})})]})},al=e=>{let{size:t="goldfish",active:a}=e,{connectionStage:n}=(0,x.v)();return"disconnected"===n?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)("div",{tabIndex:-1,className:(0,c.cx)("rounded-full flex items-center justify-center",a?"bg-brandDefault text-neutral0":"bg-backgroundPrimaryMute text-backgroundPrimaryOnMute","goldfish"===t?"size-3.5":"size-4"),children:(0,l.jsx)(c.In,{iconKey:"voltage",size:8})})};var an=a(32),ar=a.n(an),ai=a(39635);a(29143).env.EIGEN_EXPLORER_API_TOKEN;let as=()=>{let{t:e}=(0,d.Bd)(),{contract:t,url:a}=(0,A.XX)(),{activeAccount:r,provider:i}=(0,x.v)(),[s,o]=(0,n.useState)(!1),{data:u,isLoading:h,error:m}=(0,tS.useQuery)(["eigenLayerData",r,a,t],async()=>{if(!r||!i||!a||!t)return null;let{data:e}=await ar().get("/api/eigen-explorer-data",{params:{url:a.eigenLayerExplorer,operatorAddress:t.eigenLayerAvsOperator}});return e},{enabled:!!(r&&i&&a&&t),retry:2});return(0,l.jsxs)(c.lG.bL,{open:s,onOpenChange:o,children:[(0,l.jsx)(c.lG.l9,{asChild:!0,children:(0,l.jsxs)("div",{className:(0,c.cx)("cursor-pointer flex items-center justify-between w-full gap-3 px-4 py-3.5 font-sans font-semibold text-left border border-itemSecondaryMute bg-backgroundPrimaryDefault text-body4 focus:outline-itemSecondaryDefault",(!!m||h)&&"pointer-events-none opacity-95"),children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{children:e("dashboard.RESTAKING.AVS_SECURING")}),(null==u?void 0:u.avsCount)&&(0,l.jsx)("div",{children:(0,l.jsx)("span",{className:"text-tag2 tracking-normal font-mono flex px-[5px] py-[2px] rounded-full text-mobileTag1 bg-backgroundSecondaryDefault ring-1 ring-itemSecondaryMute",children:null==u?void 0:u.avsCount})})]}),(0,l.jsx)("div",{className:"relative",children:h?(0,l.jsx)("div",{className:"-m-1",children:(0,l.jsx)(ai.m,{size:"salmon"})}):(0,l.jsx)(c.In,{size:20,iconKey:m?"alertFilled":"infoCircle",className:"-mt-px size-4 flounder:size-5"})})]})}),s&&(null==u?void 0:u.avsRegistrations)&&(0,l.jsx)(ao,{list:u.avsRegistrations})]})},ao=e=>{let{list:t}=e,{t:a}=(0,d.Bd)(),{contract:n,url:r}=(0,A.XX)(),{activeAccount:i,provider:s}=(0,x.v)(),{data:o,isLoading:u}=(0,tS.useQuery)(["eigenLayerAvsData",i,r,n],async()=>i&&s&&r&&n?await Promise.all(t.map(async e=>{try{let{data:t}=await ar().get("/api/eigen-explorer-avs-data",{params:{url:r.eigenLayerExplorer,avsAddress:e.avsAddress}});return{...e,metadataName:(null==t?void 0:t.metadataName)||"",metadataLogo:(null==t?void 0:t.metadataLogo)||""}}catch(t){return console.error("Failed to fetch AVS data for ".concat(e.avsAddress,":"),t),{...e,metadataName:"",metadataLogo:""}}})):null);return(0,l.jsx)(c.lG.UC,{innerClassName:"max-w-[430px] flounder:w-[430px] flounder:p-6",scrollerClassName:"max-h-dvh h-[470px] overflow-auto",title:a("dashboard.RESTAKING.AVS_SECURING"),titleProps:{className:"text-title"},subtitleProps:{className:"!mt-0"},subtitle:"Strengthen security with verified access",children:(0,l.jsx)("div",{className:"-mx-6 border-b border-itemSecondaryMute bg-backgroundPrimaryDefault",children:t.map((e,t)=>{let a="".concat(null==r?void 0:r.eigenLayerApp,"/avs/").concat(e.avsAddress),n=null==o?void 0:o.find(t=>t.avsAddress===e.avsAddress);return(0,l.jsxs)("a",{className:" border-t border-itemSecondaryMute px-6 py-2.5 flex hover:bg-backgroundSecondaryDefault justify-between items-center",href:a,...(0,et.bI)(a),children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"flex items-center justify-center size-6 bg-backgroundSecondaryHighlight",children:u?(0,l.jsx)(c.EA,{width:"100%"}):(0,l.jsx)("img",{src:null==n?void 0:n.metadataLogo,className:"w-full",alt:null==n?void 0:n.metadataName})}),(0,l.jsx)("span",{className:"flex items-center font-medium text-callout",children:u?(0,l.jsx)(c.EA,{width:200,height:24}):(null==n?void 0:n.metadataName)||e.avsAddress})]}),(0,l.jsx)(c.$n,{as:"div",icon:{iconKey:"share",size:14},color:"secondary",variant:"text",size:"sm",tabIndex:-1})]},t)})})})},ad=t6("sign"),ac=()=>{var e,t,a,n,r;let{t:i}=(0,d.Bd)(),{activeChainId:s}=(0,x.v)(),o=(0,y.m)(e=>e.pendingOperations),{isLoading:u,error:h,isRestakingAvailable:m}=tU(),{isReadyToDelegate:p}=tY(),{values:g,loading:b,states:v,pending:f,buttons:w}=t$(),{error:S}=tz(),{apiStatus:N}=(0,eR.a)(),{completable:E}=tP(),{onCompleteWithdraw:A,onQueueWithdraw:T,onRestakeAndDelegate:j,onRedelegate:k,onDelegate:C,onUndelegate:I,errorMessage:R,resetState:L,dialogData:D}=tZ(),_=R&&(0,tj.u1)(R,i),{buttonDisabled:K,inputFieldProps:W,onSubmit:B,helperButtonProps:O,resetForm:P}=t3({onSubmit:T}),M=null==N?void 0:N.isEigenLayerEnabled,H=s&&1!==s,G=[{title:{text:i("dashboard.RESTAKING.TOTAL_RESTAKED"),tooltip:void 0},value:{text:!u&&g.totalRestakedValue?"".concat(g.totalRestakedValue," ETH"):ad,isLoading:u},error:!!h,button:(0,l.jsx)("div",{className:"-ml-1.5",children:(0,l.jsx)(t1,{variant:p?"delegate":"undelegate",onSubmit:p?C:I,disabled:!w.showDelegateButton})})},{title:{text:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{children:i("dashboard.RESTAKING.AVAILABLE_TO_RESTAKE")}),(0,l.jsx)(al,{size:"flounder",active:!!m})]}),tooltip:void 0},value:{text:!u&&g.availableToRestakeValue?"".concat(g.availableToRestakeValue," ETH"):ad,isLoading:u||(null==o?void 0:o.pending)||0>Number(g.availableToRestakeValue)},error:!!h,button:Number(g.availableToRestakeValue)||Number(g.availableToRedelegateValue)?(0,l.jsx)(t1,{variant:"restake",disabled:H||!m||u,onSubmit:j}):(0,l.jsx)(at,{}),className:"[&>div]:gap-3"},!H&&{title:{text:(0,l.jsxs)("div",{className:"flex items-center justify-between w-full gap-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{children:i("dashboard.RESTAKING.AVAILABLE_TO_DELEGATE")}),(0,l.jsx)(al,{size:"flounder",active:!!(null==(e=E.undelegated)?void 0:e.length)})]}),(null==(t=f.undelegated)?void 0:t.length)?(0,l.jsx)("span",{className:"block max-w-[120px] whitespace-normal",children:tw(f.undelegated[0].completableTime)}):null]}),tooltip:void 0,className:"w-full [&_h4]:w-full"},value:{text:Number(g.availableToRedelegateValue)?"".concat(g.availableToRedelegateValue," ETH"):ad,isLoading:(null==o?void 0:o.type)==="redelegate"||(null==o?void 0:o.type)==="undelegate"},error:!!h,button:(0,l.jsx)(t1,{variant:"redelegate",disabled:!M||!!(null==(a=f.undelegated)?void 0:a.length)||!v.showAvailableToRedelegateBox,onSubmit:()=>{var e;return(null==(e=E.undelegated)?void 0:e.length)&&k(E.undelegated)}}),className:(0,c.cx)("[&>div]:gap-3",!v.showAvailableToRedelegateBox&&"hidden")}],V=[{title:{text:void 0},titleClassName:"text-callout font-normal font-sans",value:{text:(0,l.jsxs)("div",{children:[(0,l.jsxs)("h4",{className:"flex items-center gap-2 mb-2 font-bold text-mobileBody3",children:[(0,l.jsx)(c.In,{iconKey:"warning",className:"text-backgroundWarningOnDefault"}),(0,l.jsx)("span",{children:"Maintenance notice"})]}),(0,l.jsx)("p",{className:"text-mobileBody4",children:"Withdrawals have been temporarily disabled on Hoodi due to contract migration, please proceed to EigenLayer website for more info."})]})},button:(0,l.jsx)(c.$n,{size:"sm",color:"secondary",application:!0,variant:"outline",className:"w-full normal-case",endIcon:{iconKey:"share",size:16},href:"https://hoodi.eigenlayer.xyz/token/ETH",...(0,et.bI)("https://hoodi.eigenlayer.xyz/token/ETH"),children:"EigenLayer"})}],z=[{title:{text:void 0},titleClassName:"uppercase text-callout",value:{text:"Withdrawals"}},{title:{text:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{children:i("dashboard.RESTAKING.AVAILABLE_TO_QUEUE",{amount:""})}),(0,l.jsx)(al,{size:"flounder",active:v.highlightAvailableToQueueSign})]}),tooltip:void 0},value:{text:!b.isLoadingForBalance&&g.availableToQueue?"".concat(g.availableToQueue," ETH"):ad,isLoading:b.isLoadingForBalance||b.isPendingWithdrawalsOperations},error:!!S,button:(0,l.jsx)(t8,{reset:P,onSubmit:B,inputFieldProps:W,disabled:!M||K,helperButtonProps:O,children:(0,l.jsx)(t1,{variant:"queueWithdraw",disabled:w.disableQueueButton})})},{title:{text:(0,l.jsxs)("div",{className:"relative flex items-center justify-between w-full",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{children:i("dashboard.RESTAKING.AVAILABLE_TO_WITHDRAW")}),(0,l.jsx)(al,{size:"flounder",active:v.highlightAvailableToWithdrawSign})]}),(null==(n=f.withdrawable)?void 0:n.length)?(0,l.jsx)(aa,{}):null]}),tooltip:void 0,className:"w-full [&_h4]:w-full"},value:{text:!b.isLoadingForBalance&&g.availableToWithdraw?(0,l.jsxs)(X,{active:!!(null==(r=f.withdrawable)?void 0:r.length),children:[g.availableToWithdraw," ETH"]}):ad,isLoading:b.isLoadingForBalance||b.isPendingWithdrawalsOperations},error:!!S,button:(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(t1,{variant:"restakeBack",disabled:w.disableWithdrawalButton,onSubmit:()=>{var e;return(null==(e=E.withdrawable)?void 0:e.length)&&A(E.withdrawable,"restakeBack")}}),(0,l.jsx)(t1,{variant:"completeWithdraw",disabled:w.disableWithdrawalButton,onSubmit:()=>{var e;return(null==(e=E.withdrawable)?void 0:e.length)&&A(E.withdrawable,"completeWithdraw")}})]}),className:(0,c.cx)(!v.showAvailableToWithdrawBox&&"hidden")}],U=H?V:z;return(0,l.jsxs)("div",{className:"w-full flounder:w-[390px] flounder:min-w-[390px] flex flex-col bg-backgroundSecondaryDefault border border-itemSecondaryMute",children:[(0,l.jsxs)("div",{className:"flex-1 h-full",children:[(0,l.jsx)(t9.A,{dataWidgets:G.filter(Boolean),className:"pb-0 m-0",valuesClassName:(0,c.cx)("-mt-px -mr-px flex-col gap-0",au)}),(0,l.jsx)("div",{className:"m-2 mb-0",children:(0,l.jsx)(as,{})})]}),(0,l.jsx)("div",{className:"m-2 border-itemSecondaryMute",children:(0,l.jsx)(t9.A,{dataWidgets:U.filter(Boolean),className:"pb-0 m-0",titleClassName:"text-callout",valuesClassName:(0,c.cx)("-mt-px flex-col flex-nowrap gap-4",au)})}),(0,l.jsx)(tJ,{resetState:L,dialogData:D,errorMessage:null==_?void 0:_.subtitle})]})},au="bg-backgroundPrimaryDefault [&>.h-auto]:ml-0",ah=()=>{let{t:e}=(0,d.Bd)(),{tableData:{sortedRows:t,forDownload:a,columns:n,totalItems:r,selectedTab:i,setSelectedTab:s},tableStates:{isLoading:o},controlledSort:u,error:h}=t_(),{selectedTokens:m}=(0,y.o)(e=>({selectedTokens:e.selectedTokens}));return(0,l.jsxs)(l.Fragment,{children:[r&&r>0?(0,l.jsx)(eb.m,{tableName:"".concat(i,"_rewards"),tablesRows:null!=a?a:[],isLoadingTableRows:!1,isAllRecordsFetched:!0,totalItems:r,disableSticky:!0,className:"tuna:mt-0.5"}):null,(0,l.jsxs)("div",{className:"flex flex-col items-stretch h-full gap-4 mx-0 flounder:flex-row z-[1] bg-backgroundPrimaryDefault relative px-4",children:[(0,l.jsx)(ac,{}),(0,l.jsx)("div",{className:(0,c.cx)("w-full h-full px-0 border-y border-itemSecondaryMute"),children:(0,l.jsx)("div",{className:"relative h-full overflow-hidden border-x border-itemSecondaryMute",children:(0,l.jsx)(c.tU.bL,{asChild:!0,defaultValue:am[0].value,value:i,onValueChange:e=>s(e),children:(0,l.jsxs)("div",{className:(0,c.cx)("overflow-auto h-full flex flex-col md:min-h-[560px] -m-px"),children:[(0,l.jsx)("div",{className:"flex justify-between",children:(0,l.jsx)(c.tU.YJ,{items:am.map(e=>({...e,bordered:!0,className:"px-0.5 py-3 h-10"}))})}),(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsxs)(c.tU.UC,{className:"grow h-full",value:i,tabIndex:-1,children:[(0,l.jsx)(j.I,{customOverflow:!0,rowsData:t,columns:n,emptyPrompt:{title:e("dashboard.RESTAKING.NO_REWARDS")},errorPrompt:h||void 0,isLoading:o,controlledSort:u,loadingItemCount:6,headerType:"sticky",className:"w-full -mt-px",children:e=>{let{index:a,style:r}=e,i=a-1;return(0,l.jsx)(c.XI.fI,{style:r,children:(0,T.dE)({row:t[i],columns:n})},a)}}),(0,l.jsx)("div",{className:(0,c.cx)("flex justify-end p-2",m.length?"flex":"hidden"),children:(0,l.jsx)(t2,{})})]})})]})})})})]})]})},am=[{value:"unclaimed",children:"unclaimed rewards"},{value:"claimed",children:"claimed rewards"},{value:"lifetime",children:"lifetime rewards"}],ax=()=>{let e=ep(),t=eV(),{highlightRestakingIcon:a}=tU();return{tabsList:[{value:"validators",children:"validators"},{value:"claimHistory",children:"claim history"},{value:"dailyRewards",children:"daily rewards"},{value:"restaking",children:(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:["restaking ",(0,l.jsx)(al,{active:a})]})}],tabsContent:(0,n.useMemo)(()=>[()=>(0,l.jsx)(eK,{...e}),()=>(0,l.jsx)(eU,{...t}),()=>(0,l.jsx)(tp,{}),()=>(0,l.jsx)(ah,{})],[e,t])}},ap=()=>{let{t:e}=(0,d.Bd)(),{allSelectedValidators:t,clearSelection:a}=(0,y.o)(e=>({allSelectedValidators:e.allSelectedValidators,clearSelection:e.clearSelection}),eg.x),n=t.length;return n?(0,l.jsxs)(c.az,{flex:!0,className:"fixed top-0 left-0 justify-between w-full h-12 px-4 overflow-hidden border-b border-itemPrimaryMute bg-backgroundSecondaryDefault z-header",children:[(0,l.jsx)(c.az,{className:"w-[100px]"}),(0,l.jsx)(c.az,{textAlign:"center",children:(0,l.jsx)("p",{className:"text-callout [&_b]:font-semibold",dangerouslySetInnerHTML:{__html:e("dashboard.KEYS.VALIDATORS_SELECTED_BANNER",{number:n})}})}),(0,l.jsx)(c.az,{textAlign:"right",className:"w-[100px] ",children:(0,l.jsx)(c.$n,{color:"transparent",size:"sm",icon:{iconKey:"close"},className:"-mr-2.5",onClick:()=>a()})})]}):(0,l.jsx)(l.Fragment,{})},ag=e=>{let{initialTab:t,content:a,children:i}=e,{up:s}=(0,E.P)(),{query:o,isReady:d}=(0,r.useRouter)(),{tabsContent:u,tabsList:h}=ax(),m=t||h[0].value,{selectedTab:x,setSelectedTab:p}=(0,S.d)("dashboardTabs",m),g=(0,y.o)(e=>e.showSelectionUtils),b="dailyRewards"===x&&!a,v=!(0,N.n)(null==o?void 0:o.tab,w.i),f=(0,N.M)({queryKey:"tab",queryKeyVariants:w.i,activeTab:x,setActiveTab:p}),A=e=>{f.setActiveTab&&f.setActiveTab(e),f.onTabChange&&f.onTabChange(e)};return(0,n.useEffect)(()=>{(null==o?void 0:o.tab)&&v&&A(o.tab)},[d,t,v]),(0,l.jsxs)("div",{className:"flex grow",children:[(0,l.jsx)(ap,{}),(0,l.jsx)("div",{className:"flex w-full mb-[-2px] p-0",children:(0,l.jsx)(c.tU.bL,{defaultValue:m,value:x,onValueChange:A,asChild:!0,children:(0,l.jsxs)("div",{className:(0,c.cx)("flex flex-col items-stretch w-full relative",b&&"pb-5"),children:[(0,l.jsx)("div",{className:(0,c.cx)("py-3 -mt-3 pr-40 pl-3",g&&"invisible",!b&&"tuna:z-[11] tuna:sticky tuna:top-12 tuna:bg-backgroundPrimaryDefault tuna:left-0"),children:(null==s?void 0:s.flounder)?(0,l.jsx)(c.tU.YJ,{items:h}):(0,l.jsx)("div",{className:"my-[-2px]",children:(0,l.jsx)(c.A5.bL,{onValueChange:A,defaultValue:m,value:x,options:h})})}),a||h.map((e,t)=>(0,l.jsx)(c.tU.UC,{value:e.value,tabIndex:-1,className:"grow h-full min-h-[745px] flounder:min-h-[480px]",children:u[t]()},e.value)),i]})})})]})};var ab=a(96136),av=a(79398),af=a(35236);let aw=e=>{let{validators:t}=(0,eu.d)(),a=e.length?t.filter(t=>e.includes(t.index)):void 0,l=null==a?void 0:a.reduce((e,t)=>(e.balance=e.balance.add(Number(t.balance)>0?eE.gH.from(t.balance):0),e.effectiveBalance=e.effectiveBalance.add(Number(t.effectiveBalance)>0?eE.gH.from(t.effectiveBalance):0),e.reward=e.reward.add(Number(t.reward)>0?eE.gH.from(t.reward):0),e),{balance:eE.gH.from(0),effectiveBalance:eE.gH.from(0),reward:eE.gH.from(0)});return{selectedValidators:a,selectedValidatorsData:{balance:null==l?void 0:l.balance.toString(),effectiveBalance:null==l?void 0:l.effectiveBalance.toString(),reward:null==l?void 0:l.reward.toString()}}},ay=()=>{let{t:e}=(0,d.Bd)(),{connectionStage:t}=(0,x.v)(),{hasPendingClaims:a}=(0,ej.F)(),{onOpenChange:r}=(0,D.s)("claimsDialog"),i=(0,y.o)(e=>e.allSelectedValidators),{selectedValidatorsData:s}=aw(i),{validators:o,isAllRecordsFetched:u,error:h,isLoading:m}=(0,eu.d)(),p=!!o.length,g=u&&!h,{data:b,isLoading:v,error:f}=(0,eB.g)(u?o:void 0,{enabled:g}),{balance:w,isLoading:S,error:N}=tC(),{apiStatus:E}=(0,eR.a)(),A=null==E?void 0:E.isClaimingEnabled,{isLoading:T,protocolRewards:j,error:k,totalPercentage:C}=(0,af.Q)({validatorIndicesOrCount:i,annualTipRewardsRate:null==w?void 0:w.executionRewardRate,enabled:!!i.length}),I=!A||a||"connected"!==t||!!b&&0>=Number(b.pendingTotal)||!!f||!!h||!o.length,R=!!i.length,L=(0,ab.aK)(C),_=(0,ab.aK)(j.apr),K=(0,tG.formatPercentage)(R?w?_+Number(null==w?void 0:w.executionRewardRate):L:null==w?void 0:w.annualRewardRate),W=(0,tG.formatPercentage)(R?_:null==w?void 0:w.protocolRewardRate),B=(0,tG.formatPercentage)(null==w?void 0:w.executionRewardRate),O=h||f,P=h||k,M=(0,n.useMemo)(()=>t6("sign"),[]),H=(0,n.useMemo)(()=>t=>(0,l.jsx)(c.yI,{hint:!1,title:t.title,text:t.subtitle,buttonProps:{onClick:()=>window.location.reload(),children:e("common.KEYS.TRY_AGAIN")}}),[e]),G="disconnected"!==t,V=!!G&&(S||m),z=!!G&&(T||m),U=!!G&&(g&&v||m),F=(0,n.useMemo)(()=>({title:{text:e("dashboard.KEYS.CURRENT_BALANCE"),tooltip:void 0},value:{text:!V&&w?(0,ab.z_)(s.balance||w.totalBalance,"beaconChain",p):M,isLoading:V},subValues:[{title:{text:e("dashboard.KEYS.EFFECTIVE_BALANCE"),tooltip:void 0},value:{text:!V&&w?(0,ab.z_)(s.effectiveBalance||w.effectiveBalance,"beaconChain",p):M,isLoading:V}},{title:{text:e("dashboard.KEYS.PROTOCOL_REWARDS"),tooltip:void 0},value:{text:!V&&w?(0,ab.z_)(s.reward||w.protocolRewards,"beaconChain",p):M,isLoading:V}}],error:!V&&N&&H(N)}),[w,N,V,s,M,H]),Y=(0,n.useMemo)(()=>({title:{text:e("dashboard.KEYS.ANNUAL_REWARDS_RATE"),tooltip:K?e("dashboard.KEYS.TOOLTIP_APR"):void 0},value:{text:K&&o.length?"".concat(K,"%"):M,isLoading:z||V},subValues:[{title:{text:e("dashboard.KEYS.ANNUAL_PROTOCOL_REWARDS_RATE"),tooltip:W&&o.length?e("dashboard.KEYS.TOOLTIP_ANNUAL_PROTOCOL_REWARDS_RATE",{yours:W}):void 0},value:{text:W&&o.length?"".concat(W,"%"):M,isLoading:z||V}},{title:{text:e("dashboard.KEYS.ANNUAL_TIP_REWARDS_RATE"),tooltip:B?e("dashboard.KEYS.TOOLTIP_ANNUAL_TIP_REWARDS_RATE",{yours:(.75*Number(B)).toFixed(2),commission:(.25*Number(B)).toFixed(2)}):void 0},value:{text:B&&o.length?"".concat(B,"%"):M,isLoading:V}}],error:!z&&P&&H(P)}),[K,W,B,z,V,P,M,H]),Q=(0,n.useMemo)(()=>({title:{text:e("dashboard.KEYS.UNCLAIMED_TIP_REWARDS"),tooltip:void 0},value:{text:!U&&(null==b?void 0:b.pendingTotal)&&o.length?(0,ab.z_)(b.pendingTotal,"executionLayer",p):M,isLoading:U},subValues:[{title:{text:e("dashboard.KEYS.CLAIMED_TIP_REWARDS"),tooltip:void 0},value:{text:!U&&(null==b?void 0:b.claimed)&&o.length?(0,ab.z_)(b.claimed,"executionLayer",p):M,isLoading:U}},{title:{text:e("dashboard.KEYS.TOTAL_TIP_REWARDS"),tooltip:void 0},value:{text:!U&&(null==b?void 0:b.total)&&o.length?(0,ab.z_)(b.total,"executionLayer",p):M,isLoading:U}}],button:(0,l.jsx)(av.X,{disabled:I,onClick:()=>r("initial"),className:"!h-full !px-6 !py-3.5 !leading-none"}),error:!U&&O&&H(O)}),[b,U,I,O,r,M,H]);return{data:(0,n.useMemo)(()=>[F,Y,Q],[F,Y,Q])}},aS=()=>{let{data:e}=ay();return(0,l.jsx)(t9.A,{dataWidgets:e,titleClassName:"text-[clamp(21.6px,1rem+0.47619vmin,24px)] appDataWidgetTitle1:text-[clamp(18px,1rem+0.238095vmin,20px)] appDataWidgetTitle2:text-[clamp(16.2px,1rem+0.119048vmin,18px)] appDataWidgetTitle3:text-[clamp(13.5px,1rem+0.0595238vmin,15px)] appDataWidgetTitle4:text-[clamp(17.1px,1rem+0.178571vmin,19px)]",className:"appDataWidgetsStack:gap-2 gap-0 grid flex-wrap appDataWidgetsStack:flex grid-cols-3 appDataWidgets:grid-cols-[calc(100%/3.5)_calc(100%/3.5)_auto]"})};var aN=a(1935),aE=!0;function aA(){let{query:e,isReady:t}=(0,r.useRouter)(),{validators:a,isLoading:i,error:d}=(0,eu.d)(),{activeAccount:c,connectionStage:u,errorMessage:h}=(0,x.v)(),{rendererState:m}=(0,s.C)(),{open:w}=(0,D.s)("claimsDialog"),y="loadingView"===m,S=!!(null==a?void 0:a.length),N=(0,n.useMemo)(()=>({loadingView:()=>(0,l.jsx)(o.x,{}),disconnectedView:()=>(0,l.jsx)(f,{}),noDataView:()=>(0,l.jsx)(b,{}),buildingDashboardView:()=>(0,l.jsx)(v,{}),connectedView:()=>void 0,invalidView:()=>(0,l.jsx)(p,{}),invalidReadonlyView:()=>(0,l.jsx)(g,{})}),[]),E=(0,n.useMemo)(()=>{let a=(null==h?void 0:h.key)==="ROUTER_INVALID_ADDRESS_QUERY";return!0===y||!0===i&&c||"loading"===u?"loadingView":d?"invalidView":!S&&"stake-page"===e.from&&t?"buildingDashboardView":c&&!S?"noDataView":S?"connectedView":a?"invalidReadonlyView":"disconnectedView"},[null==h?void 0:h.key,y,i,c,S,t,u]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(aS,{}),(0,l.jsx)(ag,{initialTab:"validators",content:N[E](),children:"connectedView"===E&&!!w&&(0,l.jsx)(aN.n,{})})]})}aA.getLayout=function(e){return(0,l.jsx)(i.c,{disableLoading:!0,children:e})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5973,2203,4560,1963,1909,7926,2362,9701,2769,8809,6667,8685,1409,6510,1593,9614,636,6593,8792],()=>t(12273)),_N_E=e.O()}]);